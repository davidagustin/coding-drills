/**
 * Dart Coding Drills Problems
 *
 * Comprehensive collection of Dart problems covering:
 * - List Operations (map, where, fold, expand, firstWhere)
 * - Map Operations (map, putIfAbsent, update, removeWhere)
 * - Set Operations (union, intersection, difference, contains)
 * - String Methods (split, replaceAll, contains, substring)
 * - Iterable Extensions (skip, take, expand, followedBy)
 * - Null Safety (?, ??, ??=, late, required)
 * - Collections (List, Set, Map, Queue, LinkedList)
 * - Async/Await (Future, async*, Stream, StreamController)
 * - Isolates (Isolate.spawn, SendPort, ReceivePort)
 * - Extensions (extension methods, on clause)
 * - Generics (type parameters, bounds, covariance)
 * - Mixins (with clause, on clause, mixin composition)
 * - Enums (enhanced enums with methods and fields)
 * - Records (Dart 3.0: record types, destructuring)
 * - Patterns (Dart 3.0: switch expressions, pattern matching)
 * - Sealed Classes (Dart 3.0: exhaustive switching)
 *
 * Total: 591 problems across all categories
 */

import type { Problem } from '../types';

export const dartProblems: Problem[] = [
  // ============================================================
  // List Methods
  // ============================================================

  {
    id: 'dart-list-001',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Filter Even Numbers',
    text: 'Use `where` to filter and keep only even numbers from the list.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 7, 8];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 7, 8];',
    expected: [2, 4, 6, 8],
    sample: 'numbers.where((n) => n % 2 == 0).toList()',
    hints: [
      'where() returns an Iterable, not a List',
      'Use toList() to convert the result back to a List',
    ],
    validPatterns: [/\.where\s*\(/],
    tags: ['where', 'filter', 'lists'],
  },

  {
    id: 'dart-list-002',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Transform to Squares',
    text: 'Use `map` to transform each number to its square.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [1, 4, 9, 16, 25],
    sample: 'numbers.map((n) => n * n).toList()',
    hints: ['map() transforms each element', 'Returns an Iterable - use toList() to get a List'],
    validPatterns: [/\.map\s*\(/],
    tags: ['map', 'transform', 'lists'],
  },

  {
    id: 'dart-list-003',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Calculate Sum with Fold',
    text: 'Use `fold` to calculate the sum of all numbers starting from 0.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: 15,
    sample: 'numbers.fold(0, (sum, n) => sum + n)',
    hints: [
      'fold takes an initial value and a combine function',
      'The combine function receives accumulator and current element',
    ],
    validPatterns: [/\.fold\s*\(\s*0/],
    tags: ['fold', 'reduce', 'accumulator'],
  },

  {
    id: 'dart-list-004',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Sort Numbers Ascending',
    text: 'Use `sort` to sort the list in ascending order.',
    setup: 'var numbers = [5, 2, 8, 1, 9, 3];',
    setupCode: 'var numbers = [5, 2, 8, 1, 9, 3];',
    expected: [1, 2, 3, 5, 8, 9],
    sample: 'numbers.sort(); // modifies in place',
    hints: ['sort() modifies the list in place', 'For a sorted copy, use [...numbers]..sort()'],
    validPatterns: [/\.sort\s*\(/],
    tags: ['sort', 'order', 'lists'],
  },

  {
    id: 'dart-list-005',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Reverse a List',
    text: 'Get a reversed view of the list using `reversed`.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [5, 4, 3, 2, 1],
    sample: 'numbers.reversed.toList()',
    hints: ['reversed returns an Iterable, not a List', 'Use toList() to convert to a List'],
    validPatterns: [/\.reversed/],
    tags: ['reversed', 'order', 'lists'],
  },

  {
    id: 'dart-list-006',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Check if List Contains Element',
    text: 'Check if the list contains the number 5 using `contains`.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    expected: true,
    sample: 'numbers.contains(5)',
    hints: ['contains() returns a bool', 'Uses == for comparison'],
    validPatterns: [/\.contains\s*\(\s*5\s*\)/],
    tags: ['contains', 'search', 'lists'],
  },

  {
    id: 'dart-list-007',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Get First Element',
    text: 'Get the first element of the list using the `first` property.',
    setup: 'var fruits = ["apple", "banana", "cherry"];',
    setupCode: 'var fruits = ["apple", "banana", "cherry"];',
    expected: 'apple',
    sample: 'fruits.first',
    hints: ['first is a property, not a method', 'Throws StateError if list is empty'],
    validPatterns: [/\.first(?!\()/],
    tags: ['first', 'access', 'lists'],
  },

  {
    id: 'dart-list-008',
    category: 'List Methods',
    difficulty: 'easy',
    title: 'Get Last Element',
    text: 'Get the last element of the list using the `last` property.',
    setup: 'var fruits = ["apple", "banana", "cherry"];',
    setupCode: 'var fruits = ["apple", "banana", "cherry"];',
    expected: 'cherry',
    sample: 'fruits.last',
    hints: ['last is a property, not a method', 'Throws StateError if list is empty'],
    validPatterns: [/\.last(?!\()/],
    tags: ['last', 'access', 'lists'],
  },

  {
    id: 'dart-list-009',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Take First N Elements',
    text: 'Take the first 3 elements from the list using `take`.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    expected: [1, 2, 3],
    sample: 'numbers.take(3).toList()',
    hints: ['take() returns an Iterable', 'If count exceeds length, returns all elements'],
    validPatterns: [/\.take\s*\(\s*3\s*\)/],
    tags: ['take', 'slice', 'lists'],
  },

  {
    id: 'dart-list-010',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Skip First N Elements',
    text: 'Skip the first 2 elements and get the rest using `skip`.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [3, 4, 5],
    sample: 'numbers.skip(2).toList()',
    hints: ['skip() returns an Iterable', 'If count exceeds length, returns empty Iterable'],
    validPatterns: [/\.skip\s*\(\s*2\s*\)/],
    tags: ['skip', 'slice', 'lists'],
  },

  // ============================================================
  // String Methods
  // ============================================================

  {
    id: 'dart-string-001',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Get String Length',
    text: 'Get the length of the string using the `length` property.',
    setup: 'var text = "Hello, Dart!";',
    setupCode: 'var text = "Hello, Dart!";',
    expected: 12,
    sample: 'text.length',
    hints: ['length is a property, not a method', 'Includes all characters including spaces'],
    validPatterns: [/\.length(?!\()/],
    tags: ['length', 'property', 'strings'],
  },

  {
    id: 'dart-string-002',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Convert to Lowercase',
    text: 'Convert the string to lowercase using `toLowerCase`.',
    setup: 'var text = "HELLO WORLD";',
    setupCode: 'var text = "HELLO WORLD";',
    expected: 'hello world',
    sample: 'text.toLowerCase()',
    hints: ['toLowerCase() returns a new string', 'Original string is unchanged'],
    validPatterns: [/\.toLowerCase\s*\(\s*\)/],
    tags: ['toLowerCase', 'case', 'strings'],
  },

  {
    id: 'dart-string-003',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Convert to Uppercase',
    text: 'Convert the string to uppercase using `toUpperCase`.',
    setup: 'var text = "hello world";',
    setupCode: 'var text = "hello world";',
    expected: 'HELLO WORLD',
    sample: 'text.toUpperCase()',
    hints: ['toUpperCase() returns a new string', 'Original string is unchanged'],
    validPatterns: [/\.toUpperCase\s*\(\s*\)/],
    tags: ['toUpperCase', 'case', 'strings'],
  },

  {
    id: 'dart-string-004',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Split String by Delimiter',
    text: 'Split the string by comma using `split`.',
    setup: 'var csv = "apple,banana,cherry";',
    setupCode: 'var csv = "apple,banana,cherry";',
    expected: ['apple', 'banana', 'cherry'],
    sample: 'csv.split(",")',
    hints: ['split() returns a List<String>', 'Can split by any pattern'],
    validPatterns: [/\.split\s*\(\s*['"],['"]?\s*\)/],
    tags: ['split', 'parse', 'strings'],
  },

  {
    id: 'dart-string-005',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Check if String Contains Substring',
    text: 'Check if the string contains the word "Dart" using `contains`.',
    setup: 'var text = "I love Dart programming";',
    setupCode: 'var text = "I love Dart programming";',
    expected: true,
    sample: 'text.contains("Dart")',
    hints: ['contains() is case-sensitive', 'Can also use a RegExp pattern'],
    validPatterns: [/\.contains\s*\(\s*["']Dart["']\s*\)/],
    tags: ['contains', 'search', 'strings'],
  },

  {
    id: 'dart-string-006',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Replace All Occurrences',
    text: 'Replace all spaces with underscores using `replaceAll`.',
    setup: 'var text = "hello world dart";',
    setupCode: 'var text = "hello world dart";',
    expected: 'hello_world_dart',
    sample: 'text.replaceAll(" ", "_")',
    hints: ['replaceAll() replaces all occurrences', 'Can use RegExp for pattern matching'],
    validPatterns: [/\.replaceAll\s*\(/],
    tags: ['replaceAll', 'replace', 'strings'],
  },

  {
    id: 'dart-string-007',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Trim Whitespace',
    text: 'Remove leading and trailing whitespace using `trim`.',
    setup: 'var text = "   hello world   ";',
    setupCode: 'var text = "   hello world   ";',
    expected: 'hello world',
    sample: 'text.trim()',
    hints: [
      'trim() removes leading and trailing whitespace',
      'Use trimLeft() or trimRight() for one side',
    ],
    validPatterns: [/\.trim\s*\(\s*\)/],
    tags: ['trim', 'whitespace', 'strings'],
  },

  {
    id: 'dart-string-008',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Check if Starts With',
    text: 'Check if the string starts with "Hello" using `startsWith`.',
    setup: 'var text = "Hello, World!";',
    setupCode: 'var text = "Hello, World!";',
    expected: true,
    sample: 'text.startsWith("Hello")',
    hints: ['startsWith() is case-sensitive', 'Can specify a starting index as second argument'],
    validPatterns: [/\.startsWith\s*\(\s*["']Hello["']\s*\)/],
    tags: ['startsWith', 'prefix', 'strings'],
  },

  {
    id: 'dart-string-009',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Check if Ends With',
    text: 'Check if the string ends with ".dart" using `endsWith`.',
    setup: 'var filename = "main.dart";',
    setupCode: 'var filename = "main.dart";',
    expected: true,
    sample: 'filename.endsWith(".dart")',
    hints: ['endsWith() is case-sensitive', 'Useful for checking file extensions'],
    validPatterns: [/\.endsWith\s*\(\s*["']\.dart["']\s*\)/],
    tags: ['endsWith', 'suffix', 'strings'],
  },

  {
    id: 'dart-string-010',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Split and Transform',
    text: 'Split the string by spaces and convert each word to uppercase.',
    setup: 'var text = "hello dart world";',
    setupCode: 'var text = "hello dart world";',
    expected: ['HELLO', 'DART', 'WORLD'],
    sample: 'text.split(" ").map((w) => w.toUpperCase()).toList()',
    hints: ['Chain split() with map()', 'Remember to call toList() at the end'],
    validPatterns: [/\.split\s*\(.*\)\.map\s*\(/],
    tags: ['split', 'map', 'transform', 'strings'],
  },

  // ============================================================
  // Map Methods
  // ============================================================

  {
    id: 'dart-map-001',
    category: 'Map Methods',
    difficulty: 'easy',
    title: 'Check if Key Exists',
    text: 'Check if the map contains the key "name" using `containsKey`.',
    setup: 'var person = {"name": "Alice", "age": 30};',
    setupCode: 'var person = {"name": "Alice", "age": 30};',
    expected: true,
    sample: 'person.containsKey("name")',
    hints: ['containsKey() returns a bool', 'Does not check for null values'],
    validPatterns: [/\.containsKey\s*\(\s*["']name["']\s*\)/],
    tags: ['containsKey', 'search', 'maps'],
  },

  {
    id: 'dart-map-002',
    category: 'Map Methods',
    difficulty: 'easy',
    title: 'Check if Value Exists',
    text: 'Check if the map contains the value "Alice" using `containsValue`.',
    setup: 'var person = {"name": "Alice", "age": 30};',
    setupCode: 'var person = {"name": "Alice", "age": 30};',
    expected: true,
    sample: 'person.containsValue("Alice")',
    hints: ['containsValue() returns a bool', 'Uses == for comparison'],
    validPatterns: [/\.containsValue\s*\(\s*["']Alice["']\s*\)/],
    tags: ['containsValue', 'search', 'maps'],
  },

  {
    id: 'dart-map-003',
    category: 'Map Methods',
    difficulty: 'medium',
    title: 'Put If Absent',
    text: 'Add key "city" with value "NYC" only if it does not exist using `putIfAbsent`.',
    setup: 'var person = {"name": "Alice"};',
    setupCode: 'var person = {"name": "Alice"};',
    expected: { name: 'Alice', city: 'NYC' },
    sample: 'person.putIfAbsent("city", () => "NYC")',
    hints: [
      'putIfAbsent takes a key and a function that returns the value',
      'The function is only called if key is absent',
    ],
    validPatterns: [/\.putIfAbsent\s*\(\s*["']city["']/],
    tags: ['putIfAbsent', 'add', 'maps'],
  },

  {
    id: 'dart-map-004',
    category: 'Map Methods',
    difficulty: 'easy',
    title: 'Remove Entry by Key',
    text: 'Remove the entry with key "age" using `remove`.',
    setup: 'var person = {"name": "Alice", "age": 30, "city": "NYC"};',
    setupCode: 'var person = {"name": "Alice", "age": 30, "city": "NYC"};',
    expected: { name: 'Alice', city: 'NYC' },
    sample: 'person.remove("age"); // returns the removed value',
    hints: ['remove() returns the removed value or null', 'Modifies the map in place'],
    validPatterns: [/\.remove\s*\(\s*["']age["']\s*\)/],
    tags: ['remove', 'delete', 'maps'],
  },

  {
    id: 'dart-map-005',
    category: 'Map Methods',
    difficulty: 'easy',
    title: 'Get All Keys',
    text: 'Get all keys from the map using the `keys` property.',
    setup: 'var scores = {"Alice": 90, "Bob": 85, "Charlie": 92};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 85, "Charlie": 92};',
    expected: ['Alice', 'Bob', 'Charlie'],
    sample: 'scores.keys.toList()',
    hints: ['keys returns an Iterable', 'Use toList() to convert to a List'],
    validPatterns: [/\.keys/],
    tags: ['keys', 'iterate', 'maps'],
  },

  {
    id: 'dart-map-006',
    category: 'Map Methods',
    difficulty: 'easy',
    title: 'Get All Values',
    text: 'Get all values from the map using the `values` property.',
    setup: 'var scores = {"Alice": 90, "Bob": 85, "Charlie": 92};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 85, "Charlie": 92};',
    expected: [90, 85, 92],
    sample: 'scores.values.toList()',
    hints: ['values returns an Iterable', 'Use toList() to convert to a List'],
    validPatterns: [/\.values/],
    tags: ['values', 'iterate', 'maps'],
  },

  {
    id: 'dart-map-007',
    category: 'Map Methods',
    difficulty: 'medium',
    title: 'Update Value',
    text: 'Update the score for "Alice" to 95 using `update`.',
    setup: 'var scores = {"Alice": 90, "Bob": 85};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 85};',
    expected: { Alice: 95, Bob: 85 },
    sample: 'scores.update("Alice", (value) => 95)',
    hints: ['update() takes a key and an update function', 'Can provide ifAbsent for missing keys'],
    validPatterns: [/\.update\s*\(\s*["']Alice["']/],
    tags: ['update', 'modify', 'maps'],
  },

  {
    id: 'dart-map-008',
    category: 'Map Methods',
    difficulty: 'medium',
    title: 'Map Entries',
    text: 'Get all entries as a list of MapEntry objects.',
    setup: 'var data = {"a": 1, "b": 2};',
    setupCode: 'var data = {"a": 1, "b": 2};',
    expected: [
      ['a', 1],
      ['b', 2],
    ],
    sample: 'data.entries.map((e) => [e.key, e.value]).toList()',
    hints: ['entries returns Iterable<MapEntry>', 'Each MapEntry has key and value properties'],
    validPatterns: [/\.entries/],
    tags: ['entries', 'iterate', 'maps'],
  },

  {
    id: 'dart-map-009',
    category: 'Map Methods',
    difficulty: 'hard',
    title: 'Transform Map Values',
    text: 'Double all values in the map using `map`.',
    setup: 'var scores = {"Alice": 10, "Bob": 20, "Charlie": 30};',
    setupCode: 'var scores = {"Alice": 10, "Bob": 20, "Charlie": 30};',
    expected: { Alice: 20, Bob: 40, Charlie: 60 },
    sample: 'scores.map((key, value) => MapEntry(key, value * 2))',
    hints: [
      'map() on Map takes a function with key and value parameters',
      'Return a MapEntry for each transformation',
    ],
    validPatterns: [/\.map\s*\(\s*\(\s*\w+\s*,\s*\w+\s*\)/],
    tags: ['map', 'transform', 'maps'],
  },

  {
    id: 'dart-map-010',
    category: 'Map Methods',
    difficulty: 'hard',
    title: 'Filter Map by Value',
    text: 'Keep only entries where the value is greater than 50.',
    setup: 'var scores = {"Alice": 45, "Bob": 78, "Charlie": 92, "Diana": 30};',
    setupCode: 'var scores = {"Alice": 45, "Bob": 78, "Charlie": 92, "Diana": 30};',
    expected: { Bob: 78, Charlie: 92 },
    sample: 'Map.fromEntries(scores.entries.where((e) => e.value > 50))',
    hints: ['Filter entries using where()', 'Convert back to Map using Map.fromEntries()'],
    validPatterns: [/\.entries\.where\s*\(/],
    tags: ['filter', 'where', 'maps'],
  },

  // ============================================================
  // Set Operations
  // ============================================================

  {
    id: 'dart-set-001',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Add Element to Set',
    text: 'Add the number 4 to the set using `add`.',
    setup: 'var numbers = {1, 2, 3};',
    setupCode: 'var numbers = {1, 2, 3};',
    expected: [1, 2, 3, 4],
    sample: 'numbers.add(4); // returns true if added',
    hints: ['add() returns true if element was added', 'Duplicate elements are ignored'],
    validPatterns: [/\.add\s*\(\s*4\s*\)/],
    tags: ['add', 'insert', 'sets'],
  },

  {
    id: 'dart-set-002',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Remove Element from Set',
    text: 'Remove the number 2 from the set using `remove`.',
    setup: 'var numbers = {1, 2, 3, 4};',
    setupCode: 'var numbers = {1, 2, 3, 4};',
    expected: [1, 3, 4],
    sample: 'numbers.remove(2); // returns true if removed',
    hints: ['remove() returns true if element was removed', 'Returns false if element not found'],
    validPatterns: [/\.remove\s*\(\s*2\s*\)/],
    tags: ['remove', 'delete', 'sets'],
  },

  {
    id: 'dart-set-003',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Check if Set Contains Element',
    text: 'Check if the set contains the number 3 using `contains`.',
    setup: 'var numbers = {1, 2, 3, 4, 5};',
    setupCode: 'var numbers = {1, 2, 3, 4, 5};',
    expected: true,
    sample: 'numbers.contains(3)',
    hints: ['contains() returns a bool', 'Set lookup is O(1) on average'],
    validPatterns: [/\.contains\s*\(\s*3\s*\)/],
    tags: ['contains', 'search', 'sets'],
  },

  {
    id: 'dart-set-004',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Union of Two Sets',
    text: 'Get the union of two sets using `union`.',
    setup: 'var set1 = {1, 2, 3};\nvar set2 = {3, 4, 5};',
    setupCode: 'var set1 = {1, 2, 3};\nvar set2 = {3, 4, 5};',
    expected: [1, 2, 3, 4, 5],
    sample: 'set1.union(set2)',
    hints: ['union() returns a new Set', 'Contains all elements from both sets'],
    validPatterns: [/\.union\s*\(\s*set2\s*\)/],
    tags: ['union', 'combine', 'sets'],
  },

  {
    id: 'dart-set-005',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Intersection of Two Sets',
    text: 'Get the intersection of two sets using `intersection`.',
    setup: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    setupCode: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    expected: [3, 4],
    sample: 'set1.intersection(set2)',
    hints: ['intersection() returns a new Set', 'Contains only elements present in both sets'],
    validPatterns: [/\.intersection\s*\(\s*set2\s*\)/],
    tags: ['intersection', 'common', 'sets'],
  },

  {
    id: 'dart-set-006',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Difference of Two Sets',
    text: 'Get elements in set1 that are not in set2 using `difference`.',
    setup: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    setupCode: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    expected: [1, 2],
    sample: 'set1.difference(set2)',
    hints: [
      'difference() returns a new Set',
      'Order matters: set1.difference(set2) != set2.difference(set1)',
    ],
    validPatterns: [/\.difference\s*\(\s*set2\s*\)/],
    tags: ['difference', 'subtract', 'sets'],
  },

  {
    id: 'dart-set-007',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Add Multiple Elements',
    text: 'Add elements 5, 6, 7 to the set using `addAll`.',
    setup: 'var numbers = {1, 2, 3, 4};',
    setupCode: 'var numbers = {1, 2, 3, 4};',
    expected: [1, 2, 3, 4, 5, 6, 7],
    sample: 'numbers.addAll([5, 6, 7])',
    hints: ['addAll() accepts any Iterable', 'Duplicates are automatically ignored'],
    validPatterns: [/\.addAll\s*\(/],
    tags: ['addAll', 'insert', 'sets'],
  },

  {
    id: 'dart-set-008',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Convert List to Set',
    text: 'Remove duplicates from the list by converting to a Set.',
    setup: 'var numbers = [1, 2, 2, 3, 3, 3, 4];',
    setupCode: 'var numbers = [1, 2, 2, 3, 3, 3, 4];',
    expected: [1, 2, 3, 4],
    sample: 'numbers.toSet().toList()',
    hints: ['toSet() removes duplicates', 'Order may not be preserved in all cases'],
    validPatterns: [/\.toSet\s*\(\s*\)/],
    tags: ['toSet', 'deduplicate', 'sets'],
  },

  {
    id: 'dart-set-009',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Symmetric Difference',
    text: 'Get elements that are in either set but not in both.',
    setup: 'var set1 = {1, 2, 3};\nvar set2 = {2, 3, 4};',
    setupCode: 'var set1 = {1, 2, 3};\nvar set2 = {2, 3, 4};',
    expected: [1, 4],
    sample: 'set1.difference(set2).union(set2.difference(set1))',
    hints: ['Symmetric difference = (A - B) union (B - A)', 'Elements in A or B but not both'],
    validPatterns: [/\.difference\s*\(.*\)\.union\s*\(/],
    tags: ['difference', 'union', 'symmetric', 'sets'],
  },

  {
    id: 'dart-set-010',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Filter Set Elements',
    text: 'Keep only even numbers in the set using `where`.',
    setup: 'var numbers = {1, 2, 3, 4, 5, 6, 7, 8};',
    setupCode: 'var numbers = {1, 2, 3, 4, 5, 6, 7, 8};',
    expected: [2, 4, 6, 8],
    sample: 'numbers.where((n) => n % 2 == 0).toSet()',
    hints: ['where() works on Sets too', 'Returns an Iterable, use toSet() to keep as Set'],
    validPatterns: [/\.where\s*\(.*%\s*2\s*==\s*0.*\)/],
    tags: ['where', 'filter', 'sets'],
  },

  // ============================================================
  // Null Safety
  // ============================================================

  {
    id: 'dart-null-001',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Nullable Type Declaration',
    text: 'Declare a nullable String variable that can hold null.',
    setup: '// Declare a nullable String',
    setupCode: '// Declare a nullable String',
    expected: null,
    sample: 'String? name = null;',
    hints: ['Use ? after the type to make it nullable', 'Without ?, the variable cannot be null'],
    validPatterns: [/String\?\s+\w+\s*=\s*null/],
    tags: ['nullable', 'declaration', 'null-safety'],
  },

  {
    id: 'dart-null-002',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Null-Aware Access',
    text: 'Safely get the length of a nullable string using `?.`.',
    setup: 'String? name = "Alice";',
    setupCode: 'String? name = "Alice";',
    expected: 5,
    sample: 'name?.length',
    hints: ['?. returns null if the object is null', 'Otherwise returns the property value'],
    validPatterns: [/\?\.\s*length/],
    tags: ['?.', 'safe-access', 'null-safety'],
  },

  {
    id: 'dart-null-003',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Default Value with ??',
    text: 'Get the value or a default of "Unknown" using `??`.',
    setup: 'String? name = null;',
    setupCode: 'String? name = null;',
    expected: 'Unknown',
    sample: 'name ?? "Unknown"',
    hints: [
      '?? returns the right side if left is null',
      'Short-circuits: right side only evaluated if needed',
    ],
    validPatterns: [/\?\?\s*["']Unknown["']/],
    tags: ['??', 'default', 'null-safety'],
  },

  {
    id: 'dart-null-004',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Null-Aware Assignment',
    text: 'Assign a value only if the variable is null using `??=`.',
    setup: 'String? name = null;',
    setupCode: 'String? name = null;',
    expected: 'Default',
    sample: 'name ??= "Default"; // name is now "Default"',
    hints: ['??= assigns only if variable is null', 'Does nothing if already has a value'],
    validPatterns: [/\?\?=\s*["']Default["']/],
    tags: ['??=', 'assign', 'null-safety'],
  },

  {
    id: 'dart-null-005',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Chain Null-Aware Access',
    text: 'Safely access nested property using chained `?.`.',
    setup: 'Map<String, dynamic>? user = {"profile": {"name": "Alice"}};',
    setupCode: 'Map<String, dynamic>? user = {"profile": {"name": "Alice"}};',
    expected: 'Alice',
    sample: 'user?["profile"]?["name"]',
    hints: ['Chain ?. for nested access', 'Any null in the chain returns null'],
    validPatterns: [/\?\[.*\]\?\[/],
    tags: ['?.', 'chain', 'nested', 'null-safety'],
  },

  {
    id: 'dart-null-006',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Null-Aware Method Call',
    text: 'Call toUpperCase only if the string is not null.',
    setup: 'String? text = "hello";',
    setupCode: 'String? text = "hello";',
    expected: 'HELLO',
    sample: 'text?.toUpperCase()',
    hints: ['?. works with method calls too', 'Returns null if object is null'],
    validPatterns: [/\?\.toUpperCase\s*\(\s*\)/],
    tags: ['?.', 'method', 'null-safety'],
  },

  {
    id: 'dart-null-007',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Combine Null Operators',
    text: 'Get uppercase of string or "N/A" if null.',
    setup: 'String? text = null;',
    setupCode: 'String? text = null;',
    expected: 'N/A',
    sample: 'text?.toUpperCase() ?? "N/A"',
    hints: [
      'Combine ?. with ?? for safe access with default',
      'First check null, then provide default',
    ],
    validPatterns: [/\?\.toUpperCase\s*\(\s*\)\s*\?\?/],
    tags: ['?.', '??', 'combine', 'null-safety'],
  },

  {
    id: 'dart-null-008',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Non-Null Assertion',
    text: 'Assert the value is not null and get its length using `!`.',
    setup: 'String? name = "Alice";',
    setupCode: 'String? name = "Alice";',
    expected: 5,
    sample: 'name!.length',
    hints: ['! asserts the value is not null', 'Throws if value is actually null - use carefully'],
    validPatterns: [/!\s*\.length/],
    tags: ['!', 'assertion', 'null-safety'],
  },

  {
    id: 'dart-null-009',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Late Initialization',
    text: 'Declare a late-initialized non-nullable variable.',
    setup: '// Declare a late variable',
    setupCode: '// Declare a late variable',
    expected: 'late String name;',
    sample: 'late String name; // initialized later',
    hints: [
      'late allows non-nullable without immediate initialization',
      'Must be assigned before first read',
    ],
    validPatterns: [/late\s+String\s+\w+/],
    tags: ['late', 'initialization', 'null-safety'],
  },

  {
    id: 'dart-null-010',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Null-Aware Spread',
    text: 'Spread a nullable list only if it is not null.',
    setup: 'List<int>? moreNumbers = [4, 5, 6];\nvar numbers = [1, 2, 3];',
    setupCode: 'List<int>? moreNumbers = [4, 5, 6];\nvar numbers = [1, 2, 3];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: '[...numbers, ...?moreNumbers]',
    hints: ['...? is the null-aware spread operator', 'Spreads nothing if the list is null'],
    validPatterns: [/\.\.\.\?/],
    tags: ['...?', 'spread', 'null-safety'],
  },

  // ============================================================
  // Additional List Methods (Hard)
  // ============================================================

  {
    id: 'dart-list-011',
    category: 'List Methods',
    difficulty: 'hard',
    title: 'Fold to Product',
    text: 'Calculate the product of all numbers using `fold`.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: 120,
    sample: 'numbers.fold(1, (product, n) => product * n)',
    hints: [
      'Start with 1 for multiplication (identity)',
      'fold is more flexible than reduce for this case',
    ],
    validPatterns: [/\.fold\s*\(\s*1/],
    tags: ['fold', 'product', 'reduce'],
  },

  {
    id: 'dart-list-012',
    category: 'List Methods',
    difficulty: 'hard',
    title: 'Sort with Custom Comparator',
    text: 'Sort strings by length in descending order.',
    setup: 'var words = ["cat", "elephant", "dog", "butterfly"];',
    setupCode: 'var words = ["cat", "elephant", "dog", "butterfly"];',
    expected: ['butterfly', 'elephant', 'cat', 'dog'],
    sample: 'words..sort((a, b) => b.length.compareTo(a.length))',
    hints: ['sort() accepts a compare function', 'Reverse comparison order for descending'],
    validPatterns: [/\.sort\s*\(\s*\(\s*\w+\s*,\s*\w+\s*\)/],
    tags: ['sort', 'comparator', 'custom'],
  },

  {
    id: 'dart-list-013',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Expand Nested Lists',
    text: 'Flatten a list of lists using `expand`.',
    setup: 'var nested = [[1, 2], [3, 4], [5, 6]];',
    setupCode: 'var nested = [[1, 2], [3, 4], [5, 6]];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'nested.expand((list) => list).toList()',
    hints: ['expand() flattens one level of nesting', 'Similar to flatMap in other languages'],
    validPatterns: [/\.expand\s*\(/],
    tags: ['expand', 'flatten', 'lists'],
  },

  {
    id: 'dart-list-014',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Find First Match',
    text: 'Find the first number greater than 5 using `firstWhere`.',
    setup: 'var numbers = [1, 3, 5, 7, 9, 11];',
    setupCode: 'var numbers = [1, 3, 5, 7, 9, 11];',
    expected: 7,
    sample: 'numbers.firstWhere((n) => n > 5)',
    hints: ['firstWhere throws if no match found', 'Use orElse parameter for a default value'],
    validPatterns: [/\.firstWhere\s*\(/],
    tags: ['firstWhere', 'find', 'search'],
  },

  {
    id: 'dart-list-015',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Check Any Match',
    text: 'Check if any number is negative using `any`.',
    setup: 'var numbers = [1, -2, 3, 4, 5];',
    setupCode: 'var numbers = [1, -2, 3, 4, 5];',
    expected: true,
    sample: 'numbers.any((n) => n < 0)',
    hints: ['any() returns true if at least one matches', 'Short-circuits on first match'],
    validPatterns: [/\.any\s*\(/],
    tags: ['any', 'predicate', 'check'],
  },

  {
    id: 'dart-list-016',
    category: 'List Methods',
    difficulty: 'medium',
    title: 'Check All Match',
    text: 'Check if all numbers are positive using `every`.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: true,
    sample: 'numbers.every((n) => n > 0)',
    hints: ['every() returns true if all elements match', 'Returns true for empty list'],
    validPatterns: [/\.every\s*\(/],
    tags: ['every', 'predicate', 'check'],
  },

  // ============================================================
  // Additional String Methods (Hard)
  // ============================================================

  {
    id: 'dart-string-011',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Pad String Left',
    text: 'Pad the number string to width 5 with leading zeros.',
    setup: 'var number = "42";',
    setupCode: 'var number = "42";',
    expected: '00042',
    sample: 'number.padLeft(5, "0")',
    hints: ['padLeft adds padding to the left', 'Second argument is the padding character'],
    validPatterns: [/\.padLeft\s*\(\s*5\s*,\s*["']0["']\s*\)/],
    tags: ['padLeft', 'format', 'strings'],
  },

  {
    id: 'dart-string-012',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Get Substring',
    text: 'Extract "World" from the string using `substring`.',
    setup: 'var text = "Hello, World!";',
    setupCode: 'var text = "Hello, World!";',
    expected: 'World',
    sample: 'text.substring(7, 12)',
    hints: ['substring(start, end) - end is exclusive', 'Indices are 0-based'],
    validPatterns: [/\.substring\s*\(\s*7\s*,\s*12\s*\)/],
    tags: ['substring', 'extract', 'strings'],
  },

  {
    id: 'dart-string-013',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Replace with Regex',
    text: 'Remove all digits from the string.',
    setup: 'var text = "abc123def456";',
    setupCode: 'var text = "abc123def456";',
    expected: 'abcdef',
    sample: 'text.replaceAll(RegExp(r"\\d"), "")',
    hints: ['Use RegExp for pattern matching', 'r"" is a raw string for regex'],
    validPatterns: [/\.replaceAll\s*\(\s*RegExp\s*\(/],
    tags: ['replaceAll', 'regex', 'strings'],
  },

  {
    id: 'dart-string-014',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Split by Regex',
    text: 'Split the string by one or more spaces.',
    setup: 'var text = "hello   world  dart";',
    setupCode: 'var text = "hello   world  dart";',
    expected: ['hello', 'world', 'dart'],
    sample: 'text.split(RegExp(r"\\s+"))',
    hints: ['Use RegExp for pattern-based splitting', '\\s+ matches one or more whitespace'],
    validPatterns: [/\.split\s*\(\s*RegExp\s*\(/],
    tags: ['split', 'regex', 'strings'],
  },

  // ============================================================
  // Advanced Dart - Iterable Methods
  // ============================================================

  {
    id: 'dart-adv-001',
    category: 'Iterable Methods',
    difficulty: 'easy',
    title: 'Expand Nested Lists',
    text: 'Use the `expand()` method to flatten a list of lists into a single list.',
    setup: 'final nested = [[1, 2], [3, 4], [5, 6]];',
    setupCode: 'final nested = [[1, 2], [3, 4], [5, 6]];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'nested.expand((list) => list).toList() // returns [1, 2, 3, 4, 5, 6]',
    hints: [
      'expand() transforms each element into zero or more elements',
      'The function should return an Iterable for each element',
      'Call toList() to convert the Iterable result to a List',
    ],
    validPatterns: [
      /\.expand\s*\(\s*\([^)]*\)\s*=>\s*[^)]+\)\s*\.toList\s*\(\s*\)/,
      /\.expand\s*\([^)]+\)\s*\.toList\s*\(\s*\)/,
    ],
    tags: ['expand', 'iterable', 'flatten', 'nested'],
  },

  {
    id: 'dart-adv-002',
    category: 'Iterable Methods',
    difficulty: 'easy',
    title: 'Filter by Type with whereType',
    text: 'Use `whereType<int>()` to extract only integers from a mixed-type list.',
    setup: 'final mixed = [1, "hello", 2, true, 3, "world", 4];',
    setupCode: 'final mixed = [1, "hello", 2, true, 3, "world", 4];',
    expected: [1, 2, 3, 4],
    sample: 'mixed.whereType<int>().toList() // returns [1, 2, 3, 4]',
    hints: [
      'whereType<T>() filters elements by their runtime type',
      'It only keeps elements that are instances of T',
      'More type-safe than using where() with is checks',
    ],
    validPatterns: [
      /\.whereType\s*<\s*int\s*>\s*\(\s*\)\s*\.toList\s*\(\s*\)/,
      /whereType<int>\(\)/,
    ],
    tags: ['whereType', 'type-filtering', 'iterable', 'generics'],
  },

  {
    id: 'dart-adv-003',
    category: 'Iterable Methods',
    difficulty: 'easy',
    title: 'Cast List to Specific Type',
    text: 'Use `cast<num>()` to cast a List<int> to List<num>.',
    setup: 'final integers = <int>[1, 2, 3, 4, 5];',
    setupCode: 'final integers = <int>[1, 2, 3, 4, 5];',
    expected: [1, 2, 3, 4, 5],
    sample: 'integers.cast<num>().toList() // returns List<num>',
    hints: [
      'cast<T>() creates a view with the new type',
      'Useful when you need a supertype list',
      'Throws if elements cannot be cast at runtime',
    ],
    validPatterns: [/\.cast\s*<\s*num\s*>\s*\(\s*\)/, /cast<num>\(\)/],
    tags: ['cast', 'type-casting', 'iterable', 'generics'],
  },

  // ============================================================
  // Advanced Dart - Cascade Notation
  // ============================================================

  {
    id: 'dart-adv-004',
    category: 'Cascade Notation',
    difficulty: 'easy',
    title: 'Basic Cascade Operations',
    text: 'Use cascade notation (..) to add multiple elements to a list in a single expression.',
    setup: 'final numbers = <int>[];',
    setupCode: 'final numbers = <int>[];',
    expected: [1, 2, 3],
    sample: 'numbers..add(1)..add(2)..add(3) // numbers is now [1, 2, 3]',
    hints: [
      'Cascade notation (..) returns the target object, not the method result',
      'Allows chaining multiple operations on the same object',
      'Each .. calls a method and returns the original object',
    ],
    validPatterns: [
      /\.\.\s*add\s*\(\s*1\s*\)\s*\.\.\s*add\s*\(\s*2\s*\)\s*\.\.\s*add\s*\(\s*3\s*\)/,
      /\.\.add\(1\)\.\.add\(2\)\.\.add\(3\)/,
    ],
    tags: ['cascade', 'notation', 'chaining', 'fluent'],
  },

  {
    id: 'dart-adv-005',
    category: 'Cascade Notation',
    difficulty: 'medium',
    title: 'Cascade with Object Configuration',
    text: 'Use cascade notation to configure a StringBuffer and return its string value.',
    setup: 'final buffer = StringBuffer();',
    setupCode: 'final buffer = StringBuffer();',
    expected: 'Hello, World!',
    sample: '(buffer..write("Hello")..write(", ")..write("World!")).toString()',
    hints: [
      'Cascade returns the object, not method return values',
      'Chain multiple write() calls with cascades',
      'Call toString() at the end to get the result',
    ],
    validPatterns: [
      /buffer\s*\.\.\s*write.*\.\.\s*write.*\.toString\s*\(\s*\)/,
      /\.\.write\(["']Hello["']\)/,
    ],
    tags: ['cascade', 'StringBuffer', 'configuration', 'builder'],
  },

  {
    id: 'dart-adv-006',
    category: 'Cascade Notation',
    difficulty: 'medium',
    title: 'Null-aware Cascade',
    text: 'Use null-aware cascade (?..) to safely configure a nullable list.',
    setup: 'List<int>? numbers = [];',
    setupCode: 'List<int>? numbers = [];',
    expected: [1, 2, 3],
    sample: 'numbers?..add(1)..add(2)..add(3) // safe if numbers is null',
    hints: [
      'Null-aware cascade (?..) only executes if object is not null',
      'The first cascade uses ?.. subsequent ones use ..',
      'If object is null, the entire chain is skipped',
    ],
    validPatterns: [/\?\.\.\s*add/, /\?\.\./],
    tags: ['cascade', 'null-aware', 'null-safety', 'chaining'],
  },

  // ============================================================
  // Advanced Dart - Spread Operator
  // ============================================================

  {
    id: 'dart-adv-007',
    category: 'Spread Operator',
    difficulty: 'easy',
    title: 'Combine Lists with Spread',
    text: 'Use the spread operator (...) to combine two lists into one.',
    setup: 'final first = [1, 2, 3];\nfinal second = [4, 5, 6];',
    setupCode: 'final first = [1, 2, 3];\nfinal second = [4, 5, 6];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: '[...first, ...second] // returns [1, 2, 3, 4, 5, 6]',
    hints: [
      'The spread operator (...) unpacks elements from a collection',
      'Can combine multiple collections in a single list literal',
      'Works with List, Set, and other iterables',
    ],
    validPatterns: [
      /\[\s*\.\.\.first\s*,\s*\.\.\.second\s*\]/,
      /\[\s*\.\.\.first,\s*\.\.\.second\s*\]/,
    ],
    tags: ['spread', 'operator', 'combine', 'collections'],
  },

  {
    id: 'dart-adv-008',
    category: 'Spread Operator',
    difficulty: 'medium',
    title: 'Null-aware Spread Operator',
    text: 'Use the null-aware spread operator (...?) to safely combine lists where one might be null.',
    setup: 'final listA = [1, 2, 3];\nList<int>? listB = null;',
    setupCode: 'final listA = [1, 2, 3];\nList<int>? listB = null;',
    expected: [1, 2, 3],
    sample: '[...listA, ...?listB] // returns [1, 2, 3]',
    hints: [
      'The null-aware spread (...?) skips null collections',
      'Prevents null errors when spreading nullable lists',
      'The ? comes after the three dots',
    ],
    validPatterns: [/\[\s*\.\.\.listA\s*,\s*\.\.\.\?\s*listB\s*\]/, /\.\.\.\?listB/],
    tags: ['spread', 'null-aware', 'nullable', 'safe'],
  },

  {
    id: 'dart-adv-009',
    category: 'Spread Operator',
    difficulty: 'medium',
    title: 'Spread in Map Literal',
    text: 'Use spread to merge two maps into one.',
    setup:
      'final defaults = {"theme": "light", "fontSize": 14};\nfinal overrides = {"theme": "dark"};',
    setupCode:
      'final defaults = {"theme": "light", "fontSize": 14};\nfinal overrides = {"theme": "dark"};',
    expected: { theme: 'dark', fontSize: 14 },
    sample: '{...defaults, ...overrides} // returns {"theme": "dark", "fontSize": 14}',
    hints: [
      'Spread works with Map literals too',
      'Later entries override earlier ones for duplicate keys',
      'Useful for merging configuration objects',
    ],
    validPatterns: [
      /\{\s*\.\.\.defaults\s*,\s*\.\.\.overrides\s*\}/,
      /\.\.\.defaults.*\.\.\.overrides/,
    ],
    tags: ['spread', 'map', 'merge', 'configuration'],
  },

  // ============================================================
  // Advanced Dart - Collection if/for
  // ============================================================

  {
    id: 'dart-adv-010',
    category: 'Collection if/for',
    difficulty: 'easy',
    title: 'Collection if Expression',
    text: 'Use collection if to conditionally include an element in a list.',
    setup: 'final includeZero = true;',
    setupCode: 'final includeZero = true;',
    expected: [0, 1, 2, 3],
    sample: '[if (includeZero) 0, 1, 2, 3] // returns [0, 1, 2, 3]',
    hints: [
      'Collection if uses if keyword inside collection literals',
      'No parentheses around the entire expression needed',
      'The element is only included if the condition is true',
    ],
    validPatterns: [
      /\[\s*if\s*\(\s*includeZero\s*\)\s*0\s*,\s*1\s*,\s*2\s*,\s*3\s*\]/,
      /if\s*\(includeZero\)\s*0/,
    ],
    tags: ['collection-if', 'conditional', 'literal'],
  },

  {
    id: 'dart-adv-011',
    category: 'Collection if/for',
    difficulty: 'medium',
    title: 'Collection for Expression',
    text: 'Use collection for to create a list of squared numbers from 1 to 5.',
    setup: '// Generate squares of 1 to 5',
    setupCode: '// Generate squares of 1 to 5',
    expected: [1, 4, 9, 16, 25],
    sample: '[for (var i = 1; i <= 5; i++) i * i] // returns [1, 4, 9, 16, 25]',
    hints: [
      'Collection for allows for loops inside literals',
      'The loop variable is available for the element expression',
      'More concise than List.generate() for simple cases',
    ],
    validPatterns: [/\[\s*for\s*\([^)]+\)\s*.+\*\s*.+\]/, /for\s*\(.*i\s*\*\s*i/],
    tags: ['collection-for', 'loop', 'generation', 'squares'],
  },

  {
    id: 'dart-adv-012',
    category: 'Collection if/for',
    difficulty: 'medium',
    title: 'Nested Collection for',
    text: 'Use nested collection for to create a multiplication table pairs.',
    setup: '// Generate pairs for 2x2 multiplication table',
    setupCode: '// Generate pairs for 2x2 multiplication table',
    expected: [
      [1, 1, 1],
      [1, 2, 2],
      [2, 1, 2],
      [2, 2, 4],
    ],
    sample: '[for (var i = 1; i <= 2; i++) for (var j = 1; j <= 2; j++) [i, j, i * j]]',
    hints: [
      'Multiple for expressions can be nested',
      'Inner loop iterates completely for each outer iteration',
      'Results are flattened into a single list',
    ],
    validPatterns: [/for\s*\([^)]+\)\s*for\s*\([^)]+\)/, /for.*for.*\[.*\*.*\]/],
    tags: ['collection-for', 'nested', 'multiplication', 'pairs'],
  },

  {
    id: 'dart-adv-013',
    category: 'Collection if/for',
    difficulty: 'hard',
    title: 'Collection if-else',
    text: 'Use collection if-else to transform elements conditionally.',
    setup: 'final numbers = [1, 2, 3, 4, 5];',
    setupCode: 'final numbers = [1, 2, 3, 4, 5];',
    expected: ['odd', 'even', 'odd', 'even', 'odd'],
    sample: '[for (var n in numbers) if (n % 2 == 0) "even" else "odd"]',
    hints: [
      'Collection if can have an else clause',
      'Combine with for to transform each element',
      'Each element produces exactly one result',
    ],
    validPatterns: [/for.*if.*else/, /if\s*\([^)]+%\s*2[^)]+\).*"even".*else.*"odd"/],
    tags: ['collection-if', 'collection-for', 'conditional', 'transform'],
  },

  // ============================================================
  // Advanced Dart - Map Transformations
  // ============================================================

  {
    id: 'dart-adv-014',
    category: 'Map Transformations',
    difficulty: 'easy',
    title: 'Map entries() Iteration',
    text: 'Use entries to iterate over both keys and values, returning a list of formatted strings.',
    setup: 'final scores = {"Alice": 95, "Bob": 87, "Charlie": 92};',
    setupCode: 'final scores = {"Alice": 95, "Bob": 87, "Charlie": 92};',
    expected: ['Alice: 95', 'Bob: 87', 'Charlie: 92'],
    sample: 'scores.entries.map((e) => "${e.key}: ${e.value}").toList()',
    hints: [
      'entries returns an Iterable of MapEntry objects',
      'Each MapEntry has key and value properties',
      'Use string interpolation to format the output',
    ],
    validPatterns: [/\.entries\.map\s*\([^)]+\)\s*\.toList\s*\(\s*\)/, /entries\.map/],
    tags: ['map', 'entries', 'iteration', 'transformation'],
  },

  {
    id: 'dart-adv-015',
    category: 'Map Transformations',
    difficulty: 'medium',
    title: 'Map with map() Method',
    text: 'Transform a Map by doubling all values using the map() method.',
    setup: 'final prices = {"apple": 1.0, "banana": 0.5, "orange": 0.75};',
    setupCode: 'final prices = {"apple": 1.0, "banana": 0.5, "orange": 0.75};',
    expected: { apple: 2.0, banana: 1.0, orange: 1.5 },
    sample: 'prices.map((key, value) => MapEntry(key, value * 2))',
    hints: [
      'Map.map() transforms each key-value pair',
      'Must return a MapEntry for each entry',
      'Can transform both keys and values',
    ],
    validPatterns: [
      /\.map\s*\(\s*\([^,]+,\s*[^)]+\)\s*=>\s*MapEntry\s*\([^,]+,\s*[^*]+\*\s*2\s*\)\s*\)/,
      /MapEntry\([^,]+,.*\*\s*2\)/,
    ],
    tags: ['map', 'transformation', 'MapEntry', 'values'],
  },

  {
    id: 'dart-adv-016',
    category: 'Map Transformations',
    difficulty: 'hard',
    title: 'Invert Map Keys and Values',
    text: 'Swap keys and values in a map where values are unique.',
    setup: 'final original = {"a": 1, "b": 2, "c": 3};',
    setupCode: 'final original = {"a": 1, "b": 2, "c": 3};',
    expected: { 1: 'a', 2: 'b', 3: 'c' },
    sample: 'original.map((key, value) => MapEntry(value, key))',
    hints: [
      'Use map() to swap key and value positions',
      'MapEntry constructor takes (key, value)',
      'Works only when values are unique',
    ],
    validPatterns: [/MapEntry\s*\(\s*value\s*,\s*key\s*\)/, /map.*MapEntry\(value, key\)/],
    tags: ['map', 'invert', 'swap', 'transformation'],
  },

  // ============================================================
  // Advanced Dart - Set Operations
  // ============================================================

  {
    id: 'dart-adv-017',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Set Union Operation',
    text: 'Find the union of two sets using the union() method.',
    setup: 'final setA = {1, 2, 3};\nfinal setB = {3, 4, 5};',
    setupCode: 'final setA = {1, 2, 3};\nfinal setB = {3, 4, 5};',
    expected: [1, 2, 3, 4, 5],
    sample: 'setA.union(setB) // returns {1, 2, 3, 4, 5}',
    hints: [
      'union() combines all elements from both sets',
      'Duplicates are automatically removed',
      'Returns a new Set without modifying originals',
    ],
    validPatterns: [/setA\.union\s*\(\s*setB\s*\)/, /\.union\([^)]+\)/],
    tags: ['set', 'union', 'combine', 'unique'],
  },

  {
    id: 'dart-adv-018',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Set Intersection',
    text: 'Find elements common to both sets using intersection().',
    setup: 'final setA = {1, 2, 3, 4, 5};\nfinal setB = {4, 5, 6, 7, 8};',
    setupCode: 'final setA = {1, 2, 3, 4, 5};\nfinal setB = {4, 5, 6, 7, 8};',
    expected: [4, 5],
    sample: 'setA.intersection(setB) // returns {4, 5}',
    hints: [
      'intersection() returns elements present in both sets',
      'Returns a new Set without modifying originals',
      'Order may not be preserved',
    ],
    validPatterns: [/setA\.intersection\s*\(\s*setB\s*\)/, /\.intersection\(/],
    tags: ['set', 'intersection', 'common', 'elements'],
  },

  {
    id: 'dart-adv-019',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Set Difference',
    text: 'Find elements in setA that are not in setB using difference().',
    setup: 'final setA = {1, 2, 3, 4, 5};\nfinal setB = {4, 5, 6, 7, 8};',
    setupCode: 'final setA = {1, 2, 3, 4, 5};\nfinal setB = {4, 5, 6, 7, 8};',
    expected: [1, 2, 3],
    sample: 'setA.difference(setB) // returns {1, 2, 3}',
    hints: [
      'difference() returns elements in the first set but not the second',
      'Order matters: A.difference(B) != B.difference(A)',
      'Returns a new Set',
    ],
    validPatterns: [/setA\.difference\s*\(\s*setB\s*\)/, /\.difference\(/],
    tags: ['set', 'difference', 'subtract', 'exclusive'],
  },

  // ============================================================
  // Advanced Dart - Collection Extensions
  // ============================================================

  {
    id: 'dart-adv-020',
    category: 'Collection Extensions',
    difficulty: 'easy',
    title: 'firstWhere with orElse',
    text: 'Find the first even number in the list, or return -1 if none exists.',
    setup: 'final numbers = [1, 3, 5, 7, 9];',
    setupCode: 'final numbers = [1, 3, 5, 7, 9];',
    expected: -1,
    sample: 'numbers.firstWhere((n) => n.isEven, orElse: () => -1) // returns -1',
    hints: [
      'firstWhere() finds the first element matching a condition',
      'The orElse parameter provides a fallback value',
      'Without orElse, throws StateError if no match found',
    ],
    validPatterns: [
      /\.firstWhere\s*\([^,]+,\s*orElse\s*:\s*\(\s*\)\s*=>\s*-1\s*\)/,
      /firstWhere.*orElse/,
    ],
    tags: ['firstWhere', 'orElse', 'search', 'fallback'],
  },

  {
    id: 'dart-adv-021',
    category: 'Collection Extensions',
    difficulty: 'medium',
    title: 'fold() for Accumulation',
    text: 'Use fold() to calculate the product of all numbers in the list.',
    setup: 'final numbers = [2, 3, 4, 5];',
    setupCode: 'final numbers = [2, 3, 4, 5];',
    expected: 120,
    sample: 'numbers.fold(1, (product, n) => product * n) // returns 120',
    hints: [
      'fold() accumulates values with an initial value',
      'First parameter is the initial accumulator value',
      'Use 1 as initial value for multiplication',
    ],
    validPatterns: [
      /\.fold\s*\(\s*1\s*,\s*\([^,]+,\s*[^)]+\)\s*=>\s*[^*]+\*\s*[^)]+\)/,
      /fold\(1,.*\*.*\)/,
    ],
    tags: ['fold', 'accumulation', 'product', 'reduce'],
  },

  {
    id: 'dart-adv-022',
    category: 'Collection Extensions',
    difficulty: 'medium',
    title: 'take and skip Combination',
    text: 'Get elements from index 2 to 4 (inclusive) using skip() and take().',
    setup: 'final numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];',
    setupCode: 'final numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];',
    expected: [2, 3, 4],
    sample: 'numbers.skip(2).take(3).toList() // returns [2, 3, 4]',
    hints: [
      'skip(n) skips the first n elements',
      'take(n) takes the first n elements from remaining',
      'Combining them creates a slice operation',
    ],
    validPatterns: [/\.skip\s*\(\s*2\s*\)\s*\.take\s*\(\s*3\s*\)/, /skip\(2\)\.take\(3\)/],
    tags: ['skip', 'take', 'slice', 'iterable'],
  },

  // ============================================================
  // Advanced Dart - Async Operations
  // ============================================================

  {
    id: 'dart-adv-023',
    category: 'Async Operations',
    difficulty: 'medium',
    title: 'Future.wait for Parallel Execution',
    text: 'Use Future.wait() to execute multiple futures in parallel and get all results.',
    setup:
      'Future<int> fetchA() async => 1;\nFuture<int> fetchB() async => 2;\nFuture<int> fetchC() async => 3;',
    setupCode:
      'Future<int> fetchA() async => 1;\nFuture<int> fetchB() async => 2;\nFuture<int> fetchC() async => 3;',
    expected: [1, 2, 3],
    sample: 'await Future.wait([fetchA(), fetchB(), fetchC()]) // returns [1, 2, 3]',
    hints: [
      'Future.wait() runs multiple futures concurrently',
      'Returns a Future<List> with results in order',
      'All futures must complete for the result',
    ],
    validPatterns: [/Future\.wait\s*\(\s*\[.*\]\s*\)/, /await\s+Future\.wait/],
    tags: ['future', 'wait', 'parallel', 'async'],
  },

  {
    id: 'dart-adv-024',
    category: 'Async Operations',
    difficulty: 'medium',
    title: 'Stream.fromIterable',
    text: 'Create a Stream from a list and collect values greater than 2.',
    setup: 'final numbers = [1, 2, 3, 4, 5];',
    setupCode: 'final numbers = [1, 2, 3, 4, 5];',
    expected: [3, 4, 5],
    sample: 'await Stream.fromIterable(numbers).where((n) => n > 2).toList()',
    hints: [
      'Stream.fromIterable() creates a stream from any iterable',
      'Stream has similar methods to Iterable (where, map, etc.)',
      'Use toList() to collect stream values into a list',
    ],
    validPatterns: [
      /Stream\.fromIterable\s*\([^)]+\)\s*\.where\s*\([^)]+\)\s*\.toList\s*\(\s*\)/,
      /Stream\.fromIterable.*where.*>\s*2/,
    ],
    tags: ['stream', 'fromIterable', 'filter', 'async'],
  },

  {
    id: 'dart-adv-025',
    category: 'Async Operations',
    difficulty: 'hard',
    title: 'Stream Transformation Pipeline',
    text: 'Create a stream pipeline that filters even numbers, squares them, and takes the first 3.',
    setup: 'final numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];',
    setupCode: 'final numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];',
    expected: [4, 16, 36],
    sample:
      'await Stream.fromIterable(numbers)\n  .where((n) => n % 2 == 0)\n  .map((n) => n * n)\n  .take(3)\n  .toList() // returns [4, 16, 36]',
    hints: [
      'Chain multiple stream transformations',
      'where() filters, map() transforms',
      'take() limits the number of results',
      'Order of operations matters for the result',
    ],
    validPatterns: [
      /Stream\.fromIterable.*\.where.*\.map.*\.take.*\.toList/,
      /\.where\(.*%\s*2\s*==\s*0.*\)\.map\(.*\*.*\)/,
    ],
    tags: ['stream', 'pipeline', 'transformation', 'async', 'chain'],
  },

  {
    id: 'dart-adv-026',
    category: 'Async Operations',
    difficulty: 'hard',
    title: 'Stream with asyncMap',
    text: 'Use asyncMap to perform async transformations on stream elements.',
    setup: 'Future<String> fetchName(int id) async => "User$id";\nfinal ids = [1, 2, 3];',
    setupCode: 'Future<String> fetchName(int id) async => "User$id";\nfinal ids = [1, 2, 3];',
    expected: ['User1', 'User2', 'User3'],
    sample: 'await Stream.fromIterable(ids).asyncMap(fetchName).toList()',
    hints: [
      'asyncMap() applies an async function to each element',
      'Each element waits for its future to complete',
      'Results are emitted in order',
      'More controlled than Future.wait for sequential processing',
    ],
    validPatterns: [
      /Stream\.fromIterable\s*\([^)]+\)\s*\.asyncMap\s*\([^)]+\)/,
      /\.asyncMap\s*\(\s*fetchName\s*\)/,
    ],
    tags: ['stream', 'asyncMap', 'async', 'transformation', 'sequential'],
  },

  {
    id: 'dart-adv-027',
    category: 'Async Operations',
    difficulty: 'hard',
    title: 'Future.delayed with Computation',
    text: 'Create a delayed future that returns a computed value after 100ms.',
    setup: '// Create a delayed computation',
    setupCode: '// Create a delayed computation',
    expected: 42,
    sample: 'await Future.delayed(Duration(milliseconds: 100), () => 42)',
    hints: [
      'Future.delayed takes a Duration and an optional computation',
      'The computation runs after the delay',
      'Without computation, returns Future<void>',
    ],
    validPatterns: [
      /Future\.delayed\s*\(\s*Duration\s*\([^)]+\)\s*,\s*\(\s*\)\s*=>\s*42\s*\)/,
      /Future\.delayed.*Duration.*42/,
    ],
    tags: ['future', 'delayed', 'computation', 'async', 'timer'],
  },

  // ============================================================
  // Advanced Dart - Complex Operations
  // ============================================================

  {
    id: 'dart-adv-028',
    category: 'Iterable Methods',
    difficulty: 'medium',
    title: 'Expand with Transformation',
    text: 'Use expand() to duplicate each number, creating a pair of [n, n*2] for each element.',
    setup: 'final numbers = [1, 2, 3];',
    setupCode: 'final numbers = [1, 2, 3];',
    expected: [1, 2, 2, 4, 3, 6],
    sample: 'numbers.expand((n) => [n, n * 2]).toList() // returns [1, 2, 2, 4, 3, 6]',
    hints: [
      'expand() can return multiple elements for each input',
      'Return a list with the original and transformed values',
      'The resulting iterable is flattened automatically',
    ],
    validPatterns: [
      /\.expand\s*\(\s*\([^)]*\)\s*=>\s*\[[^,]+,\s*[^\]]+\*\s*2\s*\]\s*\)/,
      /expand.*\[.*\*\s*2\]/,
    ],
    tags: ['expand', 'transformation', 'duplicate', 'flatten'],
  },

  {
    id: 'dart-adv-029',
    category: 'Collection Extensions',
    difficulty: 'hard',
    title: 'groupBy Using fold',
    text: 'Group a list of words by their first letter using fold().',
    setup: 'final words = ["apple", "banana", "apricot", "blueberry", "cherry"];',
    setupCode: 'final words = ["apple", "banana", "apricot", "blueberry", "cherry"];',
    expected: { a: ['apple', 'apricot'], b: ['banana', 'blueberry'], c: ['cherry'] },
    sample:
      'words.fold<Map<String, List<String>>>({}, (map, word) {\n  (map[word[0]] ??= []).add(word);\n  return map;\n})',
    hints: [
      'Use fold with an empty Map as initial value',
      'Access first character with word[0]',
      'Use ??= to initialize list if key does not exist',
    ],
    validPatterns: [/\.fold.*Map.*word\[0\]/, /fold.*\?\?=\s*\[\]/],
    tags: ['fold', 'groupBy', 'map', 'categorize'],
  },

  {
    id: 'dart-adv-030',
    category: 'Map Transformations',
    difficulty: 'hard',
    title: 'Complex Map Transformation',
    text: 'Transform a nested map structure, filtering and restructuring data.',
    setup:
      'final data = {\n  "users": [\n    {"name": "Alice", "age": 30, "active": true},\n    {"name": "Bob", "age": 25, "active": false},\n    {"name": "Charlie", "age": 35, "active": true}\n  ]\n};',
    setupCode:
      'final data = {\n  "users": [\n    {"name": "Alice", "age": 30, "active": true},\n    {"name": "Bob", "age": 25, "active": false},\n    {"name": "Charlie", "age": 35, "active": true}\n  ]\n};',
    expected: ['Alice (30)', 'Charlie (35)'],
    sample:
      '(data["users"] as List)\n  .where((u) => u["active"] == true)\n  .map((u) => "${u["name"]} (${u["age"]})") \n  .toList()',
    hints: [
      'Cast the nested list to access list methods',
      'Use where() to filter by the active field',
      'Use map() with string interpolation for formatting',
      'Chain operations for clean data transformation',
    ],
    validPatterns: [
      /data\["users"\].*\.where.*active.*\.map.*name.*age/,
      /where.*\["active"\].*==.*true.*\.map/,
    ],
    tags: ['map', 'nested', 'filter', 'transformation', 'complex'],
  },

  {
    id: 'dart-adv-031',
    category: 'Iterable Methods',
    difficulty: 'hard',
    title: 'Combine expand, whereType, and Map',
    text: 'Flatten a nested structure, filter by type, transform, and collect using multiple Dart features.',
    setup: 'final nested = [[1, "a", 2], [3, "b"], [4, 5, "c", 6]];',
    setupCode: 'final nested = [[1, "a", 2], [3, "b"], [4, 5, "c", 6]];',
    expected: [2, 4, 6, 8, 10, 12],
    sample:
      'nested\n  .expand((list) => list)\n  .whereType<int>()\n  .map((n) => n * 2)\n  .toList()',
    hints: [
      'expand() flattens the nested lists',
      'whereType<int>() filters to only integers',
      'map() transforms each value',
      'Chain all operations together for a clean pipeline',
    ],
    validPatterns: [
      /\.expand\s*\([^)]+\)\s*\.whereType\s*<\s*int\s*>\s*\(\s*\)\s*\.map\s*\([^)]+\)\s*\.toList\s*\(\s*\)/,
      /expand.*whereType<int>.*map.*\*\s*2/,
    ],
    tags: ['expand', 'whereType', 'map', 'pipeline', 'chain', 'complex'],
  },

  // ============================================================
  // NEW PROBLEMS - List Operations (100-124)
  // ============================================================

  {
    id: 'dart-list-100',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Double Each Element',
    text: 'Use `map` to double each number in the list.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [2, 4, 6, 8, 10],
    sample: 'numbers.map((n) => n * 2).toList()',
    hints: ['map() transforms each element', 'Remember to call toList()'],
    tags: ['map', 'transform', 'lists'],
  },

  {
    id: 'dart-list-101',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Filter Positive Numbers',
    text: 'Use `where` to keep only positive numbers.',
    setup: 'var numbers = [-3, -1, 0, 2, 5, -4, 8];',
    setupCode: 'var numbers = [-3, -1, 0, 2, 5, -4, 8];',
    expected: [2, 5, 8],
    sample: 'numbers.where((n) => n > 0).toList()',
    hints: ['where() filters elements based on a condition', 'Use > 0 to check for positive'],
    tags: ['where', 'filter', 'lists'],
  },

  {
    id: 'dart-list-102',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Find Maximum with Fold',
    text: 'Use `fold` to find the maximum number in the list.',
    setup: 'var numbers = [3, 7, 2, 9, 4];',
    setupCode: 'var numbers = [3, 7, 2, 9, 4];',
    expected: 9,
    sample: 'numbers.fold(numbers.first, (max, n) => n > max ? n : max)',
    hints: ['Start with the first element', 'Compare each element with current max'],
    tags: ['fold', 'max', 'lists'],
  },

  {
    id: 'dart-list-103',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Expand to Repeated Elements',
    text: 'Use `expand` to repeat each number twice.',
    setup: 'var numbers = [1, 2, 3];',
    setupCode: 'var numbers = [1, 2, 3];',
    expected: [1, 1, 2, 2, 3, 3],
    sample: 'numbers.expand((n) => [n, n]).toList()',
    hints: [
      'expand() can return multiple elements for each input',
      'Return a list with the element twice',
    ],
    tags: ['expand', 'repeat', 'lists'],
  },

  {
    id: 'dart-list-104',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Find First Even with firstWhere',
    text: 'Use `firstWhere` to find the first even number.',
    setup: 'var numbers = [1, 3, 5, 6, 7, 8];',
    setupCode: 'var numbers = [1, 3, 5, 6, 7, 8];',
    expected: 6,
    sample: 'numbers.firstWhere((n) => n % 2 == 0)',
    hints: ['firstWhere() returns the first matching element', 'Use modulo to check for even'],
    tags: ['firstWhere', 'find', 'lists'],
  },

  {
    id: 'dart-list-105',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Map to String Lengths',
    text: 'Use `map` to convert strings to their lengths.',
    setup: 'var words = ["apple", "pie", "banana"];',
    setupCode: 'var words = ["apple", "pie", "banana"];',
    expected: [5, 3, 6],
    sample: 'words.map((w) => w.length).toList()',
    hints: ['Access the length property of each string', 'map() transforms each element'],
    tags: ['map', 'length', 'strings', 'lists'],
  },

  {
    id: 'dart-list-106',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Filter Long Strings',
    text: 'Use `where` to keep only strings longer than 4 characters.',
    setup: 'var words = ["cat", "elephant", "dog", "butterfly"];',
    setupCode: 'var words = ["cat", "elephant", "dog", "butterfly"];',
    expected: ['elephant', 'butterfly'],
    sample: 'words.where((w) => w.length > 4).toList()',
    hints: ['Check the length property', 'where() keeps elements that match the condition'],
    tags: ['where', 'filter', 'strings', 'lists'],
  },

  {
    id: 'dart-list-107',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Concatenate Strings with Fold',
    text: 'Use `fold` to concatenate all strings with a comma separator.',
    setup: 'var words = ["apple", "banana", "cherry"];',
    setupCode: 'var words = ["apple", "banana", "cherry"];',
    expected: 'apple, banana, cherry',
    sample: 'words.fold("", (acc, w) => acc.isEmpty ? w : "$acc, $w")',
    hints: [
      'Start with an empty string',
      'Handle the first element differently to avoid leading comma',
    ],
    tags: ['fold', 'join', 'strings', 'lists'],
  },

  {
    id: 'dart-list-108',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Expand Ranges',
    text: 'Use `expand` to generate ranges from pairs.',
    setup: 'var pairs = [[1, 3], [5, 7]];',
    setupCode: 'var pairs = [[1, 3], [5, 7]];',
    expected: [1, 2, 3, 5, 6, 7],
    sample: 'pairs.expand((p) => List.generate(p[1] - p[0] + 1, (i) => p[0] + i)).toList()',
    hints: ['Use List.generate to create a range', 'expand() flattens the results'],
    tags: ['expand', 'range', 'generate', 'lists'],
  },

  {
    id: 'dart-list-109',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Find Last Match with lastWhere',
    text: 'Use `lastWhere` to find the last number less than 5.',
    setup: 'var numbers = [1, 7, 3, 8, 2, 9];',
    setupCode: 'var numbers = [1, 7, 3, 8, 2, 9];',
    expected: 2,
    sample: 'numbers.lastWhere((n) => n < 5)',
    hints: ['lastWhere() returns the last matching element', 'Searches from the end'],
    tags: ['lastWhere', 'find', 'lists'],
  },

  {
    id: 'dart-list-110',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Map with Index',
    text: 'Use `asMap` and `entries` to include index in transformation.',
    setup: 'var letters = ["a", "b", "c"];',
    setupCode: 'var letters = ["a", "b", "c"];',
    expected: ['0: a', '1: b', '2: c'],
    sample: 'letters.asMap().entries.map((e) => "${e.key}: ${e.value}").toList()',
    hints: ['asMap() converts to index-value map', 'entries gives you key-value pairs'],
    tags: ['map', 'index', 'asMap', 'lists'],
  },

  {
    id: 'dart-list-111',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Fold to Count Occurrences',
    text: 'Use `fold` to count how many times each number appears.',
    setup: 'var numbers = [1, 2, 1, 3, 2, 1];',
    setupCode: 'var numbers = [1, 2, 1, 3, 2, 1];',
    expected: { 1: 3, 2: 2, 3: 1 },
    sample: 'numbers.fold<Map<int, int>>({}, (map, n) { map[n] = (map[n] ?? 0) + 1; return map; })',
    hints: ['Use a Map as accumulator', 'Use ?? 0 to handle missing keys'],
    tags: ['fold', 'count', 'frequency', 'maps'],
  },

  {
    id: 'dart-list-112',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Filter and Transform Chain',
    text: 'Filter even numbers and square them in one chain.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6];',
    expected: [4, 16, 36],
    sample: 'numbers.where((n) => n % 2 == 0).map((n) => n * n).toList()',
    hints: ['Chain where() and map()', 'Filter first, then transform'],
    tags: ['where', 'map', 'chain', 'lists'],
  },

  {
    id: 'dart-list-113',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Expand with Condition',
    text: 'Use `expand` to double even numbers only.',
    setup: 'var numbers = [1, 2, 3, 4];',
    setupCode: 'var numbers = [1, 2, 3, 4];',
    expected: [1, 2, 2, 3, 4, 4],
    sample: 'numbers.expand((n) => n % 2 == 0 ? [n, n] : [n]).toList()',
    hints: ['Return different lists based on condition', 'expand() can return varying lengths'],
    tags: ['expand', 'conditional', 'lists'],
  },

  {
    id: 'dart-list-114',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'firstWhere with orElse',
    text: 'Find first number > 100, return -1 if not found.',
    setup: 'var numbers = [10, 20, 30, 40];',
    setupCode: 'var numbers = [10, 20, 30, 40];',
    expected: -1,
    sample: 'numbers.firstWhere((n) => n > 100, orElse: () => -1)',
    hints: ['Use orElse parameter for fallback', 'orElse takes a function returning the default'],
    tags: ['firstWhere', 'orElse', 'fallback', 'lists'],
  },

  {
    id: 'dart-list-115',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Map to Uppercase',
    text: 'Use `map` to convert all strings to uppercase.',
    setup: 'var words = ["hello", "world"];',
    setupCode: 'var words = ["hello", "world"];',
    expected: ['HELLO', 'WORLD'],
    sample: 'words.map((w) => w.toUpperCase()).toList()',
    hints: ['Use toUpperCase() on each string', 'map() applies the function to each element'],
    tags: ['map', 'uppercase', 'strings', 'lists'],
  },

  {
    id: 'dart-list-116',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Filter Non-Empty Strings',
    text: 'Use `where` to remove empty strings.',
    setup: 'var words = ["apple", "", "banana", "", "cherry"];',
    setupCode: 'var words = ["apple", "", "banana", "", "cherry"];',
    expected: ['apple', 'banana', 'cherry'],
    sample: 'words.where((w) => w.isNotEmpty).toList()',
    hints: ['Use isNotEmpty property', 'where() keeps elements that return true'],
    tags: ['where', 'filter', 'empty', 'lists'],
  },

  {
    id: 'dart-list-117',
    category: 'List Operations',
    difficulty: 'easy',
    title: 'Fold to Find Minimum',
    text: 'Use `fold` to find the minimum number.',
    setup: 'var numbers = [5, 2, 8, 1, 9];',
    setupCode: 'var numbers = [5, 2, 8, 1, 9];',
    expected: 1,
    sample: 'numbers.fold(numbers.first, (min, n) => n < min ? n : min)',
    hints: ['Compare each element with current minimum', 'Start with the first element'],
    tags: ['fold', 'min', 'lists'],
  },

  {
    id: 'dart-list-118',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Expand to Characters',
    text: 'Use `expand` to split strings into characters.',
    setup: 'var words = ["hi", "bye"];',
    setupCode: 'var words = ["hi", "bye"];',
    expected: ['h', 'i', 'b', 'y', 'e'],
    sample: 'words.expand((w) => w.split("")).toList()',
    hints: ['split("") splits into characters', 'expand() flattens the result'],
    tags: ['expand', 'split', 'characters', 'lists'],
  },

  {
    id: 'dart-list-119',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Find with singleWhere',
    text: 'Use `singleWhere` to find the only even number.',
    setup: 'var numbers = [1, 3, 4, 5, 7];',
    setupCode: 'var numbers = [1, 3, 4, 5, 7];',
    expected: 4,
    sample: 'numbers.singleWhere((n) => n % 2 == 0)',
    hints: ['singleWhere() expects exactly one match', 'Throws if zero or multiple matches'],
    tags: ['singleWhere', 'find', 'unique', 'lists'],
  },

  {
    id: 'dart-list-120',
    category: 'List Operations',
    difficulty: 'medium',
    title: 'Map Objects to Strings',
    text: 'Use `map` to format person objects as strings.',
    setup: 'var people = [{"name": "Alice", "age": 30}, {"name": "Bob", "age": 25}];',
    setupCode: 'var people = [{"name": "Alice", "age": 30}, {"name": "Bob", "age": 25}];',
    expected: ['Alice is 30', 'Bob is 25'],
    sample: 'people.map((p) => "${p["name"]} is ${p["age"]}").toList()',
    hints: ['Access map values with bracket notation', 'Use string interpolation'],
    tags: ['map', 'objects', 'format', 'lists'],
  },

  {
    id: 'dart-list-121',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Fold to Build String',
    text: 'Use `fold` to create a path string from segments.',
    setup: 'var segments = ["home", "user", "documents"];',
    setupCode: 'var segments = ["home", "user", "documents"];',
    expected: '/home/user/documents',
    sample: 'segments.fold("", (path, s) => "$path/$s")',
    hints: ['Start with empty string', 'Add / before each segment'],
    tags: ['fold', 'path', 'join', 'lists'],
  },

  {
    id: 'dart-list-122',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Chain Multiple Operations',
    text: 'Filter, transform, and sort in one chain.',
    setup: 'var numbers = [5, 2, 8, 1, 9, 3];',
    setupCode: 'var numbers = [5, 2, 8, 1, 9, 3];',
    expected: [2, 6, 10, 18],
    sample: 'numbers.where((n) => n > 2).map((n) => n * 2).toList()..sort()',
    hints: ['Chain where(), map(), and sort()', 'Use cascade for sort()'],
    tags: ['where', 'map', 'sort', 'chain', 'lists'],
  },

  {
    id: 'dart-list-123',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Expand with Index',
    text: 'Use `expand` with index to create labeled items.',
    setup: 'var items = ["a", "b"];',
    setupCode: 'var items = ["a", "b"];',
    expected: ['0-a', '1-a', '0-b', '1-b'],
    sample: 'items.expand((item) => [0, 1].map((i) => "$i-$item")).toList()',
    hints: ['Generate indices inside expand', 'Combine index with item'],
    tags: ['expand', 'index', 'label', 'lists'],
  },

  {
    id: 'dart-list-124',
    category: 'List Operations',
    difficulty: 'hard',
    title: 'Fold to Partition',
    text: 'Use `fold` to split numbers into even and odd lists.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6];',
    expected: { even: [2, 4, 6], odd: [1, 3, 5] },
    sample:
      'numbers.fold<Map<String, List<int>>>({"even": [], "odd": []}, (acc, n) { n % 2 == 0 ? acc["even"]!.add(n) : acc["odd"]!.add(n); return acc; })',
    hints: ['Use a Map with two lists', 'Add to appropriate list based on condition'],
    tags: ['fold', 'partition', 'even', 'odd', 'lists'],
  },

  // ============================================================
  // Map Operations (125-149)
  // ============================================================

  {
    id: 'dart-map-125',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Transform Map Values',
    text: 'Use `map` to double all values in the map.',
    setup: 'var prices = {"apple": 1, "banana": 2, "cherry": 3};',
    setupCode: 'var prices = {"apple": 1, "banana": 2, "cherry": 3};',
    expected: { apple: 2, banana: 4, cherry: 6 },
    sample: 'prices.map((k, v) => MapEntry(k, v * 2))',
    hints: ['map() on Map takes key and value', 'Return a MapEntry for each pair'],
    tags: ['map', 'transform', 'values', 'maps'],
  },

  {
    id: 'dart-map-126',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Add Entry with putIfAbsent',
    text: 'Use `putIfAbsent` to add a default value for missing key.',
    setup: 'var scores = {"Alice": 100};',
    setupCode: 'var scores = {"Alice": 100};',
    expected: { Alice: 100, Bob: 0 },
    sample: 'scores.putIfAbsent("Bob", () => 0)',
    hints: ['putIfAbsent only adds if key is missing', 'The value is computed lazily'],
    tags: ['putIfAbsent', 'add', 'default', 'maps'],
  },

  {
    id: 'dart-map-127',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Update Existing Value',
    text: 'Use `update` to increment a score by 10.',
    setup: 'var scores = {"Alice": 90, "Bob": 85};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 85};',
    expected: { Alice: 100, Bob: 85 },
    sample: 'scores.update("Alice", (v) => v + 10)',
    hints: ['update() modifies an existing value', 'Takes key and update function'],
    tags: ['update', 'modify', 'increment', 'maps'],
  },

  {
    id: 'dart-map-128',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Remove Entries with removeWhere',
    text: 'Use `removeWhere` to remove entries with value less than 50.',
    setup: 'var scores = {"Alice": 90, "Bob": 30, "Charlie": 70, "Diana": 40};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 30, "Charlie": 70, "Diana": 40};',
    expected: { Alice: 90, Charlie: 70 },
    sample: 'scores.removeWhere((k, v) => v < 50)',
    hints: ['removeWhere() removes matching entries', 'Takes a predicate with key and value'],
    tags: ['removeWhere', 'filter', 'remove', 'maps'],
  },

  {
    id: 'dart-map-129',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Transform Keys to Uppercase',
    text: 'Use `map` to convert all keys to uppercase.',
    setup: 'var data = {"name": "Alice", "city": "NYC"};',
    setupCode: 'var data = {"name": "Alice", "city": "NYC"};',
    expected: { NAME: 'Alice', CITY: 'NYC' },
    sample: 'data.map((k, v) => MapEntry(k.toUpperCase(), v))',
    hints: ['Transform the key in MapEntry', 'Keep the value unchanged'],
    tags: ['map', 'keys', 'uppercase', 'maps'],
  },

  {
    id: 'dart-map-130',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Update with ifAbsent',
    text: 'Use `update` with ifAbsent to increment or initialize.',
    setup: 'var counts = {"a": 5};',
    setupCode: 'var counts = {"a": 5};',
    expected: { a: 5, b: 1 },
    sample: 'counts.update("b", (v) => v + 1, ifAbsent: () => 1)',
    hints: ['ifAbsent handles missing keys', 'Increment if exists, initialize if not'],
    tags: ['update', 'ifAbsent', 'initialize', 'maps'],
  },

  {
    id: 'dart-map-131',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Filter Map by Key',
    text: 'Keep only entries where key starts with "a".',
    setup: 'var data = {"apple": 1, "banana": 2, "apricot": 3, "cherry": 4};',
    setupCode: 'var data = {"apple": 1, "banana": 2, "apricot": 3, "cherry": 4};',
    expected: { apple: 1, apricot: 3 },
    sample: 'Map.fromEntries(data.entries.where((e) => e.key.startsWith("a")))',
    hints: ['Use entries.where() to filter', 'Convert back with Map.fromEntries()'],
    tags: ['filter', 'entries', 'where', 'maps'],
  },

  {
    id: 'dart-map-132',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Merge Two Maps',
    text: 'Merge two maps, with second map values taking precedence.',
    setup: 'var map1 = {"a": 1, "b": 2};\nvar map2 = {"b": 3, "c": 4};',
    setupCode: 'var map1 = {"a": 1, "b": 2};\nvar map2 = {"b": 3, "c": 4};',
    expected: { a: 1, b: 3, c: 4 },
    sample: '{...map1, ...map2}',
    hints: ['Use spread operator to merge', 'Later values override earlier ones'],
    tags: ['merge', 'spread', 'combine', 'maps'],
  },

  {
    id: 'dart-map-133',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'removeWhere by Key Length',
    text: 'Remove entries where key has more than 4 characters.',
    setup: 'var data = {"cat": 1, "elephant": 2, "dog": 3, "butterfly": 4};',
    setupCode: 'var data = {"cat": 1, "elephant": 2, "dog": 3, "butterfly": 4};',
    expected: { cat: 1, dog: 3 },
    sample: 'data.removeWhere((k, v) => k.length > 4)',
    hints: ['Check key length in predicate', 'removeWhere modifies in place'],
    tags: ['removeWhere', 'length', 'filter', 'maps'],
  },

  {
    id: 'dart-map-134',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Invert Map',
    text: 'Swap keys and values in the map.',
    setup: 'var grades = {"A": 90, "B": 80, "C": 70};',
    setupCode: 'var grades = {"A": 90, "B": 80, "C": 70};',
    expected: { 90: 'A', 80: 'B', 70: 'C' },
    sample: 'grades.map((k, v) => MapEntry(v, k))',
    hints: ['Swap key and value in MapEntry', 'Works when values are unique'],
    tags: ['map', 'invert', 'swap', 'maps'],
  },

  {
    id: 'dart-map-135',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Update All Values',
    text: 'Use `updateAll` to apply a discount of 10% to all prices.',
    setup: 'var prices = {"apple": 100, "banana": 50, "cherry": 80};',
    setupCode: 'var prices = {"apple": 100, "banana": 50, "cherry": 80};',
    expected: { apple: 90, banana: 45, cherry: 72 },
    sample: 'prices.updateAll((k, v) => (v * 0.9).toInt())',
    hints: ['updateAll() modifies all values', 'Apply discount calculation to each'],
    tags: ['updateAll', 'discount', 'transform', 'maps'],
  },

  {
    id: 'dart-map-136',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Group List to Map',
    text: 'Group words by their first letter.',
    setup: 'var words = ["apple", "ant", "banana", "bear", "cat"];',
    setupCode: 'var words = ["apple", "ant", "banana", "bear", "cat"];',
    expected: { a: ['apple', 'ant'], b: ['banana', 'bear'], c: ['cat'] },
    sample:
      'words.fold<Map<String, List<String>>>({}, (map, w) { (map[w[0]] ??= []).add(w); return map; })',
    hints: ['Use fold with a Map', 'Initialize list if key is missing'],
    tags: ['fold', 'group', 'categorize', 'maps'],
  },

  {
    id: 'dart-map-137',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Check Key Existence',
    text: 'Check if map contains the key "email".',
    setup: 'var user = {"name": "Alice", "age": 30};',
    setupCode: 'var user = {"name": "Alice", "age": 30};',
    expected: false,
    sample: 'user.containsKey("email")',
    hints: ['containsKey() returns a bool', 'Does not check for value'],
    tags: ['containsKey', 'check', 'existence', 'maps'],
  },

  {
    id: 'dart-map-138',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Get Value with Default',
    text: 'Get the value for "country" or return "Unknown".',
    setup: 'var user = {"name": "Alice", "city": "NYC"};',
    setupCode: 'var user = {"name": "Alice", "city": "NYC"};',
    expected: 'Unknown',
    sample: 'user["country"] ?? "Unknown"',
    hints: ['Use ?? for null-coalescing', 'Map access returns null for missing keys'],
    tags: ['access', 'default', 'null-coalescing', 'maps'],
  },

  {
    id: 'dart-map-139',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Map Values to List',
    text: 'Extract all values and sort them.',
    setup: 'var scores = {"Alice": 85, "Bob": 92, "Charlie": 78};',
    setupCode: 'var scores = {"Alice": 85, "Bob": 92, "Charlie": 78};',
    expected: [78, 85, 92],
    sample: 'scores.values.toList()..sort()',
    hints: ['values returns an Iterable', 'Use cascade for sort()'],
    tags: ['values', 'sort', 'extract', 'maps'],
  },

  {
    id: 'dart-map-140',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Filter by Value Type',
    text: 'Keep only entries with integer values.',
    setup: 'var data = {"a": 1, "b": "hello", "c": 3, "d": true};',
    setupCode: 'var data = {"a": 1, "b": "hello", "c": 3, "d": true};',
    expected: { a: 1, c: 3 },
    sample: 'Map.fromEntries(data.entries.where((e) => e.value is int))',
    hints: ['Use is for type checking', 'Filter entries then convert back'],
    tags: ['filter', 'type', 'entries', 'maps'],
  },

  {
    id: 'dart-map-141',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Nested Map Access',
    text: 'Safely access nested value with null-aware operators.',
    setup: 'var user = {"profile": {"address": {"city": "NYC"}}};',
    setupCode: 'var user = {"profile": {"address": {"city": "NYC"}}};',
    expected: 'NYC',
    sample: '(user["profile"] as Map?)?["address"]?["city"]',
    hints: ['Use ?[] for safe nested access', 'Cast to Map? for nullable access'],
    tags: ['nested', 'null-aware', 'access', 'maps'],
  },

  {
    id: 'dart-map-142',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Compute Sum of Values',
    text: 'Calculate the sum of all numeric values.',
    setup: 'var data = {"a": 10, "b": 20, "c": 30};',
    setupCode: 'var data = {"a": 10, "b": 20, "c": 30};',
    expected: 60,
    sample: 'data.values.fold(0, (sum, v) => sum + v)',
    hints: ['Use values to get all values', 'fold to accumulate sum'],
    tags: ['values', 'fold', 'sum', 'maps'],
  },

  {
    id: 'dart-map-143',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Clear All Entries',
    text: 'Remove all entries from the map.',
    setup: 'var data = {"a": 1, "b": 2, "c": 3};',
    setupCode: 'var data = {"a": 1, "b": 2, "c": 3};',
    expected: {},
    sample: 'data.clear()',
    hints: ['clear() removes all entries', 'Modifies the map in place'],
    tags: ['clear', 'remove', 'empty', 'maps'],
  },

  {
    id: 'dart-map-144',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Add All from Another Map',
    text: 'Add all entries from another map.',
    setup: 'var map1 = {"a": 1};\nvar map2 = {"b": 2, "c": 3};',
    setupCode: 'var map1 = {"a": 1};\nvar map2 = {"b": 2, "c": 3};',
    expected: { a: 1, b: 2, c: 3 },
    sample: 'map1.addAll(map2)',
    hints: ['addAll() adds entries from another map', 'Modifies map1 in place'],
    tags: ['addAll', 'merge', 'combine', 'maps'],
  },

  {
    id: 'dart-map-145',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Transform to Entry List',
    text: 'Convert map to list of formatted strings.',
    setup: 'var scores = {"Alice": 90, "Bob": 85};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 85};',
    expected: ['Alice: 90', 'Bob: 85'],
    sample: 'scores.entries.map((e) => "${e.key}: ${e.value}").toList()',
    hints: ['Use entries to iterate', 'map() to format each entry'],
    tags: ['entries', 'transform', 'format', 'maps'],
  },

  {
    id: 'dart-map-146',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Find Max Value Entry',
    text: 'Find the entry with the highest value.',
    setup: 'var scores = {"Alice": 85, "Bob": 92, "Charlie": 78};',
    setupCode: 'var scores = {"Alice": 85, "Bob": 92, "Charlie": 78};',
    expected: ['Bob', 92],
    sample:
      'scores.entries.reduce((a, b) => a.value > b.value ? a : b).let((e) => [e.key, e.value])',
    hints: ['Use reduce to find max', 'Compare values in comparator'],
    tags: ['reduce', 'max', 'entries', 'maps'],
  },

  {
    id: 'dart-map-147',
    category: 'Map Operations',
    difficulty: 'hard',
    title: 'Count Values by Condition',
    text: 'Count how many values are greater than 50.',
    setup: 'var scores = {"Alice": 85, "Bob": 42, "Charlie": 78, "Diana": 30};',
    setupCode: 'var scores = {"Alice": 85, "Bob": 42, "Charlie": 78, "Diana": 30};',
    expected: 2,
    sample: 'scores.values.where((v) => v > 50).length',
    hints: ['Filter values first', 'Count with length'],
    tags: ['values', 'where', 'count', 'maps'],
  },

  {
    id: 'dart-map-148',
    category: 'Map Operations',
    difficulty: 'easy',
    title: 'Get Map Length',
    text: 'Get the number of entries in the map.',
    setup: 'var data = {"a": 1, "b": 2, "c": 3, "d": 4};',
    setupCode: 'var data = {"a": 1, "b": 2, "c": 3, "d": 4};',
    expected: 4,
    sample: 'data.length',
    hints: ['length is a property', 'Returns number of key-value pairs'],
    tags: ['length', 'count', 'size', 'maps'],
  },

  {
    id: 'dart-map-149',
    category: 'Map Operations',
    difficulty: 'medium',
    title: 'Check if Map is Empty',
    text: 'Check if the map has no entries.',
    setup: 'var data = <String, int>{};',
    setupCode: 'var data = <String, int>{};',
    expected: true,
    sample: 'data.isEmpty',
    hints: ['isEmpty is a property', 'Returns true if length is 0'],
    tags: ['isEmpty', 'check', 'empty', 'maps'],
  },

  // ============================================================
  // Set Operations (150-174)
  // ============================================================

  {
    id: 'dart-set-150',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Create Union of Sets',
    text: 'Use `union` to combine two sets.',
    setup: 'var set1 = {1, 2, 3};\nvar set2 = {3, 4, 5};',
    setupCode: 'var set1 = {1, 2, 3};\nvar set2 = {3, 4, 5};',
    expected: [1, 2, 3, 4, 5],
    sample: 'set1.union(set2)',
    hints: ['union() combines all unique elements', 'Duplicates are removed'],
    tags: ['union', 'combine', 'sets'],
  },

  {
    id: 'dart-set-151',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Find Intersection',
    text: 'Use `intersection` to find common elements.',
    setup: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    setupCode: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5, 6};',
    expected: [3, 4],
    sample: 'set1.intersection(set2)',
    hints: ['intersection() returns elements in both sets', 'Returns a new Set'],
    tags: ['intersection', 'common', 'sets'],
  },

  {
    id: 'dart-set-152',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Find Difference',
    text: 'Use `difference` to find elements only in first set.',
    setup: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5};',
    setupCode: 'var set1 = {1, 2, 3, 4};\nvar set2 = {3, 4, 5};',
    expected: [1, 2],
    sample: 'set1.difference(set2)',
    hints: ['difference() returns elements in first but not second', 'Order matters'],
    tags: ['difference', 'subtract', 'sets'],
  },

  {
    id: 'dart-set-153',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Check Contains',
    text: 'Check if set contains a specific element.',
    setup: 'var numbers = {10, 20, 30, 40, 50};',
    setupCode: 'var numbers = {10, 20, 30, 40, 50};',
    expected: true,
    sample: 'numbers.contains(30)',
    hints: ['contains() returns a bool', 'O(1) lookup time'],
    tags: ['contains', 'check', 'sets'],
  },

  {
    id: 'dart-set-154',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Check Contains All',
    text: 'Check if set contains all elements from a list.',
    setup: 'var numbers = {1, 2, 3, 4, 5};',
    setupCode: 'var numbers = {1, 2, 3, 4, 5};',
    expected: true,
    sample: 'numbers.containsAll([1, 3, 5])',
    hints: ['containsAll() checks multiple elements', 'All must be present to return true'],
    tags: ['containsAll', 'check', 'sets'],
  },

  {
    id: 'dart-set-155',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Symmetric Difference',
    text: 'Find elements in either set but not both.',
    setup: 'var set1 = {1, 2, 3};\nvar set2 = {2, 3, 4};',
    setupCode: 'var set1 = {1, 2, 3};\nvar set2 = {2, 3, 4};',
    expected: [1, 4],
    sample: 'set1.difference(set2).union(set2.difference(set1))',
    hints: ['Combine two differences', 'Elements exclusive to each set'],
    tags: ['difference', 'union', 'symmetric', 'sets'],
  },

  {
    id: 'dart-set-156',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Filter Set Elements',
    text: 'Use `where` to keep only elements divisible by 3.',
    setup: 'var numbers = {1, 3, 6, 7, 9, 12, 15};',
    setupCode: 'var numbers = {1, 3, 6, 7, 9, 12, 15};',
    expected: [3, 6, 9, 12, 15],
    sample: 'numbers.where((n) => n % 3 == 0).toSet()',
    hints: ['where() works on Sets', 'Convert result back to Set'],
    tags: ['where', 'filter', 'modulo', 'sets'],
  },

  {
    id: 'dart-set-157',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Map Set Elements',
    text: 'Use `map` to square all elements.',
    setup: 'var numbers = {1, 2, 3, 4};',
    setupCode: 'var numbers = {1, 2, 3, 4};',
    expected: [1, 4, 9, 16],
    sample: 'numbers.map((n) => n * n).toSet()',
    hints: ['map() transforms each element', 'Duplicates removed automatically'],
    tags: ['map', 'transform', 'square', 'sets'],
  },

  {
    id: 'dart-set-158',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Remove If Condition',
    text: 'Use `removeWhere` to remove all odd numbers.',
    setup: 'var numbers = {1, 2, 3, 4, 5, 6};',
    setupCode: 'var numbers = {1, 2, 3, 4, 5, 6};',
    expected: [2, 4, 6],
    sample: 'numbers.removeWhere((n) => n % 2 != 0)',
    hints: ['removeWhere() modifies in place', 'Returns void, not the set'],
    tags: ['removeWhere', 'filter', 'remove', 'sets'],
  },

  {
    id: 'dart-set-159',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Retain Only Matching',
    text: 'Use `retainWhere` to keep only values less than 5.',
    setup: 'var numbers = {1, 3, 5, 7, 9, 2, 4};',
    setupCode: 'var numbers = {1, 3, 5, 7, 9, 2, 4};',
    expected: [1, 3, 2, 4],
    sample: 'numbers.retainWhere((n) => n < 5)',
    hints: ['retainWhere() keeps matching elements', 'Opposite of removeWhere'],
    tags: ['retainWhere', 'filter', 'keep', 'sets'],
  },

  {
    id: 'dart-set-160',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Check Subset',
    text: 'Check if one set is a subset of another.',
    setup: 'var small = {1, 2};\nvar large = {1, 2, 3, 4, 5};',
    setupCode: 'var small = {1, 2};\nvar large = {1, 2, 3, 4, 5};',
    expected: true,
    sample: 'small.difference(large).isEmpty',
    hints: ['Subset has no elements outside superset', 'difference() shows extra elements'],
    tags: ['subset', 'difference', 'check', 'sets'],
  },

  {
    id: 'dart-set-161',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Find Unique in Multiple Sets',
    text: 'Find elements that appear in exactly one set.',
    setup: 'var a = {1, 2, 3};\nvar b = {2, 3, 4};\nvar c = {3, 4, 5};',
    setupCode: 'var a = {1, 2, 3};\nvar b = {2, 3, 4};\nvar c = {3, 4, 5};',
    expected: [1, 5],
    sample:
      'a.union(b).union(c).where((e) => [a.contains(e), b.contains(e), c.contains(e)].where((x) => x).length == 1).toSet()',
    hints: ['Union all sets', 'Count appearances of each element'],
    tags: ['union', 'unique', 'count', 'sets'],
  },

  {
    id: 'dart-set-162',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Set from Map Keys',
    text: 'Create a set from map keys filtered by value.',
    setup: 'var scores = {"Alice": 90, "Bob": 45, "Charlie": 80, "Diana": 30};',
    setupCode: 'var scores = {"Alice": 90, "Bob": 45, "Charlie": 80, "Diana": 30};',
    expected: ['Alice', 'Charlie'],
    sample: 'scores.entries.where((e) => e.value >= 60).map((e) => e.key).toSet()',
    hints: ['Filter entries by value', 'Extract keys to set'],
    tags: ['entries', 'filter', 'keys', 'sets'],
  },

  {
    id: 'dart-set-163',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Add Element to Set',
    text: 'Add a new element to the set.',
    setup: 'var fruits = {"apple", "banana"};',
    setupCode: 'var fruits = {"apple", "banana"};',
    expected: ['apple', 'banana', 'cherry'],
    sample: 'fruits.add("cherry")',
    hints: ['add() adds a single element', 'Returns true if added, false if existed'],
    tags: ['add', 'insert', 'sets'],
  },

  {
    id: 'dart-set-164',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Add Multiple Elements',
    text: 'Add multiple elements using addAll.',
    setup: 'var numbers = {1, 2};',
    setupCode: 'var numbers = {1, 2};',
    expected: [1, 2, 3, 4, 5],
    sample: 'numbers.addAll([3, 4, 5])',
    hints: ['addAll() accepts any Iterable', 'Duplicates ignored'],
    tags: ['addAll', 'insert', 'sets'],
  },

  {
    id: 'dart-set-165',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Convert List to Unique Set',
    text: 'Remove duplicates from list by converting to set.',
    setup: 'var items = [1, 2, 2, 3, 3, 3, 4];',
    setupCode: 'var items = [1, 2, 2, 3, 3, 3, 4];',
    expected: [1, 2, 3, 4],
    sample: 'items.toSet().toList()',
    hints: ['toSet() removes duplicates', 'Convert back to list if needed'],
    tags: ['toSet', 'unique', 'deduplicate', 'sets'],
  },

  {
    id: 'dart-set-166',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Fold Set to Sum',
    text: 'Calculate sum of all elements using fold.',
    setup: 'var numbers = {10, 20, 30, 40};',
    setupCode: 'var numbers = {10, 20, 30, 40};',
    expected: 100,
    sample: 'numbers.fold(0, (sum, n) => sum + n)',
    hints: ['fold() works on Sets', 'Start with 0 for sum'],
    tags: ['fold', 'sum', 'accumulate', 'sets'],
  },

  {
    id: 'dart-set-167',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Check Set Equality',
    text: 'Check if two sets contain the same elements.',
    setup: 'var set1 = {1, 2, 3};\nvar set2 = {3, 2, 1};',
    setupCode: 'var set1 = {1, 2, 3};\nvar set2 = {3, 2, 1};',
    expected: true,
    sample: 'set1.difference(set2).isEmpty && set2.difference(set1).isEmpty',
    hints: ['Sets with same elements are equal', 'Check both directions'],
    tags: ['equality', 'difference', 'compare', 'sets'],
  },

  {
    id: 'dart-set-168',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Power Set Generation',
    text: 'Generate all subsets of a set (simplified for small sets).',
    setup: 'var set1 = {1, 2};',
    setupCode: 'var set1 = {1, 2};',
    expected: [[], [1], [2], [1, 2]],
    sample: 'set1.fold<List<Set<int>>>([{}], (acc, e) => [...acc, ...acc.map((s) => {...s, e})])',
    hints: ['Build subsets incrementally', 'Each element doubles possibilities'],
    tags: ['powerset', 'subsets', 'fold', 'sets'],
  },

  {
    id: 'dart-set-169',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Intersection of Multiple Sets',
    text: 'Find elements common to all three sets.',
    setup: 'var a = {1, 2, 3, 4};\nvar b = {2, 3, 4, 5};\nvar c = {3, 4, 5, 6};',
    setupCode: 'var a = {1, 2, 3, 4};\nvar b = {2, 3, 4, 5};\nvar c = {3, 4, 5, 6};',
    expected: [3, 4],
    sample: 'a.intersection(b).intersection(c)',
    hints: ['Chain intersection calls', 'Each intersection narrows the result'],
    tags: ['intersection', 'multiple', 'common', 'sets'],
  },

  {
    id: 'dart-set-170',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Remove Element from Set',
    text: 'Remove an element from the set.',
    setup: 'var colors = {"red", "green", "blue"};',
    setupCode: 'var colors = {"red", "green", "blue"};',
    expected: ['red', 'blue'],
    sample: 'colors.remove("green")',
    hints: ['remove() removes a single element', 'Returns true if removed'],
    tags: ['remove', 'delete', 'sets'],
  },

  {
    id: 'dart-set-171',
    category: 'Set Operations',
    difficulty: 'easy',
    title: 'Clear Set',
    text: 'Remove all elements from the set.',
    setup: 'var data = {1, 2, 3, 4, 5};',
    setupCode: 'var data = {1, 2, 3, 4, 5};',
    expected: [],
    sample: 'data.clear()',
    hints: ['clear() removes all elements', 'Set becomes empty'],
    tags: ['clear', 'empty', 'sets'],
  },

  {
    id: 'dart-set-172',
    category: 'Set Operations',
    difficulty: 'medium',
    title: 'Set First and Last',
    text: 'Get first and last elements of a sorted set.',
    setup: 'var numbers = {5, 2, 8, 1, 9};',
    setupCode: 'var numbers = {5, 2, 8, 1, 9};',
    expected: [1, 9],
    sample: '[(numbers.toList()..sort()).first, (numbers.toList()..sort()).last]',
    hints: ['Set order is not guaranteed', 'Sort to get min/max'],
    tags: ['first', 'last', 'sort', 'sets'],
  },

  {
    id: 'dart-set-173',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Union of Set List',
    text: 'Find union of all sets in a list.',
    setup: 'var sets = [{1, 2}, {2, 3}, {3, 4}];',
    setupCode: 'var sets = [{1, 2}, {2, 3}, {3, 4}];',
    expected: [1, 2, 3, 4],
    sample: 'sets.fold<Set<int>>({}, (acc, s) => acc.union(s))',
    hints: ['Use fold to combine', 'Union each set with accumulator'],
    tags: ['union', 'fold', 'combine', 'sets'],
  },

  {
    id: 'dart-set-174',
    category: 'Set Operations',
    difficulty: 'hard',
    title: 'Partition Set',
    text: 'Split set into two based on condition.',
    setup: 'var numbers = {1, 2, 3, 4, 5, 6, 7, 8};',
    setupCode: 'var numbers = {1, 2, 3, 4, 5, 6, 7, 8};',
    expected: { even: [2, 4, 6, 8], odd: [1, 3, 5, 7] },
    sample:
      '{"even": numbers.where((n) => n % 2 == 0).toSet(), "odd": numbers.where((n) => n % 2 != 0).toSet()}',
    hints: ['Use where() twice', 'One for each partition'],
    tags: ['partition', 'where', 'filter', 'sets'],
  },

  // ============================================================
  // String Methods (175-199)
  // ============================================================

  {
    id: 'dart-string-175',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Split by Space',
    text: 'Use `split` to break string into words.',
    setup: 'var sentence = "Hello world from Dart";',
    setupCode: 'var sentence = "Hello world from Dart";',
    expected: ['Hello', 'world', 'from', 'Dart'],
    sample: 'sentence.split(" ")',
    hints: ['split() divides string by delimiter', 'Returns a List<String>'],
    tags: ['split', 'words', 'strings'],
  },

  {
    id: 'dart-string-176',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Replace All Occurrences',
    text: 'Use `replaceAll` to replace all spaces with dashes.',
    setup: 'var text = "hello world dart";',
    setupCode: 'var text = "hello world dart";',
    expected: 'hello-world-dart',
    sample: 'text.replaceAll(" ", "-")',
    hints: ['replaceAll() replaces every occurrence', 'Returns new string'],
    tags: ['replaceAll', 'replace', 'strings'],
  },

  {
    id: 'dart-string-177',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Check String Contains',
    text: 'Check if string contains the word "Dart".',
    setup: 'var text = "I love Dart programming";',
    setupCode: 'var text = "I love Dart programming";',
    expected: true,
    sample: 'text.contains("Dart")',
    hints: ['contains() is case-sensitive', 'Returns bool'],
    tags: ['contains', 'search', 'strings'],
  },

  {
    id: 'dart-string-178',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Extract Substring',
    text: 'Use `substring` to extract characters from index 0 to 5.',
    setup: 'var text = "Hello, World!";',
    setupCode: 'var text = "Hello, World!";',
    expected: 'Hello',
    sample: 'text.substring(0, 5)',
    hints: ['substring(start, end) - end is exclusive', 'Indices are 0-based'],
    tags: ['substring', 'extract', 'strings'],
  },

  {
    id: 'dart-string-179',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Split and Join',
    text: 'Split by comma, trim each, and rejoin with semicolon.',
    setup: 'var csv = "apple , banana , cherry";',
    setupCode: 'var csv = "apple , banana , cherry";',
    expected: 'apple;banana;cherry',
    sample: 'csv.split(",").map((s) => s.trim()).join(";")',
    hints: ['Chain split, map, and join', 'trim() removes whitespace'],
    tags: ['split', 'join', 'trim', 'strings'],
  },

  {
    id: 'dart-string-180',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Replace with Regex',
    text: 'Remove all digits from string using regex.',
    setup: 'var text = "abc123def456";',
    setupCode: 'var text = "abc123def456";',
    expected: 'abcdef',
    sample: 'text.replaceAll(RegExp(r"\\d"), "")',
    hints: ['Use RegExp for patterns', '\\d matches digits'],
    tags: ['replaceAll', 'regex', 'strings'],
  },

  {
    id: 'dart-string-181',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Contains with Regex',
    text: 'Check if string contains any digit.',
    setup: 'var text = "hello123";',
    setupCode: 'var text = "hello123";',
    expected: true,
    sample: 'text.contains(RegExp(r"\\d"))',
    hints: ['contains() accepts RegExp', '\\d matches any digit'],
    tags: ['contains', 'regex', 'strings'],
  },

  {
    id: 'dart-string-182',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Substring from End',
    text: 'Get the last 5 characters of the string.',
    setup: 'var text = "Hello, World!";',
    setupCode: 'var text = "Hello, World!";',
    expected: 'orld!',
    sample: 'text.substring(text.length - 5)',
    hints: ['Calculate start from length', 'Omit end for rest of string'],
    tags: ['substring', 'end', 'strings'],
  },

  {
    id: 'dart-string-183',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Split by Multiple Delimiters',
    text: 'Split string by comma, semicolon, or space.',
    setup: 'var text = "a,b;c d";',
    setupCode: 'var text = "a,b;c d";',
    expected: ['a', 'b', 'c', 'd'],
    sample: 'text.split(RegExp(r"[,;\\s]+"))',
    hints: ['Use character class in regex', '+ for one or more'],
    tags: ['split', 'regex', 'delimiters', 'strings'],
  },

  {
    id: 'dart-string-184',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Replace First Only',
    text: 'Replace only the first occurrence of "a" with "X".',
    setup: 'var text = "abracadabra";',
    setupCode: 'var text = "abracadabra";',
    expected: 'Xbracadabra',
    sample: 'text.replaceFirst("a", "X")',
    hints: ['replaceFirst() replaces only first match', 'Different from replaceAll'],
    tags: ['replaceFirst', 'replace', 'strings'],
  },

  {
    id: 'dart-string-185',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'String Starts With',
    text: 'Check if string starts with "Hello".',
    setup: 'var text = "Hello, World!";',
    setupCode: 'var text = "Hello, World!";',
    expected: true,
    sample: 'text.startsWith("Hello")',
    hints: ['startsWith() checks prefix', 'Case-sensitive'],
    tags: ['startsWith', 'prefix', 'strings'],
  },

  {
    id: 'dart-string-186',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'String Ends With',
    text: 'Check if filename ends with ".dart".',
    setup: 'var filename = "main.dart";',
    setupCode: 'var filename = "main.dart";',
    expected: true,
    sample: 'filename.endsWith(".dart")',
    hints: ['endsWith() checks suffix', 'Useful for extensions'],
    tags: ['endsWith', 'suffix', 'strings'],
  },

  {
    id: 'dart-string-187',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Pad String',
    text: 'Pad number string to width 6 with leading zeros.',
    setup: 'var num = "42";',
    setupCode: 'var num = "42";',
    expected: '000042',
    sample: 'num.padLeft(6, "0")',
    hints: ['padLeft() adds characters to left', 'Second arg is pad character'],
    tags: ['padLeft', 'format', 'strings'],
  },

  {
    id: 'dart-string-188',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Center String',
    text: 'Center text in 10 character width with dashes.',
    setup: 'var text = "hi";',
    setupCode: 'var text = "hi";',
    expected: '----hi----',
    sample: 'text.padLeft((10 + text.length) ~/ 2, "-").padRight(10, "-")',
    hints: ['Combine padLeft and padRight', 'Calculate left padding first'],
    tags: ['padLeft', 'padRight', 'center', 'strings'],
  },

  {
    id: 'dart-string-189',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Extract Between Delimiters',
    text: 'Extract text between square brackets.',
    setup: 'var text = "Hello [World] from Dart";',
    setupCode: 'var text = "Hello [World] from Dart";',
    expected: 'World',
    sample: 'text.substring(text.indexOf("[") + 1, text.indexOf("]"))',
    hints: ['Use indexOf to find positions', 'substring extracts between'],
    tags: ['substring', 'indexOf', 'extract', 'strings'],
  },

  {
    id: 'dart-string-190',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Count Occurrences',
    text: 'Count how many times "a" appears in string.',
    setup: 'var text = "abracadabra";',
    setupCode: 'var text = "abracadabra";',
    expected: 5,
    sample: 'text.split("a").length - 1',
    hints: ['Split creates n+1 parts for n occurrences', 'Subtract 1 from length'],
    tags: ['split', 'count', 'occurrences', 'strings'],
  },

  {
    id: 'dart-string-191',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Trim Whitespace',
    text: 'Remove leading and trailing whitespace.',
    setup: 'var text = "   hello world   ";',
    setupCode: 'var text = "   hello world   ";',
    expected: 'hello world',
    sample: 'text.trim()',
    hints: ['trim() removes both ends', 'Does not affect middle spaces'],
    tags: ['trim', 'whitespace', 'strings'],
  },

  {
    id: 'dart-string-192',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'Check Empty String',
    text: 'Check if string is empty.',
    setup: 'var text = "";',
    setupCode: 'var text = "";',
    expected: true,
    sample: 'text.isEmpty',
    hints: ['isEmpty is a property', 'Same as length == 0'],
    tags: ['isEmpty', 'check', 'strings'],
  },

  {
    id: 'dart-string-193',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Split into Lines',
    text: 'Split multi-line string into lines.',
    setup: 'var text = "line1\\nline2\\nline3";',
    setupCode: 'var text = "line1\\nline2\\nline3";',
    expected: ['line1', 'line2', 'line3'],
    sample: 'text.split("\\n")',
    hints: ['\\n is newline character', 'split() works with escape sequences'],
    tags: ['split', 'lines', 'newline', 'strings'],
  },

  {
    id: 'dart-string-194',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Index of Substring',
    text: 'Find the starting index of "world".',
    setup: 'var text = "Hello world";',
    setupCode: 'var text = "Hello world";',
    expected: 6,
    sample: 'text.indexOf("world")',
    hints: ['indexOf() returns -1 if not found', 'First occurrence only'],
    tags: ['indexOf', 'position', 'strings'],
  },

  {
    id: 'dart-string-195',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Find All Indices',
    text: 'Find all indices where "a" appears.',
    setup: 'var text = "abracadabra";',
    setupCode: 'var text = "abracadabra";',
    expected: [0, 3, 5, 7, 10],
    sample: '[for (var i = 0; i < text.length; i++) if (text[i] == "a") i]',
    hints: ['Use collection for with condition', 'Check each character'],
    tags: ['indexOf', 'all', 'collection-for', 'strings'],
  },

  {
    id: 'dart-string-196',
    category: 'String Methods',
    difficulty: 'easy',
    title: 'String Multiplication',
    text: 'Repeat string 3 times.',
    setup: 'var text = "abc";',
    setupCode: 'var text = "abc";',
    expected: 'abcabcabc',
    sample: 'text * 3',
    hints: ['Dart supports string multiplication', 'Similar to Python'],
    tags: ['multiply', 'repeat', 'strings'],
  },

  {
    id: 'dart-string-197',
    category: 'String Methods',
    difficulty: 'medium',
    title: 'Reverse String',
    text: 'Reverse the characters in a string.',
    setup: 'var text = "hello";',
    setupCode: 'var text = "hello";',
    expected: 'olleh',
    sample: 'text.split("").reversed.join("")',
    hints: ['Split to characters', 'Reverse and rejoin'],
    tags: ['reverse', 'split', 'join', 'strings'],
  },

  {
    id: 'dart-string-198',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Title Case',
    text: 'Convert each word to title case.',
    setup: 'var text = "hello world dart";',
    setupCode: 'var text = "hello world dart";',
    expected: 'Hello World Dart',
    sample: 'text.split(" ").map((w) => w[0].toUpperCase() + w.substring(1)).join(" ")',
    hints: ['Split into words', 'Capitalize first letter of each'],
    tags: ['title', 'capitalize', 'strings'],
  },

  {
    id: 'dart-string-199',
    category: 'String Methods',
    difficulty: 'hard',
    title: 'Camel to Snake Case',
    text: 'Convert camelCase to snake_case.',
    setup: 'var text = "helloWorldDart";',
    setupCode: 'var text = "helloWorldDart";',
    expected: 'hello_world_dart',
    sample: 'text.replaceAllMapped(RegExp(r"[A-Z]"), (m) => "_${m[0]!.toLowerCase()}")',
    hints: ['Use replaceAllMapped with regex', 'Insert underscore before capitals'],
    tags: ['replaceAllMapped', 'case', 'regex', 'strings'],
  },

  // ============================================================
  // Iterable Extensions (200-224)
  // ============================================================

  {
    id: 'dart-iter-200',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Skip First Elements',
    text: 'Use `skip` to skip the first 3 elements.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    expected: [4, 5, 6, 7],
    sample: 'numbers.skip(3).toList()',
    hints: ['skip() returns an Iterable', 'Skips exactly n elements'],
    tags: ['skip', 'slice', 'iterables'],
  },

  {
    id: 'dart-iter-201',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Take First Elements',
    text: 'Use `take` to take only the first 4 elements.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 7];',
    expected: [1, 2, 3, 4],
    sample: 'numbers.take(4).toList()',
    hints: ['take() returns an Iterable', 'Takes at most n elements'],
    tags: ['take', 'slice', 'iterables'],
  },

  {
    id: 'dart-iter-202',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Expand to Pairs',
    text: 'Use `expand` to create value pairs.',
    setup: 'var letters = ["a", "b", "c"];',
    setupCode: 'var letters = ["a", "b", "c"];',
    expected: ['a', 'A', 'b', 'B', 'c', 'C'],
    sample: 'letters.expand((l) => [l, l.toUpperCase()]).toList()',
    hints: ['expand() flattens the result', 'Return multiple elements per input'],
    tags: ['expand', 'pairs', 'iterables'],
  },

  {
    id: 'dart-iter-203',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Follow By Another Iterable',
    text: 'Use `followedBy` to append another list.',
    setup: 'var first = [1, 2, 3];\nvar second = [4, 5, 6];',
    setupCode: 'var first = [1, 2, 3];\nvar second = [4, 5, 6];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'first.followedBy(second).toList()',
    hints: ['followedBy() concatenates iterables', 'Lazy evaluation'],
    tags: ['followedBy', 'concat', 'iterables'],
  },

  {
    id: 'dart-iter-204',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Skip While Condition',
    text: 'Use `skipWhile` to skip while values are less than 5.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6, 3, 2, 1];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6, 3, 2, 1];',
    expected: [5, 6, 3, 2, 1],
    sample: 'numbers.skipWhile((n) => n < 5).toList()',
    hints: ['skipWhile() stops skipping at first false', 'Does not skip later matches'],
    tags: ['skipWhile', 'condition', 'iterables'],
  },

  {
    id: 'dart-iter-205',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Take While Condition',
    text: 'Use `takeWhile` to take while values are positive.',
    setup: 'var numbers = [1, 2, 3, -1, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, -1, 4, 5];',
    expected: [1, 2, 3],
    sample: 'numbers.takeWhile((n) => n > 0).toList()',
    hints: ['takeWhile() stops at first false', 'Does not include later matches'],
    tags: ['takeWhile', 'condition', 'iterables'],
  },

  {
    id: 'dart-iter-206',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Expand with Range',
    text: 'Use `expand` to repeat each number n times.',
    setup: 'var numbers = [1, 2, 3];',
    setupCode: 'var numbers = [1, 2, 3];',
    expected: [1, 2, 2, 3, 3, 3],
    sample: 'numbers.expand((n) => List.filled(n, n)).toList()',
    hints: ['List.filled creates repeated values', 'expand() flattens results'],
    tags: ['expand', 'repeat', 'iterables'],
  },

  {
    id: 'dart-iter-207',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Chain Multiple Iterables',
    text: 'Combine three lists using followedBy.',
    setup: 'var a = [1, 2];\nvar b = [3, 4];\nvar c = [5, 6];',
    setupCode: 'var a = [1, 2];\nvar b = [3, 4];\nvar c = [5, 6];',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'a.followedBy(b).followedBy(c).toList()',
    hints: ['Chain followedBy calls', 'Order is preserved'],
    tags: ['followedBy', 'chain', 'iterables'],
  },

  {
    id: 'dart-iter-208',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Skip and Take for Pagination',
    text: 'Get page 2 with page size 3 (items 4-6).',
    setup: 'var items = [1, 2, 3, 4, 5, 6, 7, 8, 9];',
    setupCode: 'var items = [1, 2, 3, 4, 5, 6, 7, 8, 9];',
    expected: [4, 5, 6],
    sample: 'items.skip(3).take(3).toList()',
    hints: ['Skip (page-1)*pageSize', 'Take pageSize'],
    tags: ['skip', 'take', 'pagination', 'iterables'],
  },

  {
    id: 'dart-iter-209',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Expand with Index',
    text: 'Use asMap and expand to include indices.',
    setup: 'var items = ["a", "b", "c"];',
    setupCode: 'var items = ["a", "b", "c"];',
    expected: [0, 'a', 1, 'b', 2, 'c'],
    sample: 'items.asMap().entries.expand((e) => [e.key, e.value]).toList()',
    hints: ['asMap() creates index-value map', 'expand() flattens entries'],
    tags: ['expand', 'asMap', 'index', 'iterables'],
  },

  {
    id: 'dart-iter-210',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Get Single Element',
    text: 'Get the single element from a one-element list.',
    setup: 'var items = [42];',
    setupCode: 'var items = [42];',
    expected: 42,
    sample: 'items.single',
    hints: ['single throws if not exactly one element', 'Use singleOrNull for safe access'],
    tags: ['single', 'access', 'iterables'],
  },

  {
    id: 'dart-iter-211',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Check Any Match',
    text: 'Check if any element is greater than 10.',
    setup: 'var numbers = [1, 5, 12, 3, 8];',
    setupCode: 'var numbers = [1, 5, 12, 3, 8];',
    expected: true,
    sample: 'numbers.any((n) => n > 10)',
    hints: ['any() returns true if at least one matches', 'Short-circuits on first match'],
    tags: ['any', 'check', 'iterables'],
  },

  {
    id: 'dart-iter-212',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Check Every Element',
    text: 'Check if all elements are positive.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: true,
    sample: 'numbers.every((n) => n > 0)',
    hints: ['every() returns true if all match', 'Returns true for empty iterable'],
    tags: ['every', 'check', 'iterables'],
  },

  {
    id: 'dart-iter-213',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Reduce to String',
    text: 'Use `reduce` to join strings with arrow.',
    setup: 'var steps = ["start", "process", "end"];',
    setupCode: 'var steps = ["start", "process", "end"];',
    expected: 'start -> process -> end',
    sample: 'steps.reduce((a, b) => "$a -> $b")',
    hints: ['reduce combines elements', 'Different from fold - no initial value'],
    tags: ['reduce', 'join', 'iterables'],
  },

  {
    id: 'dart-iter-214',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Element At Index',
    text: 'Get element at index 3 safely.',
    setup: 'var numbers = [10, 20, 30, 40, 50];',
    setupCode: 'var numbers = [10, 20, 30, 40, 50];',
    expected: 40,
    sample: 'numbers.elementAt(3)',
    hints: ['elementAt() accesses by index', 'Throws if out of bounds'],
    tags: ['elementAt', 'access', 'iterables'],
  },

  {
    id: 'dart-iter-215',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Cast Iterable Type',
    text: 'Cast list of dynamic to List<int>.',
    setup: 'var items = <dynamic>[1, 2, 3, 4];',
    setupCode: 'var items = <dynamic>[1, 2, 3, 4];',
    expected: [1, 2, 3, 4],
    sample: 'items.cast<int>().toList()',
    hints: ['cast<T>() changes element type', 'Throws if element cannot be cast'],
    tags: ['cast', 'type', 'iterables'],
  },

  {
    id: 'dart-iter-216',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Window Sliding',
    text: 'Create sliding windows of size 3.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [
      [1, 2, 3],
      [2, 3, 4],
      [3, 4, 5],
    ],
    sample: '[for (var i = 0; i <= numbers.length - 3; i++) numbers.sublist(i, i + 3)]',
    hints: ['Use collection for', 'sublist creates window'],
    tags: ['window', 'sliding', 'iterables'],
  },

  {
    id: 'dart-iter-217',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Zip Two Iterables',
    text: 'Combine two lists into pairs.',
    setup: 'var a = [1, 2, 3];\nvar b = ["a", "b", "c"];',
    setupCode: 'var a = [1, 2, 3];\nvar b = ["a", "b", "c"];',
    expected: [
      [1, 'a'],
      [2, 'b'],
      [3, 'c'],
    ],
    sample: 'a.asMap().entries.map((e) => [e.value, b[e.key]]).toList()',
    hints: ['Use asMap for indices', 'Access both lists by index'],
    tags: ['zip', 'combine', 'iterables'],
  },

  {
    id: 'dart-iter-218',
    category: 'Iterable Extensions',
    difficulty: 'easy',
    title: 'Convert to Set',
    text: 'Remove duplicates by converting to Set.',
    setup: 'var numbers = [1, 2, 2, 3, 3, 3, 4];',
    setupCode: 'var numbers = [1, 2, 2, 3, 3, 3, 4];',
    expected: [1, 2, 3, 4],
    sample: 'numbers.toSet().toList()',
    hints: ['toSet() removes duplicates', 'Order may not be preserved'],
    tags: ['toSet', 'unique', 'iterables'],
  },

  {
    id: 'dart-iter-219',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'First Where Or Null',
    text: 'Find first even number or return null.',
    setup: 'var numbers = [1, 3, 5, 7];',
    setupCode: 'var numbers = [1, 3, 5, 7];',
    expected: null,
    sample: 'numbers.cast<int?>().firstWhere((n) => n! % 2 == 0, orElse: () => null)',
    hints: ['Use orElse for null case', 'Cast allows null return'],
    tags: ['firstWhere', 'orElse', 'null', 'iterables'],
  },

  {
    id: 'dart-iter-220',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Indexed Map',
    text: 'Map with index using asMap.',
    setup: 'var letters = ["a", "b", "c"];',
    setupCode: 'var letters = ["a", "b", "c"];',
    expected: ['0:a', '1:b', '2:c'],
    sample: 'letters.asMap().entries.map((e) => "${e.key}:${e.value}").toList()',
    hints: ['asMap() creates Map<int, T>', 'entries gives key-value pairs'],
    tags: ['asMap', 'index', 'map', 'iterables'],
  },

  {
    id: 'dart-iter-221',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Chunk List',
    text: 'Split list into chunks of size 2.',
    setup: 'var numbers = [1, 2, 3, 4, 5, 6];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5, 6];',
    expected: [
      [1, 2],
      [3, 4],
      [5, 6],
    ],
    sample: '[for (var i = 0; i < numbers.length; i += 2) numbers.sublist(i, i + 2)]',
    hints: ['Use collection for with step', 'sublist creates chunks'],
    tags: ['chunk', 'batch', 'sublist', 'iterables'],
  },

  {
    id: 'dart-iter-222',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Interleave Lists',
    text: 'Interleave elements from two lists.',
    setup: 'var a = [1, 2, 3];\nvar b = [4, 5, 6];',
    setupCode: 'var a = [1, 2, 3];\nvar b = [4, 5, 6];',
    expected: [1, 4, 2, 5, 3, 6],
    sample: 'a.asMap().entries.expand((e) => [e.value, b[e.key]]).toList()',
    hints: ['Use expand for interleaving', 'Access both by index'],
    tags: ['interleave', 'expand', 'iterables'],
  },

  {
    id: 'dart-iter-223',
    category: 'Iterable Extensions',
    difficulty: 'medium',
    title: 'Where Type Filter',
    text: 'Filter only String elements from mixed list.',
    setup: 'var mixed = [1, "hello", 2, "world", 3];',
    setupCode: 'var mixed = [1, "hello", 2, "world", 3];',
    expected: ['hello', 'world'],
    sample: 'mixed.whereType<String>().toList()',
    hints: ['whereType<T>() filters by type', 'More efficient than where + is'],
    tags: ['whereType', 'type', 'filter', 'iterables'],
  },

  {
    id: 'dart-iter-224',
    category: 'Iterable Extensions',
    difficulty: 'hard',
    title: 'Flatten Deeply Nested',
    text: 'Flatten a nested list structure.',
    setup: 'var nested = [[1, [2, 3]], [[4], 5]];',
    setupCode: 'var nested = [[1, [2, 3]], [[4], 5]];',
    expected: [1, 2, 3, 4, 5],
    sample:
      'void flatten(list, result) { for (var e in list) e is List ? flatten(e, result) : result.add(e); }\nvar result = []; flatten(nested, result); result',
    hints: ['Use recursion for deep flatten', 'Check if element is List'],
    tags: ['flatten', 'recursive', 'nested', 'iterables'],
  },

  // ============================================================
  // Null Safety (225-249)
  // ============================================================

  {
    id: 'dart-null-225',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Nullable Variable',
    text: 'Declare a nullable int variable set to null.',
    setup: '// Declare nullable int',
    setupCode: '// Declare nullable int',
    expected: null,
    sample: 'int? value = null;',
    hints: ['Add ? after type for nullable', 'Can hold null or int'],
    tags: ['nullable', 'declaration', 'null-safety'],
  },

  {
    id: 'dart-null-226',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Null Coalescing',
    text: 'Use `??` to provide default value for null.',
    setup: 'String? name = null;',
    setupCode: 'String? name = null;',
    expected: 'Guest',
    sample: 'name ?? "Guest"',
    hints: ['?? returns right side if left is null', 'Short-circuit evaluation'],
    tags: ['??', 'default', 'null-safety'],
  },

  {
    id: 'dart-null-227',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Null-Aware Access',
    text: 'Use `?.` to safely access length.',
    setup: 'String? text = "Hello";',
    setupCode: 'String? text = "Hello";',
    expected: 5,
    sample: 'text?.length',
    hints: ['?. returns null if object is null', 'Safe navigation operator'],
    tags: ['?.', 'access', 'null-safety'],
  },

  {
    id: 'dart-null-228',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Null-Aware Assignment',
    text: 'Use `??=` to assign only if null.',
    setup: 'int? count = null;',
    setupCode: 'int? count = null;',
    expected: 0,
    sample: 'count ??= 0',
    hints: ['??= assigns if variable is null', 'Does nothing if already has value'],
    tags: ['??=', 'assign', 'null-safety'],
  },

  {
    id: 'dart-null-229',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Late Variable',
    text: 'Declare a late-initialized variable.',
    setup: '// Declare late String',
    setupCode: '// Declare late String',
    expected: 'late String name;',
    sample: 'late String name;',
    hints: ['late defers initialization', 'Must be assigned before read'],
    tags: ['late', 'initialization', 'null-safety'],
  },

  {
    id: 'dart-null-230',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Required Named Parameter',
    text: 'Create function with required named parameter.',
    setup: '// Function with required name parameter',
    setupCode: '// Function with required name parameter',
    expected: 'void greet({required String name}) {}',
    sample: 'void greet({required String name}) => print("Hello, $name");',
    hints: ['required makes named parameter mandatory', 'Used in null-safe code'],
    tags: ['required', 'parameter', 'null-safety'],
  },

  {
    id: 'dart-null-231',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Chain Null-Aware Operators',
    text: 'Safely access nested nullable property.',
    setup: 'Map<String, dynamic>? user = {"profile": {"name": "Alice"}};',
    setupCode: 'Map<String, dynamic>? user = {"profile": {"name": "Alice"}};',
    expected: 'Alice',
    sample: '(user?["profile"] as Map?)?["name"]',
    hints: ['Chain ?. and ?[] operators', 'Cast intermediate values'],
    tags: ['?.', '?[]', 'chain', 'null-safety'],
  },

  {
    id: 'dart-null-232',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Non-Null Assertion',
    text: 'Assert non-null and access property using `!`.',
    setup: 'String? name = "Alice";',
    setupCode: 'String? name = "Alice";',
    expected: 5,
    sample: 'name!.length',
    hints: ['! asserts value is not null', 'Throws if actually null'],
    tags: ['!', 'assertion', 'null-safety'],
  },

  {
    id: 'dart-null-233',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Null-Aware Spread',
    text: 'Use `...?` to spread nullable list.',
    setup: 'List<int>? extras = [4, 5];\nvar base = [1, 2, 3];',
    setupCode: 'List<int>? extras = [4, 5];\nvar base = [1, 2, 3];',
    expected: [1, 2, 3, 4, 5],
    sample: '[...base, ...?extras]',
    hints: ['...? spreads if not null', 'Spreads nothing if null'],
    tags: ['...?', 'spread', 'null-safety'],
  },

  {
    id: 'dart-null-234',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Null-Aware Index Access',
    text: 'Safely access list element with null check.',
    setup: 'List<int>? numbers = [10, 20, 30];',
    setupCode: 'List<int>? numbers = [10, 20, 30];',
    expected: 20,
    sample: 'numbers?[1]',
    hints: ['?[] for null-safe indexing', 'Returns null if list is null'],
    tags: ['?[]', 'index', 'null-safety'],
  },

  {
    id: 'dart-null-235',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Promote Nullable to Non-Null',
    text: 'Use if-check to promote nullable to non-null.',
    setup: 'String? name = "Alice";',
    setupCode: 'String? name = "Alice";',
    expected: 5,
    sample: 'if (name != null) name.length',
    hints: ['Null check promotes type', 'Inside if, name is String'],
    tags: ['promotion', 'null-check', 'null-safety'],
  },

  {
    id: 'dart-null-236',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Null-Aware Method Cascade',
    text: 'Use `?..` for null-safe cascade.',
    setup: 'List<int>? numbers = [1, 2];',
    setupCode: 'List<int>? numbers = [1, 2];',
    expected: [1, 2, 3],
    sample: 'numbers?..add(3)',
    hints: ['?.. cascades if not null', 'First operation uses ?..'],
    tags: ['?..', 'cascade', 'null-safety'],
  },

  {
    id: 'dart-null-237',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Handle Null in Map',
    text: 'Get map value with null handling.',
    setup: 'var data = {"name": "Alice"};',
    setupCode: 'var data = {"name": "Alice"};',
    expected: 'Unknown',
    sample: 'data["age"]?.toString() ?? "Unknown"',
    hints: ['Map access can return null', 'Chain ?. and ??'],
    tags: ['map', 'null', '??', 'null-safety'],
  },

  {
    id: 'dart-null-238',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Late Final Lazy Init',
    text: 'Use late final for lazy initialization.',
    setup: '// Expensive computation done once',
    setupCode: '// Expensive computation done once',
    expected: 'late final value = expensiveCompute();',
    sample: 'late final value = expensiveCompute();',
    hints: ['late final computes on first access', 'Computed only once'],
    tags: ['late', 'final', 'lazy', 'null-safety'],
  },

  {
    id: 'dart-null-239',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Convert Nullable List',
    text: 'Convert nullable list to non-null with default.',
    setup: 'List<int>? input = null;',
    setupCode: 'List<int>? input = null;',
    expected: [],
    sample: 'input ?? <int>[]',
    hints: ['Use ?? with typed empty list', 'Ensures non-null result'],
    tags: ['??', 'list', 'default', 'null-safety'],
  },

  {
    id: 'dart-null-240',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Check for Null',
    text: 'Check if nullable variable is null.',
    setup: 'String? name = null;',
    setupCode: 'String? name = null;',
    expected: true,
    sample: 'name == null',
    hints: ['Use == null to check', 'Simple and clear'],
    tags: ['null', 'check', 'null-safety'],
  },

  {
    id: 'dart-null-241',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Optional Callback',
    text: 'Call nullable function if not null.',
    setup: 'void Function()? callback = () => print("Called");',
    setupCode: 'void Function()? callback = () => print("Called");',
    expected: 'callback?.call()',
    sample: 'callback?.call()',
    hints: ['Use ?.call() for nullable functions', 'Does nothing if null'],
    tags: ['?.', 'function', 'call', 'null-safety'],
  },

  {
    id: 'dart-null-242',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Nullable List Element',
    text: 'Add null to list of nullable ints.',
    setup: 'var numbers = <int?>[1, 2, 3];',
    setupCode: 'var numbers = <int?>[1, 2, 3];',
    expected: [1, 2, 3, null],
    sample: 'numbers.add(null)',
    hints: ['List<int?> can contain null', 'Different from List<int>?'],
    tags: ['List', 'nullable', 'element', 'null-safety'],
  },

  {
    id: 'dart-null-243',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Filter Out Nulls',
    text: 'Remove null values from nullable list.',
    setup: 'var items = <int?>[1, null, 2, null, 3];',
    setupCode: 'var items = <int?>[1, null, 2, null, 3];',
    expected: [1, 2, 3],
    sample: 'items.whereType<int>().toList()',
    hints: ['whereType<int>() excludes nulls', 'Changes to List<int>'],
    tags: ['whereType', 'filter', 'null', 'null-safety'],
  },

  {
    id: 'dart-null-244',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Null-Safe Map Transform',
    text: 'Transform nullable values in map.',
    setup: 'var data = {"a": 1, "b": null, "c": 3};',
    setupCode: 'var data = {"a": 1, "b": null, "c": 3};',
    expected: { a: 2, b: 0, c: 6 },
    sample: 'data.map((k, v) => MapEntry(k, (v ?? 0) * 2))',
    hints: ['Handle null values in transform', 'Use ?? for default'],
    tags: ['map', 'transform', 'null', 'null-safety'],
  },

  {
    id: 'dart-null-245',
    category: 'Null Safety',
    difficulty: 'easy',
    title: 'Optional Parameter Default',
    text: 'Create function with optional parameter and default.',
    setup: '// Function with optional count',
    setupCode: '// Function with optional count',
    expected: 'void repeat(String s, [int count = 1]) {}',
    sample: 'void repeat(String s, [int count = 1]) => print(s * count);',
    hints: ['[param = default] for optional', 'Non-nullable with default'],
    tags: ['optional', 'default', 'parameter', 'null-safety'],
  },

  {
    id: 'dart-null-246',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Coalesce Multiple Values',
    text: 'Chain ?? operators for multiple fallbacks.',
    setup: 'String? first = null;\nString? second = null;\nString? third = "found";',
    setupCode: 'String? first = null;\nString? second = null;\nString? third = "found";',
    expected: 'found',
    sample: 'first ?? second ?? third ?? "default"',
    hints: ['Chain ?? for multiple fallbacks', 'First non-null wins'],
    tags: ['??', 'chain', 'fallback', 'null-safety'],
  },

  {
    id: 'dart-null-247',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Null-Aware in Collection If',
    text: 'Conditionally include element based on null.',
    setup: 'String? extra = "bonus";',
    setupCode: 'String? extra = "bonus";',
    expected: ['item1', 'item2', 'bonus'],
    sample: '["item1", "item2", if (extra != null) extra]',
    hints: ['Collection if with null check', 'Include only if not null'],
    tags: ['collection-if', 'null', 'conditional', 'null-safety'],
  },

  {
    id: 'dart-null-248',
    category: 'Null Safety',
    difficulty: 'hard',
    title: 'Safe Cast with as?',
    text: 'Safely cast dynamic to specific type.',
    setup: 'dynamic value = "hello";',
    setupCode: 'dynamic value = "hello";',
    expected: 5,
    sample: '(value as String?)?.length ?? 0',
    hints: ['Cast then use ?. for safety', 'Returns null if cast fails'],
    tags: ['cast', 'as', '?.', 'null-safety'],
  },

  {
    id: 'dart-null-249',
    category: 'Null Safety',
    difficulty: 'medium',
    title: 'Assert Non-Null in Collection',
    text: 'Assert all elements are non-null.',
    setup: 'var items = <int?>[1, 2, 3];',
    setupCode: 'var items = <int?>[1, 2, 3];',
    expected: [1, 2, 3],
    sample: 'items.map((e) => e!).toList()',
    hints: ['Use ! to assert each element', 'Throws if any is null'],
    tags: ['!', 'assertion', 'map', 'null-safety'],
  },

  // ============================================================
  // Collections (250-274)
  // ============================================================

  {
    id: 'dart-coll-250',
    category: 'Collections',
    difficulty: 'easy',
    title: 'Create Fixed-Length List',
    text: 'Create a fixed-length list of 5 zeros.',
    setup: '// Create fixed list of zeros',
    setupCode: '// Create fixed list of zeros',
    expected: [0, 0, 0, 0, 0],
    sample: 'List.filled(5, 0)',
    hints: ['List.filled creates fixed-length list', 'All elements have same value'],
    tags: ['List', 'filled', 'fixed', 'collections'],
  },

  {
    id: 'dart-coll-251',
    category: 'Collections',
    difficulty: 'easy',
    title: 'Create List with Generator',
    text: 'Generate list of squares from 0 to 4.',
    setup: '// Generate squares',
    setupCode: '// Generate squares',
    expected: [0, 1, 4, 9, 16],
    sample: 'List.generate(5, (i) => i * i)',
    hints: ['List.generate takes length and generator', 'Generator receives index'],
    tags: ['List', 'generate', 'collections'],
  },

  {
    id: 'dart-coll-252',
    category: 'Collections',
    difficulty: 'easy',
    title: 'Create Set from List',
    text: 'Create a Set from a list with duplicates.',
    setup: 'var list = [1, 2, 2, 3, 3, 3];',
    setupCode: 'var list = [1, 2, 2, 3, 3, 3];',
    expected: [1, 2, 3],
    sample: 'Set.from(list)',
    hints: ['Set.from removes duplicates', 'Returns a LinkedHashSet'],
    tags: ['Set', 'from', 'unique', 'collections'],
  },

  {
    id: 'dart-coll-253',
    category: 'Collections',
    difficulty: 'easy',
    title: 'Create Map from Iterables',
    text: 'Create Map from lists of keys and values.',
    setup: 'var keys = ["a", "b", "c"];\nvar values = [1, 2, 3];',
    setupCode: 'var keys = ["a", "b", "c"];\nvar values = [1, 2, 3];',
    expected: { a: 1, b: 2, c: 3 },
    sample: 'Map.fromIterables(keys, values)',
    hints: ['Map.fromIterables pairs up keys and values', 'Lists must be same length'],
    tags: ['Map', 'fromIterables', 'collections'],
  },

  {
    id: 'dart-coll-254',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Create Queue',
    text: 'Create a Queue and add elements to both ends.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: [0, 1, 2, 3],
    sample: 'Queue<int>()..addFirst(1)..addLast(2)..addFirst(0)..addLast(3)',
    hints: ['Queue allows adding at both ends', 'addFirst and addLast'],
    tags: ['Queue', 'deque', 'collections'],
  },

  {
    id: 'dart-coll-255',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Use LinkedHashSet',
    text: 'Create insertion-ordered Set.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: [3, 1, 2],
    sample: 'LinkedHashSet<int>()..add(3)..add(1)..add(2)',
    hints: ['LinkedHashSet preserves insertion order', 'Default Set is LinkedHashSet'],
    tags: ['LinkedHashSet', 'ordered', 'collections'],
  },

  {
    id: 'dart-coll-256',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Use SplayTreeSet',
    text: 'Create sorted Set that maintains order.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: [1, 2, 3, 5],
    sample: 'SplayTreeSet<int>()..addAll([3, 1, 5, 2])',
    hints: ['SplayTreeSet keeps elements sorted', 'Uses natural ordering'],
    tags: ['SplayTreeSet', 'sorted', 'collections'],
  },

  {
    id: 'dart-coll-257',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Use SplayTreeMap',
    text: 'Create sorted Map by keys.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: { a: 1, b: 2, c: 3 },
    sample: 'SplayTreeMap<String, int>()..["c"] = 3..["a"] = 1..["b"] = 2',
    hints: ['SplayTreeMap sorts by keys', 'Maintains sorted order'],
    tags: ['SplayTreeMap', 'sorted', 'collections'],
  },

  {
    id: 'dart-coll-258',
    category: 'Collections',
    difficulty: 'hard',
    title: 'Create Unmodifiable List',
    text: 'Create an immutable list view.',
    setup: 'var source = [1, 2, 3];',
    setupCode: 'var source = [1, 2, 3];',
    expected: [1, 2, 3],
    sample: 'List.unmodifiable(source)',
    hints: ['List.unmodifiable prevents modifications', 'Throws on write attempts'],
    tags: ['List', 'unmodifiable', 'immutable', 'collections'],
  },

  {
    id: 'dart-coll-259',
    category: 'Collections',
    difficulty: 'hard',
    title: 'Create HashMap with Custom Equals',
    text: 'Create HashMap with case-insensitive keys.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: { hello: 'world' },
    sample:
      'HashMap<String, String>(equals: (a, b) => a.toLowerCase() == b.toLowerCase(), hashCode: (s) => s.toLowerCase().hashCode)',
    hints: ['HashMap accepts custom equals', 'Must also provide hashCode'],
    tags: ['HashMap', 'custom', 'equals', 'collections'],
  },

  {
    id: 'dart-coll-260',
    category: 'Collections',
    difficulty: 'easy',
    title: 'List Insert at Index',
    text: 'Insert element at specific index.',
    setup: 'var list = [1, 2, 4, 5];',
    setupCode: 'var list = [1, 2, 4, 5];',
    expected: [1, 2, 3, 4, 5],
    sample: 'list.insert(2, 3)',
    hints: ['insert() adds at index', 'Shifts existing elements'],
    tags: ['List', 'insert', 'collections'],
  },

  {
    id: 'dart-coll-261',
    category: 'Collections',
    difficulty: 'easy',
    title: 'List Remove at Index',
    text: 'Remove element at specific index.',
    setup: 'var list = [1, 2, 3, 4, 5];',
    setupCode: 'var list = [1, 2, 3, 4, 5];',
    expected: [1, 2, 4, 5],
    sample: 'list.removeAt(2)',
    hints: ['removeAt() removes by index', 'Returns removed element'],
    tags: ['List', 'removeAt', 'collections'],
  },

  {
    id: 'dart-coll-262',
    category: 'Collections',
    difficulty: 'medium',
    title: 'List Sublist',
    text: 'Extract a portion of the list.',
    setup: 'var list = [0, 1, 2, 3, 4, 5];',
    setupCode: 'var list = [0, 1, 2, 3, 4, 5];',
    expected: [2, 3, 4],
    sample: 'list.sublist(2, 5)',
    hints: ['sublist(start, end) extracts range', 'End is exclusive'],
    tags: ['List', 'sublist', 'slice', 'collections'],
  },

  {
    id: 'dart-coll-263',
    category: 'Collections',
    difficulty: 'medium',
    title: 'List Replace Range',
    text: 'Replace elements in a range.',
    setup: 'var list = [1, 2, 3, 4, 5];',
    setupCode: 'var list = [1, 2, 3, 4, 5];',
    expected: [1, 9, 9, 9, 5],
    sample: 'list.replaceRange(1, 4, [9, 9, 9])',
    hints: ['replaceRange modifies in place', 'Replacement can differ in length'],
    tags: ['List', 'replaceRange', 'collections'],
  },

  {
    id: 'dart-coll-264',
    category: 'Collections',
    difficulty: 'hard',
    title: 'Queue Operations',
    text: 'Use Queue for FIFO operations.',
    setup: 'import "dart:collection";',
    setupCode: 'import "dart:collection";',
    expected: [2, 3],
    sample: 'var q = Queue<int>.from([1, 2, 3]); q.removeFirst(); q.toList()',
    hints: ['Queue supports removeFirst/removeLast', 'FIFO with removeFirst'],
    tags: ['Queue', 'FIFO', 'operations', 'collections'],
  },

  {
    id: 'dart-coll-265',
    category: 'Collections',
    difficulty: 'hard',
    title: 'List Fill Range',
    text: 'Fill a range with specific value.',
    setup: 'var list = [1, 2, 3, 4, 5];',
    setupCode: 'var list = [1, 2, 3, 4, 5];',
    expected: [1, 0, 0, 0, 5],
    sample: 'list.fillRange(1, 4, 0)',
    hints: ['fillRange sets range to value', 'Modifies in place'],
    tags: ['List', 'fillRange', 'collections'],
  },

  {
    id: 'dart-coll-266',
    category: 'Collections',
    difficulty: 'easy',
    title: 'List Shuffle',
    text: 'Randomly shuffle list elements.',
    setup: 'var list = [1, 2, 3, 4, 5];',
    setupCode: 'var list = [1, 2, 3, 4, 5];',
    expected: 'shuffled list',
    sample: 'list.shuffle()',
    hints: ['shuffle() randomizes in place', 'Uses Random by default'],
    tags: ['List', 'shuffle', 'random', 'collections'],
  },

  {
    id: 'dart-coll-267',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Set Lookup',
    text: 'Use lookup() to find exact element in Set.',
    setup: 'var set = {"apple", "banana", "cherry"};',
    setupCode: 'var set = {"apple", "banana", "cherry"};',
    expected: 'banana',
    sample: 'set.lookup("banana")',
    hints: ['lookup() returns the actual stored element', 'Returns null if not found'],
    tags: ['Set', 'lookup', 'find', 'collections'],
  },

  {
    id: 'dart-coll-268',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Map from Entries',
    text: 'Create Map from MapEntry list.',
    setup: 'var entries = [MapEntry("a", 1), MapEntry("b", 2)];',
    setupCode: 'var entries = [MapEntry("a", 1), MapEntry("b", 2)];',
    expected: { a: 1, b: 2 },
    sample: 'Map.fromEntries(entries)',
    hints: ['Map.fromEntries converts entries to Map', 'Useful after transformations'],
    tags: ['Map', 'fromEntries', 'collections'],
  },

  {
    id: 'dart-coll-269',
    category: 'Collections',
    difficulty: 'hard',
    title: 'List Binary Search',
    text: 'Find index in sorted list using binary search.',
    setup: 'import "dart:collection";\nvar list = [1, 3, 5, 7, 9];',
    setupCode: 'import "dart:collection";\nvar list = [1, 3, 5, 7, 9];',
    expected: 2,
    sample: 'binarySearch(list, 5)',
    hints: ['Use package:collection for binarySearch', 'List must be sorted'],
    tags: ['List', 'binarySearch', 'sorted', 'collections'],
  },

  {
    id: 'dart-coll-270',
    category: 'Collections',
    difficulty: 'easy',
    title: 'List Join',
    text: 'Join list elements into string.',
    setup: 'var words = ["Hello", "World"];',
    setupCode: 'var words = ["Hello", "World"];',
    expected: 'Hello World',
    sample: 'words.join(" ")',
    hints: ['join() concatenates with separator', 'Works on any List'],
    tags: ['List', 'join', 'string', 'collections'],
  },

  {
    id: 'dart-coll-271',
    category: 'Collections',
    difficulty: 'medium',
    title: 'List Index Operations',
    text: 'Find first and last index of element.',
    setup: 'var list = [1, 2, 3, 2, 1];',
    setupCode: 'var list = [1, 2, 3, 2, 1];',
    expected: [1, 3],
    sample: '[list.indexOf(2), list.lastIndexOf(2)]',
    hints: ['indexOf finds first occurrence', 'lastIndexOf finds last'],
    tags: ['List', 'indexOf', 'lastIndexOf', 'collections'],
  },

  {
    id: 'dart-coll-272',
    category: 'Collections',
    difficulty: 'hard',
    title: 'Map Update All',
    text: 'Increment all map values by 1.',
    setup: 'var counts = {"a": 1, "b": 2, "c": 3};',
    setupCode: 'var counts = {"a": 1, "b": 2, "c": 3};',
    expected: { a: 2, b: 3, c: 4 },
    sample: 'counts.updateAll((k, v) => v + 1)',
    hints: ['updateAll modifies all values', 'Takes key-value function'],
    tags: ['Map', 'updateAll', 'transform', 'collections'],
  },

  {
    id: 'dart-coll-273',
    category: 'Collections',
    difficulty: 'hard',
    title: 'List Set Operations',
    text: 'Set range of list to values from another list.',
    setup: 'var list = [0, 0, 0, 0, 0];\nvar values = [1, 2, 3];',
    setupCode: 'var list = [0, 0, 0, 0, 0];\nvar values = [1, 2, 3];',
    expected: [0, 1, 2, 3, 0],
    sample: 'list.setRange(1, 4, values)',
    hints: ['setRange copies from source', 'Modifies destination in place'],
    tags: ['List', 'setRange', 'copy', 'collections'],
  },

  {
    id: 'dart-coll-274',
    category: 'Collections',
    difficulty: 'medium',
    title: 'Growable vs Fixed List',
    text: 'Convert fixed list to growable.',
    setup: 'var fixed = List.filled(3, 0);',
    setupCode: 'var fixed = List.filled(3, 0);',
    expected: [0, 0, 0, 1],
    sample: 'List.from(fixed)..add(1)',
    hints: ['List.from creates growable copy', 'Fixed lists cannot grow'],
    tags: ['List', 'growable', 'fixed', 'collections'],
  },

  // ============================================================
  // Async/Await (275-299)
  // ============================================================

  {
    id: 'dart-async-275',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Create Simple Future',
    text: 'Create a Future that resolves to a value.',
    setup: '// Create Future with value',
    setupCode: '// Create Future with value',
    expected: 42,
    sample: 'Future.value(42)',
    hints: ['Future.value creates resolved Future', 'Immediately available'],
    tags: ['Future', 'value', 'async'],
  },

  {
    id: 'dart-async-276',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Await Future Value',
    text: 'Await a Future to get its value.',
    setup: 'Future<int> getValue() async => 42;',
    setupCode: 'Future<int> getValue() async => 42;',
    expected: 42,
    sample: 'await getValue()',
    hints: ['await pauses until Future completes', 'Returns the resolved value'],
    tags: ['await', 'Future', 'async'],
  },

  {
    id: 'dart-async-277',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Create Delayed Future',
    text: 'Create a Future that completes after delay.',
    setup: '// Delayed Future',
    setupCode: '// Delayed Future',
    expected: 'done',
    sample: 'await Future.delayed(Duration(milliseconds: 100), () => "done")',
    hints: ['Future.delayed waits before computing', 'Duration specifies wait time'],
    tags: ['Future', 'delayed', 'async'],
  },

  {
    id: 'dart-async-278',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Future.wait for Parallel',
    text: 'Wait for multiple Futures in parallel.',
    setup: 'Future<int> a() async => 1;\nFuture<int> b() async => 2;',
    setupCode: 'Future<int> a() async => 1;\nFuture<int> b() async => 2;',
    expected: [1, 2],
    sample: 'await Future.wait([a(), b()])',
    hints: ['Future.wait runs Futures concurrently', 'Returns list of results'],
    tags: ['Future', 'wait', 'parallel', 'async'],
  },

  {
    id: 'dart-async-279',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Future Error Handling',
    text: 'Handle Future error with catchError.',
    setup: 'Future<int> failing() => Future.error("oops");',
    setupCode: 'Future<int> failing() => Future.error("oops");',
    expected: -1,
    sample: 'await failing().catchError((_) => -1)',
    hints: ['catchError handles Future errors', 'Returns fallback value'],
    tags: ['Future', 'catchError', 'error', 'async'],
  },

  {
    id: 'dart-async-280',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Async Generator Function',
    text: 'Create async generator with async*.',
    setup: '// Generate numbers asynchronously',
    setupCode: '// Generate numbers asynchronously',
    expected: [1, 2, 3],
    sample: 'Stream<int> numbers() async* { yield 1; yield 2; yield 3; }',
    hints: ['async* creates a Stream', 'yield emits values'],
    tags: ['async*', 'Stream', 'generator', 'async'],
  },

  {
    id: 'dart-async-281',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Stream from Iterable',
    text: 'Create Stream from a list.',
    setup: 'var numbers = [1, 2, 3, 4, 5];',
    setupCode: 'var numbers = [1, 2, 3, 4, 5];',
    expected: [1, 2, 3, 4, 5],
    sample: 'await Stream.fromIterable(numbers).toList()',
    hints: ['Stream.fromIterable converts list', 'toList() collects values'],
    tags: ['Stream', 'fromIterable', 'async'],
  },

  {
    id: 'dart-async-282',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'StreamController Usage',
    text: 'Use StreamController to emit values.',
    setup: 'import "dart:async";',
    setupCode: 'import "dart:async";',
    expected: [1, 2, 3],
    sample:
      'var ctrl = StreamController<int>(); ctrl.add(1); ctrl.add(2); ctrl.add(3); ctrl.close(); await ctrl.stream.toList()',
    hints: ['StreamController creates controllable Stream', 'close() when done'],
    tags: ['StreamController', 'Stream', 'async'],
  },

  {
    id: 'dart-async-283',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Map Transformation',
    text: 'Transform Stream values with map.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3]);',
    expected: [2, 4, 6],
    sample: 'await stream.map((n) => n * 2).toList()',
    hints: ['Stream.map transforms each value', 'Returns new Stream'],
    tags: ['Stream', 'map', 'transform', 'async'],
  },

  {
    id: 'dart-async-284',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Where Filter',
    text: 'Filter Stream values.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5, 6]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5, 6]);',
    expected: [2, 4, 6],
    sample: 'await stream.where((n) => n % 2 == 0).toList()',
    hints: ['Stream.where filters values', 'Only matching pass through'],
    tags: ['Stream', 'where', 'filter', 'async'],
  },

  {
    id: 'dart-async-285',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Future then Chaining',
    text: 'Chain Future transformations with then.',
    setup: 'Future<int> getValue() async => 5;',
    setupCode: 'Future<int> getValue() async => 5;',
    expected: 10,
    sample: 'await getValue().then((v) => v * 2)',
    hints: ['then() transforms Future value', 'Returns new Future'],
    tags: ['Future', 'then', 'chain', 'async'],
  },

  {
    id: 'dart-async-286',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Future.any First Result',
    text: 'Get first completed Future result.',
    setup:
      'Future<int> slow() => Future.delayed(Duration(seconds: 1), () => 1);\nFuture<int> fast() => Future.value(2);',
    setupCode:
      'Future<int> slow() => Future.delayed(Duration(seconds: 1), () => 1);\nFuture<int> fast() => Future.value(2);',
    expected: 2,
    sample: 'await Future.any([slow(), fast()])',
    hints: ['Future.any returns first to complete', 'Race condition pattern'],
    tags: ['Future', 'any', 'race', 'async'],
  },

  {
    id: 'dart-async-287',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream asyncMap',
    text: 'Apply async transformation to Stream.',
    setup:
      'Future<String> fetch(int id) async => "item$id";\nvar stream = Stream.fromIterable([1, 2, 3]);',
    setupCode:
      'Future<String> fetch(int id) async => "item$id";\nvar stream = Stream.fromIterable([1, 2, 3]);',
    expected: ['item1', 'item2', 'item3'],
    sample: 'await stream.asyncMap(fetch).toList()',
    hints: ['asyncMap handles async transformations', 'Waits for each Future'],
    tags: ['Stream', 'asyncMap', 'async'],
  },

  {
    id: 'dart-async-288',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Expand',
    text: 'Expand each Stream value into multiple.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3]);',
    expected: [1, 1, 2, 2, 3, 3],
    sample: 'await stream.expand((n) => [n, n]).toList()',
    hints: ['Stream.expand returns multiple values', 'Like flatMap'],
    tags: ['Stream', 'expand', 'flatten', 'async'],
  },

  {
    id: 'dart-async-289',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Try-Catch with Await',
    text: 'Handle async errors with try-catch.',
    setup: 'Future<int> failing() async => throw Exception("error");',
    setupCode: 'Future<int> failing() async => throw Exception("error");',
    expected: -1,
    sample: 'try { await failing(); } catch (e) { return -1; }',
    hints: ['try-catch works with await', 'Catches thrown exceptions'],
    tags: ['try', 'catch', 'await', 'async'],
  },

  {
    id: 'dart-async-290',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Broadcast',
    text: 'Create broadcast Stream for multiple listeners.',
    setup: 'import "dart:async";',
    setupCode: 'import "dart:async";',
    expected: 'broadcast stream',
    sample: 'StreamController<int>.broadcast()',
    hints: ['Broadcast allows multiple subscriptions', 'Regular streams are single-subscription'],
    tags: ['StreamController', 'broadcast', 'async'],
  },

  {
    id: 'dart-async-291',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Future whenComplete',
    text: 'Run code after Future completes (success or error).',
    setup: 'Future<int> getValue() async => 42;',
    setupCode: 'Future<int> getValue() async => 42;',
    expected: 'cleanup runs',
    sample: 'await getValue().whenComplete(() => print("done"))',
    hints: ['whenComplete runs always', 'Like finally for Futures'],
    tags: ['Future', 'whenComplete', 'cleanup', 'async'],
  },

  {
    id: 'dart-async-292',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Stream Take',
    text: 'Take first n elements from Stream.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    expected: [1, 2, 3],
    sample: 'await stream.take(3).toList()',
    hints: ['Stream.take limits elements', 'Closes after n elements'],
    tags: ['Stream', 'take', 'limit', 'async'],
  },

  {
    id: 'dart-async-293',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Stream Skip',
    text: 'Skip first n elements from Stream.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    expected: [4, 5],
    sample: 'await stream.skip(3).toList()',
    hints: ['Stream.skip ignores first n', 'Then passes remaining'],
    tags: ['Stream', 'skip', 'offset', 'async'],
  },

  {
    id: 'dart-async-294',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Reduce',
    text: 'Reduce Stream to single value.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    expected: 15,
    sample: 'await stream.reduce((a, b) => a + b)',
    hints: ['Stream.reduce combines all values', 'Returns Future with result'],
    tags: ['Stream', 'reduce', 'aggregate', 'async'],
  },

  {
    id: 'dart-async-295',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream First and Last',
    text: 'Get first and last Stream values.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3, 4, 5]);',
    expected: [1, 5],
    sample:
      '[await Stream.fromIterable([1,2,3,4,5]).first, await Stream.fromIterable([1,2,3,4,5]).last]',
    hints: ['first and last are Futures', 'Stream can only be read once'],
    tags: ['Stream', 'first', 'last', 'async'],
  },

  {
    id: 'dart-async-296',
    category: 'Async/Await',
    difficulty: 'medium',
    title: 'Async For Loop',
    text: 'Iterate over Stream with await for.',
    setup: 'var stream = Stream.fromIterable([1, 2, 3]);',
    setupCode: 'var stream = Stream.fromIterable([1, 2, 3]);',
    expected: [1, 2, 3],
    sample: 'var result = <int>[]; await for (var n in stream) { result.add(n); }',
    hints: ['await for iterates async', 'Waits for each value'],
    tags: ['await', 'for', 'Stream', 'async'],
  },

  {
    id: 'dart-async-297',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Stream Distinct',
    text: 'Remove duplicate consecutive values.',
    setup: 'var stream = Stream.fromIterable([1, 1, 2, 2, 2, 3]);',
    setupCode: 'var stream = Stream.fromIterable([1, 1, 2, 2, 2, 3]);',
    expected: [1, 2, 3],
    sample: 'await stream.distinct().toList()',
    hints: ['distinct() removes consecutive duplicates', 'Based on equality'],
    tags: ['Stream', 'distinct', 'unique', 'async'],
  },

  {
    id: 'dart-async-298',
    category: 'Async/Await',
    difficulty: 'easy',
    title: 'Future Timeout',
    text: 'Add timeout to Future.',
    setup: 'Future<int> slow() => Future.delayed(Duration(seconds: 10), () => 42);',
    setupCode: 'Future<int> slow() => Future.delayed(Duration(seconds: 10), () => 42);',
    expected: 'TimeoutException',
    sample: 'await slow().timeout(Duration(milliseconds: 100))',
    hints: ['timeout() limits wait time', 'Throws TimeoutException'],
    tags: ['Future', 'timeout', 'limit', 'async'],
  },

  {
    id: 'dart-async-299',
    category: 'Async/Await',
    difficulty: 'hard',
    title: 'Completer Manual Control',
    text: 'Use Completer for manual Future control.',
    setup: 'import "dart:async";',
    setupCode: 'import "dart:async";',
    expected: 42,
    sample: 'var c = Completer<int>(); c.complete(42); await c.future',
    hints: ['Completer creates controllable Future', 'complete() resolves it'],
    tags: ['Completer', 'Future', 'manual', 'async'],
  },

  // ============================================================
  // Isolates (300-324)
  // ============================================================

  {
    id: 'dart-isolate-300',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Basic Isolate.run',
    text: 'Run computation in isolate with Isolate.run.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 120,
    sample: 'await Isolate.run(() => [1, 2, 3, 4, 5].fold(1, (a, b) => a * b))',
    hints: ['Isolate.run executes in separate isolate', 'Returns Future with result'],
    tags: ['Isolate', 'run', 'parallel'],
  },

  {
    id: 'dart-isolate-301',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Isolate with Message',
    text: 'Pass data to isolate computation.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 100,
    sample: 'int square(int n) => n * n;\nawait Isolate.run(() => square(10))',
    hints: ['Closures capture variables', 'Data is copied to isolate'],
    tags: ['Isolate', 'message', 'data'],
  },

  {
    id: 'dart-isolate-302',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Spawn Isolate with SendPort',
    text: 'Spawn isolate and communicate via ports.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'message received',
    sample:
      'void worker(SendPort port) { port.send("hello"); }\nvar rp = ReceivePort(); await Isolate.spawn(worker, rp.sendPort); await rp.first',
    hints: ['spawn() creates long-running isolate', 'Communicate via SendPort/ReceivePort'],
    tags: ['Isolate', 'spawn', 'SendPort'],
  },

  {
    id: 'dart-isolate-303',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Bidirectional Isolate Communication',
    text: 'Two-way communication between isolates.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'ping-pong pattern',
    sample:
      'void worker(SendPort mainPort) { var rp = ReceivePort(); mainPort.send(rp.sendPort); rp.listen((msg) => mainPort.send("pong")); }',
    hints: ['Worker sends its SendPort back', 'Main isolate can then send to worker'],
    tags: ['Isolate', 'bidirectional', 'ports'],
  },

  {
    id: 'dart-isolate-304',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'ReceivePort Stream',
    text: 'Use ReceivePort as Stream.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: [1, 2, 3],
    sample:
      'var rp = ReceivePort(); rp.sendPort.send(1); rp.sendPort.send(2); rp.sendPort.send(3); rp.close(); await rp.toList()',
    hints: ['ReceivePort implements Stream', 'Can use all Stream methods'],
    tags: ['ReceivePort', 'Stream', 'listen'],
  },

  {
    id: 'dart-isolate-305',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Isolate Error Handling',
    text: 'Handle errors from spawned isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'error caught',
    sample:
      'void worker(SendPort port) => throw Exception("error");\nvar rp = ReceivePort(); var errors = ReceivePort(); await Isolate.spawn(worker, rp.sendPort, onError: errors.sendPort)',
    hints: ['onError receives error messages', 'Format is [error, stackTrace]'],
    tags: ['Isolate', 'error', 'onError'],
  },

  {
    id: 'dart-isolate-306',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Isolate Exit Notification',
    text: 'Get notified when isolate exits.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'isolate exited',
    sample:
      'void worker(SendPort port) {}\nvar exit = ReceivePort(); await Isolate.spawn(worker, ReceivePort().sendPort, onExit: exit.sendPort); await exit.first',
    hints: ['onExit sends null when isolate ends', 'Useful for cleanup'],
    tags: ['Isolate', 'exit', 'onExit'],
  },

  {
    id: 'dart-isolate-307',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Isolate with Multiple Messages',
    text: 'Process multiple messages in isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: [2, 4, 6],
    sample:
      'void worker(SendPort main) { var rp = ReceivePort(); main.send(rp.sendPort); rp.listen((n) => main.send(n * 2)); }',
    hints: ['Worker listens for messages', 'Processes each and responds'],
    tags: ['Isolate', 'messages', 'loop'],
  },

  {
    id: 'dart-isolate-308',
    category: 'Isolates',
    difficulty: 'easy',
    title: 'Isolate.run with List',
    text: 'Process list in separate isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: [1, 4, 9, 16, 25],
    sample: 'await Isolate.run(() => [1, 2, 3, 4, 5].map((n) => n * n).toList())',
    hints: ['Lists are copied to isolate', 'Result is copied back'],
    tags: ['Isolate', 'run', 'List'],
  },

  {
    id: 'dart-isolate-309',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Kill Isolate',
    text: 'Terminate running isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'isolate killed',
    sample:
      'void worker(SendPort port) { while (true) {} }\nvar isolate = await Isolate.spawn(worker, ReceivePort().sendPort); isolate.kill()',
    hints: ['kill() terminates isolate', 'Use priority for immediate kill'],
    tags: ['Isolate', 'kill', 'terminate'],
  },

  {
    id: 'dart-isolate-310',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Pause and Resume Isolate',
    text: 'Pause isolate execution and resume.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'paused then resumed',
    sample:
      'var isolate = await Isolate.spawn(worker, port); var cap = isolate.pause(); isolate.resume(cap)',
    hints: ['pause() returns resumeCapability', 'resume() needs the capability'],
    tags: ['Isolate', 'pause', 'resume'],
  },

  {
    id: 'dart-isolate-311',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'TransferableTypedData',
    text: 'Transfer typed data efficiently.',
    setup: 'import "dart:isolate";\nimport "dart:typed_data";',
    setupCode: 'import "dart:isolate";\nimport "dart:typed_data";',
    expected: 'zero-copy transfer',
    sample: 'var data = TransferableTypedData.fromList([Uint8List.fromList([1, 2, 3])]);',
    hints: ['TransferableTypedData enables zero-copy', 'Efficient for large data'],
    tags: ['Isolate', 'TransferableTypedData', 'efficient'],
  },

  {
    id: 'dart-isolate-312',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Compute Function Pattern',
    text: 'Create compute-like helper function.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'compute pattern',
    sample: 'Future<R> compute<R>(R Function() fn) => Isolate.run(fn);',
    hints: ['Wrapper around Isolate.run', 'Flutter uses this pattern'],
    tags: ['Isolate', 'compute', 'pattern'],
  },

  {
    id: 'dart-isolate-313',
    category: 'Isolates',
    difficulty: 'easy',
    title: 'Current Isolate',
    text: 'Get current isolate reference.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'current isolate',
    sample: 'Isolate.current',
    hints: ['Isolate.current is the running isolate', 'Can get debugName'],
    tags: ['Isolate', 'current', 'reference'],
  },

  {
    id: 'dart-isolate-314',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Isolate Worker Pool',
    text: 'Create simple worker pool pattern.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'worker pool',
    sample: 'class WorkerPool { final List<SendPort> workers = []; }',
    hints: ['Pool manages multiple isolates', 'Distributes work among them'],
    tags: ['Isolate', 'pool', 'workers'],
  },

  {
    id: 'dart-isolate-315',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Debug Name for Isolate',
    text: 'Set debug name when spawning isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'named isolate',
    sample: 'await Isolate.spawn(worker, port, debugName: "myWorker")',
    hints: ['debugName helps in debugging', 'Visible in DevTools'],
    tags: ['Isolate', 'debugName', 'naming'],
  },

  {
    id: 'dart-isolate-316',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Isolate with JSON Message',
    text: 'Send complex data as JSON between isolates.',
    setup: 'import "dart:isolate";\nimport "dart:convert";',
    setupCode: 'import "dart:isolate";\nimport "dart:convert";',
    expected: 'JSON serialization',
    sample:
      'void worker(SendPort port) { var data = jsonDecode(msg); port.send(jsonEncode(result)); }',
    hints: ['Complex objects need serialization', 'JSON works across isolates'],
    tags: ['Isolate', 'JSON', 'serialize'],
  },

  {
    id: 'dart-isolate-317',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'RawReceivePort',
    text: 'Use RawReceivePort for handlers.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'handler called',
    sample: 'var rp = RawReceivePort((msg) => print(msg)); rp.sendPort.send("hello"); rp.close()',
    hints: ['RawReceivePort uses handler function', 'More efficient than Stream'],
    tags: ['RawReceivePort', 'handler', 'efficient'],
  },

  {
    id: 'dart-isolate-318',
    category: 'Isolates',
    difficulty: 'easy',
    title: 'Check Isolate Running',
    text: 'Check if in main isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'true for main',
    sample: 'Isolate.current.debugName == "main"',
    hints: ['Main isolate has name "main"', 'Custom isolates have custom names'],
    tags: ['Isolate', 'check', 'main'],
  },

  {
    id: 'dart-isolate-319',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Isolate Message Types',
    text: 'Understand what can be sent between isolates.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'primitives, lists, maps, SendPort',
    sample: '// Can send: null, bool, int, double, String, List, Map, SendPort, Capability',
    hints: ['Not all objects can be sent', 'Closures cannot be sent'],
    tags: ['Isolate', 'types', 'sendable'],
  },

  {
    id: 'dart-isolate-320',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Isolate.exit with Result',
    text: 'Exit isolate with final message.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'final result',
    sample: 'void worker(SendPort port) { Isolate.exit(port, "done"); }',
    hints: ['Isolate.exit sends message and exits', 'Efficient for one-shot workers'],
    tags: ['Isolate', 'exit', 'result'],
  },

  {
    id: 'dart-isolate-321',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Error Zone in Isolate',
    text: 'Handle uncaught errors in isolate.',
    setup: 'import "dart:isolate";\nimport "dart:async";',
    setupCode: 'import "dart:isolate";\nimport "dart:async";',
    expected: 'error handling',
    sample:
      'void worker(SendPort port) { runZonedGuarded(() { /* work */ }, (e, s) { port.send(e.toString()); }); }',
    hints: ['runZonedGuarded catches all errors', 'Send errors back to main'],
    tags: ['Isolate', 'zone', 'errors'],
  },

  {
    id: 'dart-isolate-322',
    category: 'Isolates',
    difficulty: 'medium',
    title: 'Capability for Control',
    text: 'Use Capability for isolate control.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'secure control',
    sample:
      'var pauseCap = isolate.pauseCapability;\nvar terminateCap = isolate.terminateCapability;',
    hints: ['Capabilities control isolate', 'Can be shared or kept private'],
    tags: ['Isolate', 'Capability', 'control'],
  },

  {
    id: 'dart-isolate-323',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Streaming Results from Isolate',
    text: 'Stream results from long-running isolate.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'streaming results',
    sample: 'void worker(SendPort port) { for (var i = 0; i < 10; i++) { port.send(i); } }',
    hints: ['Send multiple messages over time', 'Main receives as Stream'],
    tags: ['Isolate', 'stream', 'results'],
  },

  {
    id: 'dart-isolate-324',
    category: 'Isolates',
    difficulty: 'hard',
    title: 'Shared Memory Alternative',
    text: 'Use SendPort for shared state updates.',
    setup: 'import "dart:isolate";',
    setupCode: 'import "dart:isolate";',
    expected: 'state synchronization',
    sample: '// Isolates cannot share memory; use messages for state sync',
    hints: ['No shared memory between isolates', 'Message passing is the pattern'],
    tags: ['Isolate', 'state', 'synchronization'],
  },

  // ============================================================
  // Extensions (325-349)
  // ============================================================

  {
    id: 'dart-ext-325',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Basic String Extension',
    text: 'Create extension to reverse a string.',
    setup: '// Define extension on String',
    setupCode: '// Define extension on String',
    expected: 'olleh',
    sample:
      'extension StringExt on String { String get reversed => split("").reversed.join(""); }\n"hello".reversed',
    hints: ['extension keyword creates extension', 'on clause specifies target type'],
    tags: ['extension', 'String', 'getter'],
  },

  {
    id: 'dart-ext-326',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Extension Method',
    text: 'Add capitalize method to String.',
    setup: '// Extension with method',
    setupCode: '// Extension with method',
    expected: 'Hello',
    sample:
      'extension StringExt on String { String capitalize() => isEmpty ? this : this[0].toUpperCase() + substring(1); }\n"hello".capitalize()',
    hints: ['Methods in extension work like regular methods', 'this refers to extended object'],
    tags: ['extension', 'method', 'String'],
  },

  {
    id: 'dart-ext-327',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Extension on int',
    text: 'Add isEven getter via extension.',
    setup: '// Extension on int',
    setupCode: '// Extension on int',
    expected: true,
    sample: 'extension IntExt on int { bool get isPositive => this > 0; }\n5.isPositive',
    hints: ['Can extend any type', 'Access value with this'],
    tags: ['extension', 'int', 'getter'],
  },

  {
    id: 'dart-ext-328',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension on List',
    text: 'Add secondOrNull getter to List.',
    setup: '// Extension on List',
    setupCode: '// Extension on List',
    expected: 2,
    sample:
      'extension ListExt<T> on List<T> { T? get secondOrNull => length > 1 ? this[1] : null; }\n[1, 2, 3].secondOrNull',
    hints: ['Use generics for type-safe extensions', 'Return nullable for safe access'],
    tags: ['extension', 'List', 'generic'],
  },

  {
    id: 'dart-ext-329',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Named Extension',
    text: 'Create named extension for disambiguation.',
    setup: '// Named extension',
    setupCode: '// Named extension',
    expected: 'named extension used',
    sample:
      'extension NumberParsing on String { int parseInt() => int.parse(this); }\n"42".parseInt()',
    hints: ['Named extensions can be imported explicitly', 'Helps avoid conflicts'],
    tags: ['extension', 'named', 'import'],
  },

  {
    id: 'dart-ext-330',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension with Operator',
    text: 'Add operator to extension.',
    setup: '// Extension with operator',
    setupCode: '// Extension with operator',
    expected: [1, 2, 3, 4],
    sample:
      'extension ListOps<T> on List<T> { List<T> operator +(List<T> other) => [...this, ...other]; }\n[1, 2] + [3, 4]',
    hints: ['Can define operators in extensions', 'Same syntax as class operators'],
    tags: ['extension', 'operator', 'List'],
  },

  {
    id: 'dart-ext-331',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension on Nullable Type',
    text: 'Create extension on nullable String.',
    setup: '// Extension on String?',
    setupCode: '// Extension on String?',
    expected: '',
    sample:
      'extension NullableStringExt on String? { String get orEmpty => this ?? ""; }\nString? name = null; name.orEmpty',
    hints: ['Can extend nullable types', 'Handle null in extension'],
    tags: ['extension', 'nullable', 'null-safety'],
  },

  {
    id: 'dart-ext-332',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Generic Extension with Bounds',
    text: 'Extension with type bounds.',
    setup: '// Extension with bounds',
    setupCode: '// Extension with bounds',
    expected: 15,
    sample:
      'extension NumListExt<T extends num> on List<T> { T get sum => fold(0 as T, (a, b) => (a + b) as T); }\n[1, 2, 3, 4, 5].sum',
    hints: ['extends sets type bound', 'Limits extension to numeric lists'],
    tags: ['extension', 'generic', 'bounds'],
  },

  {
    id: 'dart-ext-333',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension Static Members',
    text: 'Note: Extensions cannot have static members.',
    setup: '// Extension limitation',
    setupCode: '// Extension limitation',
    expected: 'static not allowed',
    sample:
      '// extension Ext on String { static void foo() {} } // ERROR\n// Use top-level functions or classes for static behavior',
    hints: ['Extensions cannot have static members', 'Use companion objects pattern'],
    tags: ['extension', 'static', 'limitation'],
  },

  {
    id: 'dart-ext-334',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Extension on DateTime',
    text: 'Add isWeekend getter to DateTime.',
    setup: '// Extension on DateTime',
    setupCode: '// Extension on DateTime',
    expected: true,
    sample:
      'extension DateTimeExt on DateTime { bool get isWeekend => weekday == 6 || weekday == 7; }\nDateTime(2024, 1, 6).isWeekend',
    hints: ['Saturday is 6, Sunday is 7', 'weekday property gives day of week'],
    tags: ['extension', 'DateTime', 'getter'],
  },

  {
    id: 'dart-ext-335',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension on Map',
    text: 'Add getOrDefault method to Map.',
    setup: '// Extension on Map',
    setupCode: '// Extension on Map',
    expected: 0,
    sample:
      'extension MapExt<K, V> on Map<K, V> { V getOrDefault(K key, V defaultValue) => this[key] ?? defaultValue; }\n{"a": 1}.getOrDefault("b", 0)',
    hints: ['Works with any Map type', 'Returns default if key missing'],
    tags: ['extension', 'Map', 'default'],
  },

  {
    id: 'dart-ext-336',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension on Function',
    text: 'Add memoize to single-argument functions.',
    setup: '// Extension on Function',
    setupCode: '// Extension on Function',
    expected: 'memoized function',
    sample:
      'extension FunctionExt<T, R> on R Function(T) { R Function(T) get memoize { final cache = <T, R>{}; return (arg) => cache.putIfAbsent(arg, () => this(arg)); } }',
    hints: ['Function types can be extended', 'Cache results for efficiency'],
    tags: ['extension', 'Function', 'memoize'],
  },

  {
    id: 'dart-ext-337',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Extension on Iterable',
    text: 'Add firstOrNull to Iterable.',
    setup: '// Extension on Iterable',
    setupCode: '// Extension on Iterable',
    expected: null,
    sample:
      'extension IterableExt<T> on Iterable<T> { T? get firstOrNull => isEmpty ? null : first; }\n<int>[].firstOrNull',
    hints: ['Iterable is base of List, Set', 'Extension applies to all'],
    tags: ['extension', 'Iterable', 'null-safe'],
  },

  {
    id: 'dart-ext-338',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Chaining Extension Methods',
    text: 'Chain multiple extension methods.',
    setup: '// Chainable extensions',
    setupCode: '// Chainable extensions',
    expected: 'HELLO WORLD',
    sample:
      'extension StringChain on String { String trimAndUpper() => trim().toUpperCase(); }\n"  hello world  ".trimAndUpper()',
    hints: ['Return this or transformed value', 'Enables method chaining'],
    tags: ['extension', 'chain', 'fluent'],
  },

  {
    id: 'dart-ext-339',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension on Future',
    text: 'Add timeout with default to Future.',
    setup: '// Extension on Future',
    setupCode: '// Extension on Future',
    expected: 'default on timeout',
    sample:
      'extension FutureExt<T> on Future<T> { Future<T> timeoutWithDefault(Duration d, T def) => timeout(d, onTimeout: () => def); }',
    hints: ['Extend async types', 'Wrap existing methods'],
    tags: ['extension', 'Future', 'timeout'],
  },

  {
    id: 'dart-ext-340',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension on double',
    text: 'Add currency formatting to double.',
    setup: '// Extension on double',
    setupCode: '// Extension on double',
    expected: '$19.99',
    sample:
      'extension DoubleExt on double { String get asCurrency => "\\$${toStringAsFixed(2)}"; }\n19.99.asCurrency',
    hints: ['Format numbers in extension', 'Use string interpolation'],
    tags: ['extension', 'double', 'format'],
  },

  {
    id: 'dart-ext-341',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Extension on bool',
    text: 'Add toggle to bool.',
    setup: '// Extension on bool',
    setupCode: '// Extension on bool',
    expected: false,
    sample: 'extension BoolExt on bool { bool get toggled => !this; }\ntrue.toggled',
    hints: ['Simple inversion', 'Useful for state toggling'],
    tags: ['extension', 'bool', 'toggle'],
  },

  {
    id: 'dart-ext-342',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension with Private Helper',
    text: 'Use private functions in extension.',
    setup: '// Extension with helpers',
    setupCode: '// Extension with helpers',
    expected: 'helper used',
    sample:
      'String _helper(String s) => s.toUpperCase();\nextension StringExt on String { String process() => _helper(this); }',
    hints: ['Private helpers are file-scoped', 'Cannot be in extension body'],
    tags: ['extension', 'private', 'helper'],
  },

  {
    id: 'dart-ext-343',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension on Duration',
    text: 'Add human-readable format to Duration.',
    setup: '// Extension on Duration',
    setupCode: '// Extension on Duration',
    expected: '1h 30m',
    sample:
      'extension DurationExt on Duration { String get readable => "${inHours}h ${inMinutes % 60}m"; }\nDuration(hours: 1, minutes: 30).readable',
    hints: ['Access duration components', 'Format for display'],
    tags: ['extension', 'Duration', 'format'],
  },

  {
    id: 'dart-ext-344',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension Precedence',
    text: 'Understanding extension precedence.',
    setup: '// Extension precedence rules',
    setupCode: '// Extension precedence rules',
    expected: 'instance methods win',
    sample:
      '// 1. Instance methods take precedence\n// 2. More specific type extensions win\n// 3. Explicit extension call: ExtName(obj).method()',
    hints: ['Instance methods beat extensions', 'Explicit call resolves conflicts'],
    tags: ['extension', 'precedence', 'conflict'],
  },

  {
    id: 'dart-ext-345',
    category: 'Extensions',
    difficulty: 'easy',
    title: 'Anonymous Extension',
    text: 'Create unnamed extension.',
    setup: '// Anonymous extension',
    setupCode: '// Anonymous extension',
    expected: 'works locally',
    sample: 'extension on String { String get doubled => this + this; }\n"hi".doubled',
    hints: ['No name means no explicit import', 'Good for local use only'],
    tags: ['extension', 'anonymous', 'local'],
  },

  {
    id: 'dart-ext-346',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Extension on Record',
    text: 'Add extension to record type (Dart 3).',
    setup: '// Extension on record',
    setupCode: '// Extension on record',
    expected: 'ab',
    sample:
      'extension RecordExt on (String, String) { String get joined => $1 + $2; }\n("a", "b").joined',
    hints: ['Can extend specific record types', 'Access fields with $1, $2'],
    tags: ['extension', 'record', 'dart3'],
  },

  {
    id: 'dart-ext-347',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension on Type Alias',
    text: 'Extend a typedef type.',
    setup: '// Extension on typedef',
    setupCode: '// Extension on typedef',
    expected: 'extended alias',
    sample:
      'typedef IntList = List<int>;\nextension IntListExt on IntList { int get sum => fold(0, (a, b) => a + b); }',
    hints: ['Typedefs create type aliases', 'Extensions work on aliases'],
    tags: ['extension', 'typedef', 'alias'],
  },

  {
    id: 'dart-ext-348',
    category: 'Extensions',
    difficulty: 'medium',
    title: 'Show/Hide Extension',
    text: 'Import extension selectively.',
    setup: '// Selective extension import',
    setupCode: '// Selective extension import',
    expected: 'controlled import',
    sample: '// import "ext.dart" show MyExtension;\n// import "ext.dart" hide OtherExtension;',
    hints: ['show imports only named extension', 'hide excludes named extension'],
    tags: ['extension', 'import', 'show', 'hide'],
  },

  {
    id: 'dart-ext-349',
    category: 'Extensions',
    difficulty: 'hard',
    title: 'Extension vs Wrapper Class',
    text: 'When to use extension vs wrapper.',
    setup: '// Design decision',
    setupCode: '// Design decision',
    expected: 'choose appropriately',
    sample:
      '// Extension: adds methods, no state\n// Wrapper: can add state, fields\n// Extension: cannot override, no inheritance',
    hints: ['Extensions add behavior only', 'Wrappers when state needed'],
    tags: ['extension', 'wrapper', 'design'],
  },

  // ============================================================
  // Generics (350-374)
  // ============================================================

  {
    id: 'dart-generic-350',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Class',
    text: 'Create a generic Box class.',
    setup: '// Generic Box class',
    setupCode: '// Generic Box class',
    expected: 'Box<int> with value 42',
    sample: 'class Box<T> { final T value; Box(this.value); }\nvar box = Box<int>(42);',
    hints: ['T is type parameter', 'Specified when creating instance'],
    tags: ['generics', 'class', 'type-parameter'],
  },

  {
    id: 'dart-generic-351',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Function',
    text: 'Create a generic identity function.',
    setup: '// Generic function',
    setupCode: '// Generic function',
    expected: 42,
    sample: 'T identity<T>(T value) => value;\nidentity<int>(42)',
    hints: ['Type parameter on function', 'Inferred from argument'],
    tags: ['generics', 'function', 'identity'],
  },

  {
    id: 'dart-generic-352',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Method',
    text: 'Add generic method to class.',
    setup: '// Generic method',
    setupCode: '// Generic method',
    expected: 'generic method called',
    sample:
      'class Processor { T process<T>(T input) => input; }\nProcessor().process<String>("hello")',
    hints: ['Method can have own type parameter', 'Independent of class type'],
    tags: ['generics', 'method', 'class'],
  },

  {
    id: 'dart-generic-353',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Type Bounds with extends',
    text: 'Constrain generic to numeric types.',
    setup: '// Type bounds',
    setupCode: '// Type bounds',
    expected: 6,
    sample: 'T triple<T extends num>(T value) => (value * 3) as T;\ntriple<int>(2)',
    hints: ['extends sets upper bound', 'Can use num methods'],
    tags: ['generics', 'bounds', 'extends'],
  },

  {
    id: 'dart-generic-354',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Multiple Type Parameters',
    text: 'Create class with multiple type parameters.',
    setup: '// Multiple type params',
    setupCode: '// Multiple type params',
    expected: 'Pair<String, int>',
    sample:
      'class Pair<K, V> { final K key; final V value; Pair(this.key, this.value); }\nvar p = Pair<String, int>("age", 30);',
    hints: ['Comma separates type parameters', 'Each can have own bound'],
    tags: ['generics', 'multiple', 'pair'],
  },

  {
    id: 'dart-generic-355',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic with Covariance',
    text: 'Understand covariant generics.',
    setup: '// Covariance',
    setupCode: '// Covariance',
    expected: 'List<int> is List<num>',
    sample: 'List<int> ints = [1, 2, 3];\nList<num> nums = ints; // OK in Dart',
    hints: ['Dart generics are covariant', 'Subtype list assigns to supertype'],
    tags: ['generics', 'covariance', 'subtyping'],
  },

  {
    id: 'dart-generic-356',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Factory Constructor Generic',
    text: 'Use generic in factory constructor.',
    setup: '// Factory with generic',
    setupCode: '// Factory with generic',
    expected: 'factory creates instance',
    sample:
      'class Cache<T> { static final _instances = <Type, dynamic>{}; factory Cache() => _instances.putIfAbsent(T, () => Cache._()) as Cache<T>; Cache._(); }',
    hints: ['Factory can use T for caching', 'Type reification at runtime'],
    tags: ['generics', 'factory', 'singleton'],
  },

  {
    id: 'dart-generic-357',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Type Inference',
    text: 'Let Dart infer generic type.',
    setup: '// Type inference',
    setupCode: '// Type inference',
    expected: 'inferred as int',
    sample:
      'var list = [1, 2, 3]; // List<int> inferred\nT first<T>(List<T> list) => list.first;\nfirst([1, 2, 3]) // T inferred as int',
    hints: ['Dart infers from context', 'No need to specify explicitly'],
    tags: ['generics', 'inference', 'automatic'],
  },

  {
    id: 'dart-generic-358',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic Typedef',
    text: 'Create typedef for generic function type.',
    setup: '// Generic typedef',
    setupCode: '// Generic typedef',
    expected: 'typedef used',
    sample:
      'typedef Compare<T> = int Function(T a, T b);\nCompare<int> intCompare = (a, b) => a - b;',
    hints: ['typedef creates function type alias', 'Can include generics'],
    tags: ['generics', 'typedef', 'function'],
  },

  {
    id: 'dart-generic-359',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Generic Constraints Chain',
    text: 'Complex type constraint with multiple bounds.',
    setup: '// Multiple constraints',
    setupCode: '// Multiple constraints',
    expected: 'constrained type',
    sample:
      '// Dart only allows one extends, use abstract class pattern:\nabstract class Serializable { String serialize(); }\nclass Handler<T extends Comparable<T>> {}',
    hints: ['Single extends bound in Dart', 'Use interfaces for multiple'],
    tags: ['generics', 'constraints', 'multiple'],
  },

  {
    id: 'dart-generic-360',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic with Default Type',
    text: 'Note: Dart does not support default type parameters.',
    setup: '// No default types',
    setupCode: '// No default types',
    expected: 'use factory instead',
    sample:
      '// Cannot do: class Box<T = Object>\n// Workaround: factory or static method\nclass Box<T> { static Box<Object> createDefault() => Box<Object>(); }',
    hints: ['No default type parameter syntax', 'Use factory methods as alternative'],
    tags: ['generics', 'default', 'workaround'],
  },

  {
    id: 'dart-generic-361',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Collection Creation',
    text: 'Create typed collection explicitly.',
    setup: '// Explicit generic collection',
    setupCode: '// Explicit generic collection',
    expected: [1, 2, 3],
    sample:
      'var list = <int>[1, 2, 3];\nvar set = <String>{"a", "b"};\nvar map = <String, int>{"a": 1};',
    hints: ['<Type> before literal', 'Ensures type safety'],
    tags: ['generics', 'collection', 'literal'],
  },

  {
    id: 'dart-generic-362',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Runtime Type Check with Generic',
    text: 'Check generic type at runtime.',
    setup: '// Runtime type check',
    setupCode: '// Runtime type check',
    expected: 'type available at runtime',
    sample:
      'class TypedBox<T> { bool isType<S>() => T == S; }\nTypedBox<int>().isType<int>() // true',
    hints: ['T is available at runtime', 'Can compare with =='],
    tags: ['generics', 'runtime', 'type-check'],
  },

  {
    id: 'dart-generic-363',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic Extension',
    text: 'Create generic extension method.',
    setup: '// Generic extension',
    setupCode: '// Generic extension',
    expected: 'extended generically',
    sample:
      'extension ListExt<T> on List<T> { T? get safeFirst => isEmpty ? null : first; }\n[1, 2, 3].safeFirst',
    hints: ['Extension can have type parameter', 'Matches extended type'],
    tags: ['generics', 'extension', 'type-safe'],
  },

  {
    id: 'dart-generic-364',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Generic with Interface',
    text: 'Implement generic interface.',
    setup: '// Generic interface',
    setupCode: '// Generic interface',
    expected: 'interface implemented',
    sample:
      'abstract class Repository<T> { Future<T> findById(int id); Future<void> save(T entity); }\nclass UserRepo implements Repository<User> { /* ... */ }',
    hints: ['Interface can be generic', 'Implementing class specifies type'],
    tags: ['generics', 'interface', 'repository'],
  },

  {
    id: 'dart-generic-365',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic Mixin',
    text: 'Create generic mixin.',
    setup: '// Generic mixin',
    setupCode: '// Generic mixin',
    expected: 'mixin with type param',
    sample:
      'mixin Storage<T> { final List<T> _items = []; void add(T item) => _items.add(item); List<T> get items => _items; }',
    hints: ['Mixin can have type parameter', 'Applied to classes'],
    tags: ['generics', 'mixin', 'storage'],
  },

  {
    id: 'dart-generic-366',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Return Type',
    text: 'Function with generic return type.',
    setup: '// Generic return',
    setupCode: '// Generic return',
    expected: 'returns any type',
    sample:
      'T parse<T>(String json, T Function(Map) fromJson) => fromJson(jsonDecode(json));\nparse<User>(jsonStr, User.fromJson)',
    hints: ['Return type is generic', 'Caller specifies expected type'],
    tags: ['generics', 'return', 'function'],
  },

  {
    id: 'dart-generic-367',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Reified Generics',
    text: 'Access generic type at runtime.',
    setup: '// Reified generics',
    setupCode: '// Reified generics',
    expected: 'type available',
    sample:
      'class TypeInfo<T> { Type get type => T; String get name => T.toString(); }\nTypeInfo<List<int>>().name // "List<int>"',
    hints: ['Dart has reified generics', 'Full type info at runtime'],
    tags: ['generics', 'reified', 'runtime'],
  },

  {
    id: 'dart-generic-368',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic with void',
    text: 'Handle void in generic context.',
    setup: '// Generic void',
    setupCode: '// Generic void',
    expected: 'void as type arg',
    sample:
      'class Result<T> { final T? value; Result(this.value); }\nResult<void> noValue = Result(null);',
    hints: ['void can be type argument', 'Useful for no-return scenarios'],
    tags: ['generics', 'void', 'result'],
  },

  {
    id: 'dart-generic-369',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Self-Referential Generic',
    text: 'Create self-referential type bound.',
    setup: '// Self-referential',
    setupCode: '// Self-referential',
    expected: 'fluent builder pattern',
    sample: 'abstract class Builder<T extends Builder<T>> { T addItem(String item); T build(); }',
    hints: ['T extends itself', 'Enables fluent APIs'],
    tags: ['generics', 'self-referential', 'builder'],
  },

  {
    id: 'dart-generic-370',
    category: 'Generics',
    difficulty: 'easy',
    title: 'Generic Named Constructor',
    text: 'Named constructor in generic class.',
    setup: '// Named constructor',
    setupCode: '// Named constructor',
    expected: 'named constructor works',
    sample:
      'class Container<T> { final T value; Container(this.value); Container.empty() : value = null as T; }\nContainer<int>.empty()',
    hints: ['Named constructors work with generics', 'Type param applies'],
    tags: ['generics', 'constructor', 'named'],
  },

  {
    id: 'dart-generic-371',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic with Future',
    text: 'Combine generic with Future.',
    setup: '// Generic Future',
    setupCode: '// Generic Future',
    expected: 'async generic',
    sample:
      'Future<T> fetch<T>(String url, T Function(dynamic) parser) async { var data = await http.get(url); return parser(data); }',
    hints: ['Future wraps generic type', 'Common in async APIs'],
    tags: ['generics', 'Future', 'async'],
  },

  {
    id: 'dart-generic-372',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Generic Variance Annotation',
    text: 'Use variance annotations (in/out/inout).',
    setup: '// Variance annotations',
    setupCode: '// Variance annotations',
    expected: 'controlled variance',
    sample:
      '// Dart uses declaration-site variance\n// class Box<out T> {} // covariant\n// class Box<in T> {} // contravariant\n// Currently Dart is covariant by default',
    hints: ['Dart 3+ has variance keywords', 'Controls subtype relationships'],
    tags: ['generics', 'variance', 'out', 'in'],
  },

  {
    id: 'dart-generic-373',
    category: 'Generics',
    difficulty: 'medium',
    title: 'Generic Callback Pattern',
    text: 'Use generic for callback types.',
    setup: '// Generic callback',
    setupCode: '// Generic callback',
    expected: 'typed callbacks',
    sample:
      'class EventEmitter<T> { void Function(T)? _listener; void on(void Function(T) callback) => _listener = callback; void emit(T event) => _listener?.call(event); }',
    hints: ['Callback parameter is generic', 'Type-safe event handling'],
    tags: ['generics', 'callback', 'events'],
  },

  {
    id: 'dart-generic-374',
    category: 'Generics',
    difficulty: 'hard',
    title: 'Generic Type Erasure Check',
    text: 'Verify Dart keeps generic info at runtime.',
    setup: '// No erasure in Dart',
    setupCode: '// No erasure in Dart',
    expected: 'full type info kept',
    sample:
      'var list = <int>[1, 2, 3];\nprint(list is List<int>); // true\nprint(list is List<String>); // false',
    hints: ['Dart has no type erasure', 'Full generics at runtime'],
    tags: ['generics', 'reified', 'no-erasure'],
  },
];

export default dartProblems;
