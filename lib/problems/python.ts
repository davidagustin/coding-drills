import type { Problem } from '../types';

/**
 * Python problems for coding drills
 * Covers list methods, string methods, dictionary methods, set methods, and built-in functions
 */

export const pythonProblems: Problem[] = [
  // ============================================================
  // LIST METHODS - List Comprehensions (15+ problems)
  // ============================================================
  {
    id: 'py-list-001',
    category: 'list',
    difficulty: 'easy',
    title: 'Double Each Number',
    text: 'Double each number in the list using a list comprehension',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [2, 4, 6, 8, 10],
    sample: '[x * 2 for x in nums]',
    hints: ['Use a list comprehension with the pattern [expression for item in iterable]'],
    validPatterns: [
      /\[\s*\w+\s*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\]/,
      /\[\s*2\s*\*\s*\w+\s+for\s+\w+\s+in\s+nums\s*\]/,
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*2/,
    ],
    tags: ['list-comprehension', 'basic'],
  },
  {
    id: 'py-list-002',
    category: 'list',
    difficulty: 'easy',
    title: 'Square Each Number',
    text: 'Square each number in the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [1, 4, 9, 16, 25],
    sample: '[x ** 2 for x in nums]',
    hints: ['Use ** for exponentiation in Python'],
    validPatterns: [
      /\[\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\]/,
      /\[\s*pow\s*\(\s*\w+\s*,\s*2\s*\)\s+for\s+\w+\s+in\s+nums\s*\]/,
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\*\s*2/,
    ],
    tags: ['list-comprehension', 'math'],
  },
  {
    id: 'py-list-003',
    category: 'list',
    difficulty: 'easy',
    title: 'Filter Even Numbers',
    text: 'Filter the list to only include even numbers',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    expected: [2, 4, 6, 8, 10],
    sample: '[x for x in nums if x % 2 == 0]',
    hints: ['Use a conditional in the list comprehension: [x for x in iterable if condition]'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+not\s+\w+\s*%\s*2\s*\]/,
      /list\s*\(\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*%\s*2\s*==\s*0/,
    ],
    tags: ['list-comprehension', 'filter'],
  },
  {
    id: 'py-list-004',
    category: 'list',
    difficulty: 'easy',
    title: 'Filter Odd Numbers',
    text: 'Filter the list to only include odd numbers',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    expected: [1, 3, 5, 7, 9],
    sample: '[x for x in nums if x % 2 != 0]',
    hints: ['Odd numbers have a remainder of 1 when divided by 2'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*!=\s*0\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*1\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*\]/,
      /list\s*\(\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*%\s*2/,
    ],
    tags: ['list-comprehension', 'filter'],
  },
  {
    id: 'py-list-005',
    category: 'list',
    difficulty: 'easy',
    title: 'Filter Numbers Greater Than 5',
    text: 'Filter the list to only include numbers greater than 5',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    expected: [6, 7, 8, 9, 10],
    sample: '[x for x in nums if x > 5]',
    hints: ['Use a comparison operator in the condition'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*>\s*5\s*\]/,
      /list\s*\(\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*>\s*5/,
    ],
    tags: ['list-comprehension', 'filter'],
  },
  {
    id: 'py-list-006',
    category: 'list',
    difficulty: 'medium',
    title: 'Double Even Numbers Only',
    text: 'Double only the even numbers in the list, keeping the result as a list of doubled values',
    setup: 'nums = [1, 2, 3, 4, 5, 6]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6]',
    expected: [4, 8, 12],
    sample: '[x * 2 for x in nums if x % 2 == 0]',
    hints: ['Combine transformation and filtering in one comprehension'],
    validPatterns: [
      /\[\s*\w+\s*\*\s*2\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s*\]/,
      /\[\s*2\s*\*\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s*\]/,
    ],
    tags: ['list-comprehension', 'filter', 'transform'],
  },
  {
    id: 'py-list-007',
    category: 'list',
    difficulty: 'easy',
    title: 'Convert to Uppercase',
    text: 'Convert each string in the list to uppercase',
    setup: 'words = ["hello", "world", "python"]',
    setupCode: 'words = ["hello", "world", "python"]',
    expected: ['HELLO', 'WORLD', 'PYTHON'],
    sample: '[w.upper() for w in words]',
    hints: ['Use the upper() string method'],
    validPatterns: [
      /\[\s*\w+\.upper\s*\(\s*\)\s+for\s+\w+\s+in\s+words\s*\]/,
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\.upper\s*\(\s*\)/,
      /list\s*\(\s*map\s*\(\s*str\.upper/,
    ],
    tags: ['list-comprehension', 'string'],
  },
  {
    id: 'py-list-008',
    category: 'list',
    difficulty: 'medium',
    title: 'Map with Lambda',
    text: 'Use map() and lambda to triple each number in the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [3, 6, 9, 12, 15],
    sample: 'list(map(lambda x: x * 3, nums))',
    hints: ['Use map() with a lambda function and convert to list'],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*3\s*,\s*nums\s*\)\s*\)/,
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*3\s*\*\s*\w+\s*,\s*nums\s*\)\s*\)/,
      /\[\s*\w+\s*\*\s*3\s+for\s+\w+\s+in\s+nums\s*\]/,
    ],
    tags: ['map', 'lambda'],
  },
  {
    id: 'py-list-009',
    category: 'list',
    difficulty: 'easy',
    title: 'Sort List Ascending',
    text: 'Sort the list in ascending order (return a new sorted list)',
    setup: 'nums = [5, 2, 8, 1, 9, 3]',
    setupCode: 'nums = [5, 2, 8, 1, 9, 3]',
    expected: [1, 2, 3, 5, 8, 9],
    sample: 'sorted(nums)',
    hints: ['Use the sorted() built-in function'],
    validPatterns: [/sorted\s*\(\s*nums\s*\)/, /sorted\s*\(\s*nums\s*,\s*reverse\s*=\s*False\s*\)/],
    tags: ['sorting', 'built-in'],
  },
  {
    id: 'py-list-010',
    category: 'list',
    difficulty: 'easy',
    title: 'Sort List Descending',
    text: 'Sort the list in descending order (return a new sorted list)',
    setup: 'nums = [5, 2, 8, 1, 9, 3]',
    setupCode: 'nums = [5, 2, 8, 1, 9, 3]',
    expected: [9, 8, 5, 3, 2, 1],
    sample: 'sorted(nums, reverse=True)',
    hints: ['Use the reverse parameter of sorted()'],
    validPatterns: [
      /sorted\s*\(\s*nums\s*,\s*reverse\s*=\s*True\s*\)/,
      /sorted\s*\(\s*nums\s*\)\s*\[\s*::\s*-1\s*\]/,
      /list\s*\(\s*reversed\s*\(\s*sorted\s*\(\s*nums\s*\)\s*\)\s*\)/,
    ],
    tags: ['sorting', 'built-in'],
  },
  {
    id: 'py-list-011',
    category: 'list',
    difficulty: 'easy',
    title: 'Reverse a List',
    text: 'Reverse the order of elements in the list (return a new list)',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [5, 4, 3, 2, 1],
    sample: 'list(reversed(nums))',
    hints: ['Use reversed() or slice notation [::-1]'],
    validPatterns: [/list\s*\(\s*reversed\s*\(\s*nums\s*\)\s*\)/, /nums\s*\[\s*::\s*-1\s*\]/],
    tags: ['reverse', 'built-in'],
  },
  {
    id: 'py-list-012',
    category: 'list',
    difficulty: 'easy',
    title: 'Sum of List',
    text: 'Calculate the sum of all numbers in the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: 15,
    sample: 'sum(nums)',
    hints: ['Use the sum() built-in function'],
    validPatterns: [/sum\s*\(\s*nums\s*\)/],
    tags: ['aggregation', 'built-in'],
  },
  {
    id: 'py-list-013',
    category: 'list',
    difficulty: 'easy',
    title: 'Find Maximum',
    text: 'Find the maximum value in the list',
    setup: 'nums = [3, 7, 2, 9, 4, 1]',
    setupCode: 'nums = [3, 7, 2, 9, 4, 1]',
    expected: 9,
    sample: 'max(nums)',
    hints: ['Use the max() built-in function'],
    validPatterns: [/max\s*\(\s*nums\s*\)/, /sorted\s*\(\s*nums\s*\)\s*\[\s*-1\s*\]/],
    tags: ['aggregation', 'built-in'],
  },
  {
    id: 'py-list-014',
    category: 'list',
    difficulty: 'easy',
    title: 'Find Minimum',
    text: 'Find the minimum value in the list',
    setup: 'nums = [3, 7, 2, 9, 4, 1]',
    setupCode: 'nums = [3, 7, 2, 9, 4, 1]',
    expected: 1,
    sample: 'min(nums)',
    hints: ['Use the min() built-in function'],
    validPatterns: [/min\s*\(\s*nums\s*\)/, /sorted\s*\(\s*nums\s*\)\s*\[\s*0\s*\]/],
    tags: ['aggregation', 'built-in'],
  },
  {
    id: 'py-list-015',
    category: 'list',
    difficulty: 'easy',
    title: 'List Length',
    text: 'Find the length of the list',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7]',
    expected: 7,
    sample: 'len(nums)',
    hints: ['Use the len() built-in function'],
    validPatterns: [/len\s*\(\s*nums\s*\)/],
    tags: ['built-in'],
  },
  {
    id: 'py-list-016',
    category: 'list',
    difficulty: 'medium',
    title: 'Check Any Positive',
    text: 'Check if any number in the list is positive',
    setup: 'nums = [-1, -2, 3, -4, -5]',
    setupCode: 'nums = [-1, -2, 3, -4, -5]',
    expected: true,
    sample: 'any(x > 0 for x in nums)',
    hints: ['Use any() with a generator expression'],
    validPatterns: [
      /any\s*\(\s*\w+\s*>\s*0\s+for\s+\w+\s+in\s+nums\s*\)/,
      /any\s*\(\s*\[\s*\w+\s*>\s*0\s+for\s+\w+\s+in\s+nums\s*\]\s*\)/,
    ],
    tags: ['any', 'generator'],
  },
  {
    id: 'py-list-017',
    category: 'list',
    difficulty: 'medium',
    title: 'Check All Positive',
    text: 'Check if all numbers in the list are positive',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: true,
    sample: 'all(x > 0 for x in nums)',
    hints: ['Use all() with a generator expression'],
    validPatterns: [
      /all\s*\(\s*\w+\s*>\s*0\s+for\s+\w+\s+in\s+nums\s*\)/,
      /all\s*\(\s*\[\s*\w+\s*>\s*0\s+for\s+\w+\s+in\s+nums\s*\]\s*\)/,
    ],
    tags: ['all', 'generator'],
  },
  {
    id: 'py-list-018',
    category: 'list',
    difficulty: 'medium',
    title: 'Zip Two Lists',
    text: 'Combine two lists into a list of tuples using zip. The result should be a list containing tuples like [("Alice", 25), ("Bob", 30), ("Charlie", 35)].',
    setup: 'names = ["Alice", "Bob", "Charlie"]\nages = [25, 30, 35]',
    setupCode: 'names = ["Alice", "Bob", "Charlie"]\nages = [25, 30, 35]',
    expected: [
      ['Alice', 25],
      ['Bob', 30],
      ['Charlie', 35],
    ],
    sample: 'list(zip(names, ages))',
    hints: [
      'Use zip() to combine iterables element by element',
      'zip() returns tuples, which are displayed similar to lists in output',
    ],
    validPatterns: [
      /list\s*\(\s*zip\s*\(\s*names\s*,\s*ages\s*\)\s*\)/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+zip\s*\(\s*names\s*,\s*ages\s*\)\s*\]/,
      /\[\s*tuple\s*\(\s*\[\s*\w+\s*,\s*\w+\s*\]\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+zip/,
    ],
    tags: ['zip', 'tuple'],
  },
  {
    id: 'py-list-019',
    category: 'list',
    difficulty: 'medium',
    title: 'Enumerate with Index',
    text: 'Create a list of tuples with (index, value) pairs using enumerate. The result should be [(0, "apple"), (1, "banana"), (2, "cherry")].',
    setup: 'fruits = ["apple", "banana", "cherry"]',
    setupCode: 'fruits = ["apple", "banana", "cherry"]',
    expected: [
      [0, 'apple'],
      [1, 'banana'],
      [2, 'cherry'],
    ],
    sample: 'list(enumerate(fruits))',
    hints: [
      'Use enumerate() to get index and value pairs',
      'enumerate() yields tuples of (index, element)',
    ],
    validPatterns: [
      /list\s*\(\s*enumerate\s*\(\s*fruits\s*\)\s*\)/,
      /\[\s*\(\s*i\s*,\s*\w+\s*\)\s+for\s+i\s*,\s*\w+\s+in\s+enumerate\s*\(\s*fruits\s*\)\s*\]/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+enumerate\s*\(\s*fruits\s*\)\s*\]/,
    ],
    tags: ['enumerate'],
  },
  {
    id: 'py-list-020',
    category: 'list',
    difficulty: 'easy',
    title: 'Count Occurrences',
    text: 'Count how many times 3 appears in the list',
    setup: 'nums = [1, 3, 2, 3, 4, 3, 5]',
    setupCode: 'nums = [1, 3, 2, 3, 4, 3, 5]',
    expected: 3,
    sample: 'nums.count(3)',
    hints: ['Use the count() method on lists'],
    validPatterns: [
      /nums\.count\s*\(\s*3\s*\)/,
      /sum\s*\(\s*1\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*==\s*3\s*\)/,
      /len\s*\(\s*\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*==\s*3\s*\]\s*\)/,
    ],
    tags: ['count', 'list-method'],
  },
  {
    id: 'py-list-021',
    category: 'list',
    difficulty: 'easy',
    title: 'Find Index',
    text: 'Find the index of the first occurrence of "banana"',
    setup: 'fruits = ["apple", "banana", "cherry", "banana"]',
    setupCode: 'fruits = ["apple", "banana", "cherry", "banana"]',
    expected: 1,
    sample: 'fruits.index("banana")',
    hints: ['Use the index() method on lists'],
    validPatterns: [/fruits\.index\s*\(\s*["']banana["']\s*\)/],
    tags: ['index', 'list-method'],
  },
  {
    id: 'py-list-022',
    category: 'list',
    difficulty: 'medium',
    title: 'Flatten Nested List',
    text: 'Flatten a 2D list into a 1D list',
    setup: 'matrix = [[1, 2], [3, 4], [5, 6]]',
    setupCode: 'matrix = [[1, 2], [3, 4], [5, 6]]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: '[x for row in matrix for x in row]',
    hints: ['Use a nested list comprehension'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+matrix\s+for\s+\w+\s+in\s+\w+\s*\]/,
      /sum\s*\(\s*matrix\s*,\s*\[\s*\]\s*\)/,
    ],
    tags: ['list-comprehension', 'nested'],
  },
  {
    id: 'py-list-023',
    category: 'list',
    difficulty: 'medium',
    title: 'Sum with Map',
    text: 'Use map and sum to calculate the sum of squared values',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: 55,
    sample: 'sum(map(lambda x: x ** 2, nums))',
    hints: ['Combine map() with sum()'],
    validPatterns: [
      /sum\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\*\s*2\s*,\s*nums\s*\)\s*\)/,
      /sum\s*\(\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\)/,
      /sum\s*\(\s*\[\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\]\s*\)/,
    ],
    tags: ['map', 'sum', 'lambda'],
  },

  // ============================================================
  // STRING METHODS (15+ problems)
  // ============================================================
  {
    id: 'py-str-001',
    category: 'string',
    difficulty: 'easy',
    title: 'Split String',
    text: 'Split the sentence into a list of words',
    setup: 'sentence = "hello world python"',
    setupCode: 'sentence = "hello world python"',
    expected: ['hello', 'world', 'python'],
    sample: 'sentence.split()',
    hints: ['Use the split() method on strings'],
    validPatterns: [
      /sentence\.split\s*\(\s*\)/,
      /sentence\.split\s*\(\s*["']\s*["']\s*\)/,
      /sentence\.split\s*\(\s*" "\s*\)/,
    ],
    tags: ['split', 'string-method'],
  },
  {
    id: 'py-str-002',
    category: 'string',
    difficulty: 'easy',
    title: 'Split by Comma',
    text: 'Split the CSV string into a list of values',
    setup: 'csv = "apple,banana,cherry"',
    setupCode: 'csv = "apple,banana,cherry"',
    expected: ['apple', 'banana', 'cherry'],
    sample: 'csv.split(",")',
    hints: ['Pass the delimiter to split()'],
    validPatterns: [/csv\.split\s*\(\s*["'],["']\s*\)/],
    tags: ['split', 'string-method'],
  },
  {
    id: 'py-str-003',
    category: 'string',
    difficulty: 'easy',
    title: 'Join List into String',
    text: 'Join the list of words with spaces',
    setup: 'words = ["hello", "world", "python"]',
    setupCode: 'words = ["hello", "world", "python"]',
    expected: 'hello world python',
    sample: '" ".join(words)',
    hints: ['Use the join() method with a space separator'],
    validPatterns: [/["']\s["']\.join\s*\(\s*words\s*\)/, /" "\.join\s*\(\s*words\s*\)/],
    tags: ['join', 'string-method'],
  },
  {
    id: 'py-str-004',
    category: 'string',
    difficulty: 'easy',
    title: 'Join with Comma',
    text: 'Join the list of items with commas',
    setup: 'items = ["apple", "banana", "cherry"]',
    setupCode: 'items = ["apple", "banana", "cherry"]',
    expected: 'apple,banana,cherry',
    sample: '",".join(items)',
    hints: ['Use comma as the separator in join()'],
    validPatterns: [/["'],["']\.join\s*\(\s*items\s*\)/],
    tags: ['join', 'string-method'],
  },
  {
    id: 'py-str-005',
    category: 'string',
    difficulty: 'easy',
    title: 'Strip Whitespace',
    text: 'Remove leading and trailing whitespace from the string',
    setup: 'text = "  hello world  "',
    setupCode: 'text = "  hello world  "',
    expected: 'hello world',
    sample: 'text.strip()',
    hints: ['Use the strip() method'],
    validPatterns: [/text\.strip\s*\(\s*\)/],
    tags: ['strip', 'string-method'],
  },
  {
    id: 'py-str-006',
    category: 'string',
    difficulty: 'easy',
    title: 'Upper Case',
    text: 'Convert the string to uppercase',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'HELLO WORLD',
    sample: 'text.upper()',
    hints: ['Use the upper() method'],
    validPatterns: [/text\.upper\s*\(\s*\)/],
    tags: ['upper', 'string-method'],
  },
  {
    id: 'py-str-007',
    category: 'string',
    difficulty: 'easy',
    title: 'Lower Case',
    text: 'Convert the string to lowercase',
    setup: 'text = "HELLO WORLD"',
    setupCode: 'text = "HELLO WORLD"',
    expected: 'hello world',
    sample: 'text.lower()',
    hints: ['Use the lower() method'],
    validPatterns: [/text\.lower\s*\(\s*\)/],
    tags: ['lower', 'string-method'],
  },
  {
    id: 'py-str-008',
    category: 'string',
    difficulty: 'easy',
    title: 'Title Case',
    text: 'Convert the string to title case',
    setup: 'text = "hello world python"',
    setupCode: 'text = "hello world python"',
    expected: 'Hello World Python',
    sample: 'text.title()',
    hints: ['Use the title() method'],
    validPatterns: [/text\.title\s*\(\s*\)/],
    tags: ['title', 'string-method'],
  },
  {
    id: 'py-str-009',
    category: 'string',
    difficulty: 'easy',
    title: 'Capitalize',
    text: 'Capitalize the first character of the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'Hello world',
    sample: 'text.capitalize()',
    hints: ['Use the capitalize() method'],
    validPatterns: [/text\.capitalize\s*\(\s*\)/],
    tags: ['capitalize', 'string-method'],
  },
  {
    id: 'py-str-010',
    category: 'string',
    difficulty: 'easy',
    title: 'Replace Substring',
    text: 'Replace "world" with "Python" in the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'hello Python',
    sample: 'text.replace("world", "Python")',
    hints: ['Use the replace() method'],
    validPatterns: [/text\.replace\s*\(\s*["']world["']\s*,\s*["']Python["']\s*\)/],
    tags: ['replace', 'string-method'],
  },
  {
    id: 'py-str-011',
    category: 'string',
    difficulty: 'easy',
    title: 'Find Substring',
    text: 'Find the index of "world" in the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 6,
    sample: 'text.find("world")',
    hints: ['Use the find() method'],
    validPatterns: [
      /text\.find\s*\(\s*["']world["']\s*\)/,
      /text\.index\s*\(\s*["']world["']\s*\)/,
    ],
    tags: ['find', 'string-method'],
  },
  {
    id: 'py-str-012',
    category: 'string',
    difficulty: 'easy',
    title: 'Count Substring',
    text: 'Count how many times "l" appears in the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 3,
    sample: 'text.count("l")',
    hints: ['Use the count() method'],
    validPatterns: [/text\.count\s*\(\s*["']l["']\s*\)/],
    tags: ['count', 'string-method'],
  },
  {
    id: 'py-str-013',
    category: 'string',
    difficulty: 'easy',
    title: 'Starts With',
    text: 'Check if the string starts with "hello"',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: true,
    sample: 'text.startswith("hello")',
    hints: ['Use the startswith() method'],
    validPatterns: [/text\.startswith\s*\(\s*["']hello["']\s*\)/],
    tags: ['startswith', 'string-method'],
  },
  {
    id: 'py-str-014',
    category: 'string',
    difficulty: 'easy',
    title: 'Ends With',
    text: 'Check if the string ends with "world"',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: true,
    sample: 'text.endswith("world")',
    hints: ['Use the endswith() method'],
    validPatterns: [/text\.endswith\s*\(\s*["']world["']\s*\)/],
    tags: ['endswith', 'string-method'],
  },
  {
    id: 'py-str-015',
    category: 'string',
    difficulty: 'easy',
    title: 'Is Digit',
    text: 'Check if the string contains only digits',
    setup: 'text = "12345"',
    setupCode: 'text = "12345"',
    expected: true,
    sample: 'text.isdigit()',
    hints: ['Use the isdigit() method'],
    validPatterns: [/text\.isdigit\s*\(\s*\)/, /text\.isnumeric\s*\(\s*\)/],
    tags: ['isdigit', 'string-method'],
  },
  {
    id: 'py-str-016',
    category: 'string',
    difficulty: 'easy',
    title: 'Is Alpha',
    text: 'Check if the string contains only alphabetic characters',
    setup: 'text = "hello"',
    setupCode: 'text = "hello"',
    expected: true,
    sample: 'text.isalpha()',
    hints: ['Use the isalpha() method'],
    validPatterns: [/text\.isalpha\s*\(\s*\)/],
    tags: ['isalpha', 'string-method'],
  },
  {
    id: 'py-str-017',
    category: 'string',
    difficulty: 'easy',
    title: 'Is Alphanumeric',
    text: 'Check if the string contains only alphanumeric characters',
    setup: 'text = "hello123"',
    setupCode: 'text = "hello123"',
    expected: true,
    sample: 'text.isalnum()',
    hints: ['Use the isalnum() method'],
    validPatterns: [/text\.isalnum\s*\(\s*\)/],
    tags: ['isalnum', 'string-method'],
  },
  {
    id: 'py-str-018',
    category: 'string',
    difficulty: 'medium',
    title: 'F-String Formatting',
    text: 'Create a formatted string with the name and age using f-string',
    setup: 'name = "Alice"\nage = 30',
    setupCode: 'name = "Alice"\nage = 30',
    expected: 'Alice is 30 years old',
    sample: 'f"{name} is {age} years old"',
    hints: ['Use f-string syntax: f"text {variable}"'],
    validPatterns: [
      /f["']\{name\}\s+is\s+\{age\}\s+years\s+old["']/,
      /f["']{name}\s+is\s+{age}\s+years\s+old["']/,
      /["']\s*\{\}\s*is\s*\{\}\s*years\s*old["']\.format\s*\(\s*name\s*,\s*age\s*\)/,
    ],
    tags: ['f-string', 'formatting'],
  },
  {
    id: 'py-str-019',
    category: 'string',
    difficulty: 'easy',
    title: 'String Slicing - First Three',
    text: 'Get the first 3 characters of the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'hel',
    sample: 'text[:3]',
    hints: ['Use slice notation text[:n] to get first n characters'],
    validPatterns: [/text\s*\[\s*:\s*3\s*\]/, /text\s*\[\s*0\s*:\s*3\s*\]/],
    tags: ['slicing', 'string'],
  },
  {
    id: 'py-str-020',
    category: 'string',
    difficulty: 'easy',
    title: 'String Slicing - Last Three',
    text: 'Get the last 3 characters of the string',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'rld',
    sample: 'text[-3:]',
    hints: ['Use negative indexing with slices'],
    validPatterns: [/text\s*\[\s*-3\s*:\s*\]/],
    tags: ['slicing', 'string'],
  },
  {
    id: 'py-str-021',
    category: 'string',
    difficulty: 'medium',
    title: 'Reverse String',
    text: 'Reverse the string using slicing',
    setup: 'text = "hello"',
    setupCode: 'text = "hello"',
    expected: 'olleh',
    sample: 'text[::-1]',
    hints: ['Use slice with step -1: text[::-1]'],
    validPatterns: [
      /text\s*\[\s*::\s*-1\s*\]/,
      /["']["']\.join\s*\(\s*reversed\s*\(\s*text\s*\)\s*\)/,
    ],
    tags: ['slicing', 'reverse'],
  },

  // ============================================================
  // DICTIONARY METHODS (10+ problems)
  // ============================================================
  {
    id: 'py-dict-001',
    category: 'dict',
    difficulty: 'easy',
    title: 'Get Dictionary Keys',
    text: 'Get all keys from the dictionary as a list',
    setup: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    setupCode: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    expected: ['name', 'age', 'city'],
    sample: 'list(person.keys())',
    hints: ['Use the keys() method and convert to list'],
    validPatterns: [
      /list\s*\(\s*person\.keys\s*\(\s*\)\s*\)/,
      /\[\s*k\s+for\s+k\s+in\s+person\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+person\.keys\s*\(\s*\)\s*\]/,
    ],
    tags: ['keys', 'dict-method'],
  },
  {
    id: 'py-dict-002',
    category: 'dict',
    difficulty: 'easy',
    title: 'Get Dictionary Values',
    text: 'Get all values from the dictionary as a list',
    setup: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    setupCode: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    expected: ['Alice', 30, 'NYC'],
    sample: 'list(person.values())',
    hints: ['Use the values() method and convert to list'],
    validPatterns: [
      /list\s*\(\s*person\.values\s*\(\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+person\.values\s*\(\s*\)\s*\]/,
    ],
    tags: ['values', 'dict-method'],
  },
  {
    id: 'py-dict-003',
    category: 'dict',
    difficulty: 'easy',
    title: 'Get Dictionary Items',
    text: 'Get all key-value pairs as a list of tuples. The result should be [("name", "Alice"), ("age", 30)].',
    setup: 'person = {"name": "Alice", "age": 30}',
    setupCode: 'person = {"name": "Alice", "age": 30}',
    expected: [
      ['name', 'Alice'],
      ['age', 30],
    ],
    sample: 'list(person.items())',
    hints: ['Use the items() method and convert to list', 'items() returns tuples of (key, value)'],
    validPatterns: [
      /list\s*\(\s*person\.items\s*\(\s*\)\s*\)/,
      /\[\s*\(\s*k\s*,\s*v\s*\)\s+for\s+k\s*,\s*v\s+in\s+person\.items\s*\(\s*\)\s*\]/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+person\.items\s*\(\s*\)\s*\]/,
    ],
    tags: ['items', 'dict-method'],
  },
  {
    id: 'py-dict-004',
    category: 'dict',
    difficulty: 'easy',
    title: 'Get with Default',
    text: 'Get the value for key "country" with a default of "Unknown"',
    setup: 'person = {"name": "Alice", "age": 30}',
    setupCode: 'person = {"name": "Alice", "age": 30}',
    expected: 'Unknown',
    sample: 'person.get("country", "Unknown")',
    hints: ['Use the get() method with a default value'],
    validPatterns: [/person\.get\s*\(\s*["']country["']\s*,\s*["']Unknown["']\s*\)/],
    tags: ['get', 'dict-method'],
  },
  {
    id: 'py-dict-005',
    category: 'dict',
    difficulty: 'medium',
    title: 'Set Default Value',
    text: 'Get "score" from dict, setting it to 0 if not present (use setdefault)',
    setup: 'data = {"name": "Alice"}',
    setupCode: 'data = {"name": "Alice"}',
    expected: 0,
    sample: 'data.setdefault("score", 0)',
    hints: ['Use setdefault() to get or set a default value'],
    validPatterns: [/data\.setdefault\s*\(\s*["']score["']\s*,\s*0\s*\)/],
    tags: ['setdefault', 'dict-method'],
  },
  {
    id: 'py-dict-006',
    category: 'dict',
    difficulty: 'easy',
    title: 'Update Dictionary',
    text: 'Merge additional data into the original dictionary and return it',
    setup: 'original = {"a": 1, "b": 2}\nadditional = {"c": 3, "d": 4}',
    setupCode: 'original = {"a": 1, "b": 2}\nadditional = {"c": 3, "d": 4}',
    expected: { a: 1, b: 2, c: 3, d: 4 },
    sample: 'original.update(additional) or original',
    hints: ['Use the update() method to merge dictionaries'],
    validPatterns: [
      /original\.update\s*\(\s*additional\s*\)/,
      /\{\s*\*\*original\s*,\s*\*\*additional\s*\}/,
      /original\s*\|\s*additional/,
    ],
    tags: ['update', 'dict-method'],
  },
  {
    id: 'py-dict-007',
    category: 'dict',
    difficulty: 'medium',
    title: 'Dict Comprehension',
    text: 'Create a dictionary mapping each number to its square',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: { 1: 1, 2: 4, 3: 9, 4: 16, 5: 25 },
    sample: '{x: x**2 for x in nums}',
    hints: ['Use dict comprehension: {key: value for item in iterable}'],
    validPatterns: [
      /\{\s*\w+\s*:\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\}/,
      /\{\s*\w+\s*:\s*pow\s*\(\s*\w+\s*,\s*2\s*\)\s+for\s+\w+\s+in\s+nums\s*\}/,
      /dict\s*\(\s*\[\s*\(\s*\w+\s*,\s*\w+\s*\*\*\s*2\s*\)\s+for\s+\w+\s+in\s+nums\s*\]\s*\)/,
    ],
    tags: ['dict-comprehension'],
  },
  {
    id: 'py-dict-008',
    category: 'dict',
    difficulty: 'medium',
    title: 'Filter Dict Comprehension',
    text: 'Create a new dictionary with only entries where value > 2',
    setup: 'scores = {"a": 1, "b": 3, "c": 2, "d": 4}',
    setupCode: 'scores = {"a": 1, "b": 3, "c": 2, "d": 4}',
    expected: { b: 3, d: 4 },
    sample: '{k: v for k, v in scores.items() if v > 2}',
    hints: ['Use dict comprehension with a condition'],
    validPatterns: [
      /\{\s*\w+\s*:\s*\w+\s+for\s+\w+\s*,\s*\w+\s+in\s+scores\.items\s*\(\s*\)\s+if\s+\w+\s*>\s*2\s*\}/,
    ],
    tags: ['dict-comprehension', 'filter'],
  },
  {
    id: 'py-dict-009',
    category: 'dict',
    difficulty: 'medium',
    title: 'Pop from Dictionary',
    text: 'Remove and return the value for key "age"',
    setup: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    setupCode: 'person = {"name": "Alice", "age": 30, "city": "NYC"}',
    expected: 30,
    sample: 'person.pop("age")',
    hints: ['Use the pop() method to remove and return a value'],
    validPatterns: [/person\.pop\s*\(\s*["']age["']\s*\)/],
    tags: ['pop', 'dict-method'],
  },
  {
    id: 'py-dict-010',
    category: 'dict',
    difficulty: 'medium',
    title: 'Create Dict from Keys',
    text: 'Create a dictionary with the given keys, all with value 0',
    setup: 'keys = ["a", "b", "c", "d"]',
    setupCode: 'keys = ["a", "b", "c", "d"]',
    expected: { a: 0, b: 0, c: 0, d: 0 },
    sample: 'dict.fromkeys(keys, 0)',
    hints: ['Use dict.fromkeys() to create a dictionary with default values'],
    validPatterns: [
      /dict\.fromkeys\s*\(\s*keys\s*,\s*0\s*\)/,
      /\{\s*\w+\s*:\s*0\s+for\s+\w+\s+in\s+keys\s*\}/,
    ],
    tags: ['fromkeys', 'dict-method'],
  },
  {
    id: 'py-dict-011',
    category: 'dict',
    difficulty: 'medium',
    title: 'Invert Dictionary',
    text: 'Swap keys and values in the dictionary',
    setup: 'original = {"a": 1, "b": 2, "c": 3}',
    setupCode: 'original = {"a": 1, "b": 2, "c": 3}',
    expected: { 1: 'a', 2: 'b', 3: 'c' },
    sample: '{v: k for k, v in original.items()}',
    hints: ['Use dict comprehension to swap keys and values'],
    validPatterns: [
      /\{\s*\w+\s*:\s*\w+\s+for\s+\w+\s*,\s*\w+\s+in\s+original\.items\s*\(\s*\)\s*\}/,
      /dict\s*\(\s*\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+original\.items\s*\(\s*\)\s*\]\s*\)/,
    ],
    tags: ['dict-comprehension', 'invert'],
  },

  // ============================================================
  // SET METHODS (5+ problems)
  // ============================================================
  {
    id: 'py-set-001',
    category: 'set',
    difficulty: 'easy',
    title: 'Create Set from List',
    text: 'Remove duplicates from the list by converting to a set and back to list',
    setup: 'nums = [1, 2, 2, 3, 3, 3, 4, 4, 5]',
    setupCode: 'nums = [1, 2, 2, 3, 3, 3, 4, 4, 5]',
    expected: [1, 2, 3, 4, 5],
    sample: 'list(set(nums))',
    hints: ['Convert to set to remove duplicates, then back to list'],
    validPatterns: [
      /list\s*\(\s*set\s*\(\s*nums\s*\)\s*\)/,
      /sorted\s*\(\s*set\s*\(\s*nums\s*\)\s*\)/,
    ],
    tags: ['set', 'conversion'],
  },
  {
    id: 'py-set-002',
    category: 'set',
    difficulty: 'easy',
    title: 'Set Union',
    text: 'Combine two sets to get all unique elements',
    setup: 'set1 = {1, 2, 3}\nset2 = {3, 4, 5}',
    setupCode: 'set1 = {1, 2, 3}\nset2 = {3, 4, 5}',
    expected: [1, 2, 3, 4, 5],
    sample: 'set1.union(set2)',
    hints: ['Use the union() method or | operator'],
    validPatterns: [
      /set1\.union\s*\(\s*set2\s*\)/,
      /set1\s*\|\s*set2/,
      /set2\.union\s*\(\s*set1\s*\)/,
      /set2\s*\|\s*set1/,
    ],
    tags: ['union', 'set-method'],
  },
  {
    id: 'py-set-003',
    category: 'set',
    difficulty: 'easy',
    title: 'Set Intersection',
    text: 'Find elements that exist in both sets',
    setup: 'set1 = {1, 2, 3, 4}\nset2 = {3, 4, 5, 6}',
    setupCode: 'set1 = {1, 2, 3, 4}\nset2 = {3, 4, 5, 6}',
    expected: [3, 4],
    sample: 'set1.intersection(set2)',
    hints: ['Use the intersection() method or & operator'],
    validPatterns: [
      /set1\.intersection\s*\(\s*set2\s*\)/,
      /set1\s*&\s*set2/,
      /set2\.intersection\s*\(\s*set1\s*\)/,
      /set2\s*&\s*set1/,
    ],
    tags: ['intersection', 'set-method'],
  },
  {
    id: 'py-set-004',
    category: 'set',
    difficulty: 'easy',
    title: 'Set Difference',
    text: 'Find elements in set1 that are not in set2',
    setup: 'set1 = {1, 2, 3, 4, 5}\nset2 = {4, 5, 6, 7}',
    setupCode: 'set1 = {1, 2, 3, 4, 5}\nset2 = {4, 5, 6, 7}',
    expected: [1, 2, 3],
    sample: 'set1.difference(set2)',
    hints: ['Use the difference() method or - operator'],
    validPatterns: [/set1\.difference\s*\(\s*set2\s*\)/, /set1\s*-\s*set2/],
    tags: ['difference', 'set-method'],
  },
  {
    id: 'py-set-005',
    category: 'set',
    difficulty: 'medium',
    title: 'Set Comprehension',
    text: 'Create a set of squares from the numbers using set comprehension',
    setup: 'nums = [1, 2, 2, 3, 3, 4]',
    setupCode: 'nums = [1, 2, 2, 3, 3, 4]',
    expected: [1, 4, 9, 16],
    sample: '{x**2 for x in nums}',
    hints: ['Use set comprehension: {expression for item in iterable}'],
    validPatterns: [
      /\{\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\}/,
      /set\s*\(\s*\[\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+nums\s*\]\s*\)/,
    ],
    tags: ['set-comprehension'],
  },
  {
    id: 'py-set-006',
    category: 'set',
    difficulty: 'medium',
    title: 'Check Subset',
    text: 'Check if set1 is a subset of set2',
    setup: 'set1 = {1, 2}\nset2 = {1, 2, 3, 4, 5}',
    setupCode: 'set1 = {1, 2}\nset2 = {1, 2, 3, 4, 5}',
    expected: true,
    sample: 'set1.issubset(set2)',
    hints: ['Use the issubset() method or <= operator'],
    validPatterns: [/set1\.issubset\s*\(\s*set2\s*\)/, /set1\s*<=\s*set2/],
    tags: ['issubset', 'set-method'],
  },
  {
    id: 'py-set-007',
    category: 'set',
    difficulty: 'medium',
    title: 'Check Superset',
    text: 'Check if set1 is a superset of set2',
    setup: 'set1 = {1, 2, 3, 4, 5}\nset2 = {2, 3}',
    setupCode: 'set1 = {1, 2, 3, 4, 5}\nset2 = {2, 3}',
    expected: true,
    sample: 'set1.issuperset(set2)',
    hints: ['Use the issuperset() method or >= operator'],
    validPatterns: [/set1\.issuperset\s*\(\s*set2\s*\)/, /set1\s*>=\s*set2/],
    tags: ['issuperset', 'set-method'],
  },

  // ============================================================
  // OTHER BUILT-INS (5+ problems)
  // ============================================================
  {
    id: 'py-builtin-001',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Range to List',
    text: 'Create a list of numbers from 0 to 9 using range',
    setup: '# Use range to generate numbers',
    setupCode: '# Use range to generate numbers',
    expected: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
    sample: 'list(range(10))',
    hints: ['Use range() and convert to list'],
    validPatterns: [
      /list\s*\(\s*range\s*\(\s*10\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+range\s*\(\s*10\s*\)\s*\]/,
    ],
    tags: ['range', 'built-in'],
  },
  {
    id: 'py-builtin-002',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Range with Start and Stop',
    text: 'Create a list of numbers from 5 to 14 using range',
    setup: '# Use range with start and stop',
    setupCode: '# Use range with start and stop',
    expected: [5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
    sample: 'list(range(5, 15))',
    hints: ['Use range(start, stop) where stop is exclusive'],
    validPatterns: [
      /list\s*\(\s*range\s*\(\s*5\s*,\s*15\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+range\s*\(\s*5\s*,\s*15\s*\)\s*\]/,
    ],
    tags: ['range', 'built-in'],
  },
  {
    id: 'py-builtin-003',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Range with Step',
    text: 'Create a list of even numbers from 0 to 18 using range',
    setup: '# Use range with step',
    setupCode: '# Use range with step',
    expected: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18],
    sample: 'list(range(0, 20, 2))',
    hints: ['Use range(start, stop, step)'],
    validPatterns: [
      /list\s*\(\s*range\s*\(\s*0\s*,\s*20\s*,\s*2\s*\)\s*\)/,
      /list\s*\(\s*range\s*\(\s*0\s*,\s*19\s*,\s*2\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+range\s*\(\s*0\s*,\s*20\s*,\s*2\s*\)\s*\]/,
    ],
    tags: ['range', 'built-in'],
  },
  {
    id: 'py-builtin-004',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Convert String to Int',
    text: 'Convert the string to an integer',
    setup: 'num_str = "42"',
    setupCode: 'num_str = "42"',
    expected: 42,
    sample: 'int(num_str)',
    hints: ['Use the int() built-in function'],
    validPatterns: [/int\s*\(\s*num_str\s*\)/],
    tags: ['type-conversion', 'built-in'],
  },
  {
    id: 'py-builtin-005',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Convert Int to String',
    text: 'Convert the integer to a string',
    setup: 'num = 42',
    setupCode: 'num = 42',
    expected: '42',
    sample: 'str(num)',
    hints: ['Use the str() built-in function'],
    validPatterns: [/str\s*\(\s*num\s*\)/, /f["']\{num\}["']/],
    tags: ['type-conversion', 'built-in'],
  },
  {
    id: 'py-builtin-006',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Convert String to List',
    text: 'Convert the string to a list of characters',
    setup: 'text = "hello"',
    setupCode: 'text = "hello"',
    expected: ['h', 'e', 'l', 'l', 'o'],
    sample: 'list(text)',
    hints: ['Use the list() built-in function'],
    validPatterns: [/list\s*\(\s*text\s*\)/, /\[\s*\w+\s+for\s+\w+\s+in\s+text\s*\]/],
    tags: ['type-conversion', 'built-in'],
  },
  {
    id: 'py-builtin-007',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Lambda Function',
    text: 'Create a lambda function that doubles a number and apply it to 5',
    setup: '# Create and use a lambda function',
    setupCode: '# Create and use a lambda function',
    expected: 10,
    sample: '(lambda x: x * 2)(5)',
    hints: ['Use lambda syntax: lambda args: expression'],
    validPatterns: [
      /\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*2\s*\)\s*\(\s*5\s*\)/,
      /\(\s*lambda\s+\w+\s*:\s*2\s*\*\s*\w+\s*\)\s*\(\s*5\s*\)/,
    ],
    tags: ['lambda', 'built-in'],
  },
  {
    id: 'py-builtin-008',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Reduce Sum',
    text: 'Use reduce from functools to sum all numbers in the list',
    setup: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    setupCode: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    expected: 15,
    sample: 'reduce(lambda a, b: a + b, nums)',
    hints: ['Import reduce from functools and use with a lambda'],
    validPatterns: [/reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\+\s*\w+\s*,\s*nums\s*\)/],
    tags: ['reduce', 'functools'],
  },
  {
    id: 'py-builtin-009',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Reduce Product',
    text: 'Use reduce to calculate the product of all numbers in the list',
    setup: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    setupCode: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    expected: 120,
    sample: 'reduce(lambda a, b: a * b, nums)',
    hints: ['Use reduce with multiplication'],
    validPatterns: [/reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\*\s*\w+\s*,\s*nums\s*\)/],
    tags: ['reduce', 'functools'],
  },
  {
    id: 'py-builtin-010',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Absolute Value',
    text: 'Get the absolute value of the number',
    setup: 'num = -42',
    setupCode: 'num = -42',
    expected: 42,
    sample: 'abs(num)',
    hints: ['Use the abs() built-in function'],
    validPatterns: [/abs\s*\(\s*num\s*\)/],
    tags: ['abs', 'built-in'],
  },
  {
    id: 'py-builtin-011',
    category: 'builtin',
    difficulty: 'easy',
    title: 'Round Number',
    text: 'Round the float to 2 decimal places',
    setup: 'num = 3.14159',
    setupCode: 'num = 3.14159',
    expected: 3.14,
    sample: 'round(num, 2)',
    hints: ['Use the round() built-in function with precision'],
    validPatterns: [/round\s*\(\s*num\s*,\s*2\s*\)/],
    tags: ['round', 'built-in'],
  },
  {
    id: 'py-builtin-012',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Filter with Lambda',
    text: 'Use filter() with lambda to get only positive numbers',
    setup: 'nums = [-2, -1, 0, 1, 2, 3]',
    setupCode: 'nums = [-2, -1, 0, 1, 2, 3]',
    expected: [1, 2, 3],
    sample: 'list(filter(lambda x: x > 0, nums))',
    hints: ['Use filter() with a lambda function'],
    validPatterns: [
      /list\s*\(\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*>\s*0\s*,\s*nums\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*>\s*0\s*\]/,
    ],
    tags: ['filter', 'lambda'],
  },
  {
    id: 'py-builtin-013',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Sort by Key',
    text: 'Sort the list of tuples by the second element (age)',
    setup: 'people = [("Alice", 30), ("Bob", 25), ("Charlie", 35)]',
    setupCode: 'people = [("Alice", 30), ("Bob", 25), ("Charlie", 35)]',
    expected: [
      ['Bob', 25],
      ['Alice', 30],
      ['Charlie', 35],
    ],
    sample: 'sorted(people, key=lambda x: x[1])',
    hints: ['Use sorted() with a key function'],
    validPatterns: [
      /sorted\s*\(\s*people\s*,\s*key\s*=\s*lambda\s+\w+\s*:\s*\w+\s*\[\s*1\s*\]\s*\)/,
    ],
    tags: ['sorted', 'key', 'lambda'],
  },
  {
    id: 'py-builtin-014',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Sort by String Length',
    text: 'Sort the list of words by their length',
    setup: 'words = ["python", "is", "awesome", "coding"]',
    setupCode: 'words = ["python", "is", "awesome", "coding"]',
    expected: ['is', 'python', 'coding', 'awesome'],
    sample: 'sorted(words, key=len)',
    hints: ['Use len as the key function'],
    validPatterns: [
      /sorted\s*\(\s*words\s*,\s*key\s*=\s*len\s*\)/,
      /sorted\s*\(\s*words\s*,\s*key\s*=\s*lambda\s+\w+\s*:\s*len\s*\(\s*\w+\s*\)\s*\)/,
    ],
    tags: ['sorted', 'key'],
  },
  {
    id: 'py-builtin-015',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Boolean Conversion',
    text: 'Convert the list to a boolean value',
    setup: 'items = [1, 2, 3]',
    setupCode: 'items = [1, 2, 3]',
    expected: true,
    sample: 'bool(items)',
    hints: ['Use bool() - non-empty lists are truthy'],
    validPatterns: [/bool\s*\(\s*items\s*\)/],
    tags: ['bool', 'type-conversion'],
  },

  // ============================================================
  // ADDITIONAL LIST PROBLEMS
  // ============================================================
  {
    id: 'py-list-024',
    category: 'list',
    difficulty: 'medium',
    title: 'Append to List',
    text: 'Append 6 to the list and return the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'nums.append(6) or nums',
    hints: ['Use append() to add an element to the end'],
    validPatterns: [
      /nums\.append\s*\(\s*6\s*\)/,
      /nums\s*\+\s*\[\s*6\s*\]/,
      /\[\s*\*nums\s*,\s*6\s*\]/,
    ],
    tags: ['append', 'list-method'],
  },
  {
    id: 'py-list-025',
    category: 'list',
    difficulty: 'medium',
    title: 'Extend List',
    text: 'Extend nums with more_nums and return the combined list',
    setup: 'nums = [1, 2, 3]\nmore_nums = [4, 5, 6]',
    setupCode: 'nums = [1, 2, 3]\nmore_nums = [4, 5, 6]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'nums.extend(more_nums) or nums',
    hints: ['Use extend() to add all elements from another list'],
    validPatterns: [
      /nums\.extend\s*\(\s*more_nums\s*\)/,
      /nums\s*\+\s*more_nums/,
      /\[\s*\*nums\s*,\s*\*more_nums\s*\]/,
    ],
    tags: ['extend', 'list-method'],
  },
  {
    id: 'py-list-026',
    category: 'list',
    difficulty: 'medium',
    title: 'Insert at Index',
    text: 'Insert 10 at index 2 and return the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [1, 2, 10, 3, 4, 5],
    sample: 'nums.insert(2, 10) or nums',
    hints: ['Use insert(index, element) to insert at a specific position'],
    validPatterns: [/nums\.insert\s*\(\s*2\s*,\s*10\s*\)/],
    tags: ['insert', 'list-method'],
  },
  {
    id: 'py-list-027',
    category: 'list',
    difficulty: 'medium',
    title: 'Pop Last Element',
    text: 'Remove and return the last element from the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: 5,
    sample: 'nums.pop()',
    hints: ['Use pop() without arguments to remove the last element'],
    validPatterns: [/nums\.pop\s*\(\s*\)/, /nums\s*\[\s*-1\s*\]/],
    tags: ['pop', 'list-method'],
  },
  {
    id: 'py-list-028',
    category: 'list',
    difficulty: 'medium',
    title: 'Pop at Index',
    text: 'Remove and return the element at index 2',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: 3,
    sample: 'nums.pop(2)',
    hints: ['Use pop(index) to remove and return element at specific index'],
    validPatterns: [/nums\.pop\s*\(\s*2\s*\)/],
    tags: ['pop', 'list-method'],
  },
  {
    id: 'py-list-029',
    category: 'list',
    difficulty: 'medium',
    title: 'Remove by Value',
    text: 'Remove the first occurrence of 3 from the list and return the list',
    setup: 'nums = [1, 2, 3, 4, 3, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 3, 5]',
    expected: [1, 2, 4, 3, 5],
    sample: 'nums.remove(3) or nums',
    hints: ['Use remove() to remove the first occurrence of a value'],
    validPatterns: [/nums\.remove\s*\(\s*3\s*\)/],
    tags: ['remove', 'list-method'],
  },
  {
    id: 'py-list-030',
    category: 'list',
    difficulty: 'hard',
    title: 'List Slicing Middle',
    text: 'Get elements from index 2 to 5 (exclusive)',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [2, 3, 4],
    sample: 'nums[2:5]',
    hints: ['Use slice notation: list[start:stop]'],
    validPatterns: [/nums\s*\[\s*2\s*:\s*5\s*\]/],
    tags: ['slicing', 'list'],
  },
  {
    id: 'py-list-031',
    category: 'list',
    difficulty: 'hard',
    title: 'Every Other Element',
    text: 'Get every other element from the list starting from index 0',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [0, 2, 4, 6, 8],
    sample: 'nums[::2]',
    hints: ['Use slice with step: list[::step]'],
    validPatterns: [
      /nums\s*\[\s*::\s*2\s*\]/,
      /nums\s*\[\s*0\s*:\s*:\s*2\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+nums\.index\s*\(\s*\w+\s*\)\s*%\s*2\s*==\s*0\s*\]/,
    ],
    tags: ['slicing', 'list'],
  },
  {
    id: 'py-list-032',
    category: 'list',
    difficulty: 'hard',
    title: 'Nested List Comprehension',
    text: 'Create a multiplication table (3x3) using nested list comprehension',
    setup: '# Create 3x3 multiplication table',
    setupCode: '# Create 3x3 multiplication table',
    expected: [
      [1, 2, 3],
      [2, 4, 6],
      [3, 6, 9],
    ],
    sample: '[[i * j for j in range(1, 4)] for i in range(1, 4)]',
    hints: ['Use nested list comprehensions: [[expr for inner] for outer]'],
    validPatterns: [
      /\[\s*\[\s*\w+\s*\*\s*\w+\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*4\s*\)\s*\]\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*4\s*\)\s*\]/,
    ],
    tags: ['list-comprehension', 'nested', 'advanced'],
  },

  // ============================================================
  // ADDITIONAL STRING PROBLEMS
  // ============================================================
  {
    id: 'py-str-022',
    category: 'string',
    difficulty: 'medium',
    title: 'F-String Expression',
    text: 'Create a formatted string showing "The sum of 5 and 3 is 8" using f-string with calculation',
    setup: 'a = 5\nb = 3',
    setupCode: 'a = 5\nb = 3',
    expected: 'The sum of 5 and 3 is 8',
    sample: 'f"The sum of {a} and {b} is {a + b}"',
    hints: ['F-strings can contain expressions inside curly braces'],
    validPatterns: [
      /f["']The sum of \{a\} and \{b\} is \{a\s*\+\s*b\}["']/,
      /f["']The sum of \{a\} and \{b\} is \{\s*a\s*\+\s*b\s*\}["']/,
    ],
    tags: ['f-string', 'formatting', 'expressions'],
  },
  {
    id: 'py-str-023',
    category: 'string',
    difficulty: 'medium',
    title: 'String Center',
    text: 'Center the text in a string of width 20, padded with asterisks',
    setup: 'text = "Python"',
    setupCode: 'text = "Python"',
    expected: '*******Python*******',
    sample: 'text.center(20, "*")',
    hints: ['Use the center() method with width and fill character'],
    validPatterns: [/text\.center\s*\(\s*20\s*,\s*["']\*["']\s*\)/],
    tags: ['center', 'string-method', 'padding'],
  },
  {
    id: 'py-str-024',
    category: 'string',
    difficulty: 'easy',
    title: 'Check Whitespace Only',
    text: 'Check if the string contains only whitespace characters',
    setup: 'text = "   \\t\\n"',
    setupCode: 'text = "   \\t\\n"',
    expected: true,
    sample: 'text.isspace()',
    hints: ['Use the isspace() method'],
    validPatterns: [/text\.isspace\s*\(\s*\)/],
    tags: ['isspace', 'string-method'],
  },
  {
    id: 'py-str-025',
    category: 'string',
    difficulty: 'medium',
    title: 'Partition String',
    text: 'Split the email at "@" using partition, return the username part (before @)',
    setup: 'email = "user@example.com"',
    setupCode: 'email = "user@example.com"',
    expected: 'user',
    sample: 'email.partition("@")[0]',
    hints: [
      'Use partition() which returns (before, separator, after)',
      'Index [0] gets the part before the separator',
    ],
    validPatterns: [
      /email\.partition\s*\(\s*["']@["']\s*\)\s*\[\s*0\s*\]/,
      /email\.split\s*\(\s*["']@["']\s*\)\s*\[\s*0\s*\]/,
    ],
    tags: ['partition', 'string-method'],
  },
  {
    id: 'py-str-026',
    category: 'string',
    difficulty: 'medium',
    title: 'Swapcase',
    text: 'Swap the case of all characters in the string',
    setup: 'text = "Hello World"',
    setupCode: 'text = "Hello World"',
    expected: 'hELLO wORLD',
    sample: 'text.swapcase()',
    hints: ['Use the swapcase() method'],
    validPatterns: [/text\.swapcase\s*\(\s*\)/],
    tags: ['swapcase', 'string-method'],
  },

  // ============================================================
  // ADVANCED DICTIONARY PROBLEMS
  // ============================================================
  {
    id: 'py-dict-012',
    category: 'dict',
    difficulty: 'medium',
    title: 'Merge Dictionaries (Python 3.9+)',
    text: 'Merge dict1 and dict2 using the | operator (creates new dict)',
    setup: 'dict1 = {"a": 1, "b": 2}\ndict2 = {"b": 3, "c": 4}',
    setupCode: 'dict1 = {"a": 1, "b": 2}\ndict2 = {"b": 3, "c": 4}',
    expected: { a: 1, b: 3, c: 4 },
    sample: 'dict1 | dict2',
    hints: [
      'Use the | operator to merge dictionaries (Python 3.9+)',
      'Later values override earlier ones',
    ],
    validPatterns: [/dict1\s*\|\s*dict2/, /\{\s*\*\*dict1\s*,\s*\*\*dict2\s*\}/],
    tags: ['merge', 'dict-operator'],
  },
  {
    id: 'py-dict-013',
    category: 'dict',
    difficulty: 'hard',
    title: 'Count Word Frequencies',
    text: 'Count the frequency of each word in the list',
    setup: 'words = ["apple", "banana", "apple", "cherry", "banana", "apple"]',
    setupCode: 'words = ["apple", "banana", "apple", "cherry", "banana", "apple"]',
    expected: { apple: 3, banana: 2, cherry: 1 },
    sample: '{word: words.count(word) for word in set(words)}',
    hints: ['Use dict comprehension with set to get unique words', 'Or use collections.Counter'],
    validPatterns: [
      /\{\s*\w+\s*:\s*words\.count\s*\(\s*\w+\s*\)\s+for\s+\w+\s+in\s+set\s*\(\s*words\s*\)\s*\}/,
      /Counter\s*\(\s*words\s*\)/,
    ],
    tags: ['dict-comprehension', 'counting'],
  },
  {
    id: 'py-dict-014',
    category: 'dict',
    difficulty: 'hard',
    title: 'Group by Length',
    text: 'Group words by their length into a dictionary',
    setup: 'words = ["hi", "hello", "hey", "world", "a"]',
    setupCode: 'words = ["hi", "hello", "hey", "world", "a"]',
    expected: { 1: ['a'], 2: ['hi'], 3: ['hey'], 5: ['hello', 'world'] },
    sample:
      '{length: [w for w in words if len(w) == length] for length in set(len(w) for w in words)}',
    hints: ['Group by extracting unique lengths first', 'Then filter words matching each length'],
    validPatterns: [
      /\{\s*\w+\s*:\s*\[\s*\w+\s+for\s+\w+\s+in\s+words\s+if\s+len\s*\(\s*\w+\s*\)\s*==\s*\w+\s*\]\s+for\s+\w+\s+in/,
    ],
    tags: ['dict-comprehension', 'grouping', 'advanced'],
  },

  // ============================================================
  // ADVANCED BUILT-IN PROBLEMS
  // ============================================================
  {
    id: 'py-builtin-016',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Check Type',
    text: 'Check if the variable is an instance of list',
    setup: 'data = [1, 2, 3]',
    setupCode: 'data = [1, 2, 3]',
    expected: true,
    sample: 'isinstance(data, list)',
    hints: ['Use isinstance() to check if an object is of a certain type'],
    validPatterns: [/isinstance\s*\(\s*data\s*,\s*list\s*\)/, /type\s*\(\s*data\s*\)\s*==\s*list/],
    tags: ['isinstance', 'type-checking'],
  },
  {
    id: 'py-builtin-017',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Chained Comparison',
    text: 'Check if x is between 1 and 10 (inclusive) using chained comparison',
    setup: 'x = 5',
    setupCode: 'x = 5',
    expected: true,
    sample: '1 <= x <= 10',
    hints: ['Python supports chained comparisons'],
    validPatterns: [/1\s*<=\s*x\s*<=\s*10/, /x\s*>=\s*1\s*and\s*x\s*<=\s*10/],
    tags: ['comparison', 'pythonic'],
  },
  {
    id: 'py-builtin-018',
    category: 'builtin',
    difficulty: 'hard',
    title: 'Ternary Expression',
    text: 'Use a conditional expression to return "even" if num is even, "odd" otherwise',
    setup: 'num = 7',
    setupCode: 'num = 7',
    expected: 'odd',
    sample: '"even" if num % 2 == 0 else "odd"',
    hints: ['Use Python ternary syntax: value_if_true if condition else value_if_false'],
    validPatterns: [
      /["']even["']\s+if\s+num\s*%\s*2\s*==\s*0\s+else\s+["']odd["']/,
      /["']odd["']\s+if\s+num\s*%\s*2\s*!=?\s*0?\s+else\s+["']even["']/,
      /["']odd["']\s+if\s+num\s*%\s*2\s+else\s+["']even["']/,
    ],
    tags: ['ternary', 'conditional'],
  },
  {
    id: 'py-builtin-019',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Unpack with Star',
    text: 'Unpack the list to get first, middle elements, and last using star expression',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [2, 3, 4],
    sample: 'first, *middle, last = nums; middle',
    hints: ['Use * to capture multiple elements during unpacking'],
    validPatterns: [/\w+\s*,\s*\*\s*\w+\s*,\s*\w+\s*=\s*nums/],
    tags: ['unpacking', 'star-expression'],
  },
  {
    id: 'py-builtin-020',
    category: 'builtin',
    difficulty: 'medium',
    title: 'Walrus Operator',
    text: 'Use the walrus operator to assign and check length in one expression (return True if length > 3)',
    setup: 'text = "hello"',
    setupCode: 'text = "hello"',
    expected: true,
    sample: '(n := len(text)) > 3',
    hints: ['Use := (walrus operator) to assign within an expression', 'Available in Python 3.8+'],
    validPatterns: [
      /\(\s*\w+\s*:=\s*len\s*\(\s*text\s*\)\s*\)\s*>\s*3/,
      /len\s*\(\s*text\s*\)\s*>\s*3/,
    ],
    tags: ['walrus', 'assignment-expression'],
  },

  // ============================================================
  // SET ADVANCED PROBLEMS
  // ============================================================
  {
    id: 'py-set-008',
    category: 'set',
    difficulty: 'medium',
    title: 'Symmetric Difference',
    text: 'Find elements that are in either set but not in both',
    setup: 'set1 = {1, 2, 3, 4}\nset2 = {3, 4, 5, 6}',
    setupCode: 'set1 = {1, 2, 3, 4}\nset2 = {3, 4, 5, 6}',
    expected: [1, 2, 5, 6],
    sample: 'set1.symmetric_difference(set2)',
    hints: ['Use symmetric_difference() or ^ operator'],
    validPatterns: [
      /set1\.symmetric_difference\s*\(\s*set2\s*\)/,
      /set1\s*\^\s*set2/,
      /\(\s*set1\s*-\s*set2\s*\)\s*\|\s*\(\s*set2\s*-\s*set1\s*\)/,
    ],
    tags: ['symmetric_difference', 'set-method'],
  },
  {
    id: 'py-set-009',
    category: 'set',
    difficulty: 'medium',
    title: 'Check Disjoint',
    text: 'Check if the two sets have no common elements',
    setup: 'set1 = {1, 2, 3}\nset2 = {4, 5, 6}',
    setupCode: 'set1 = {1, 2, 3}\nset2 = {4, 5, 6}',
    expected: true,
    sample: 'set1.isdisjoint(set2)',
    hints: ['Use the isdisjoint() method'],
    validPatterns: [
      /set1\.isdisjoint\s*\(\s*set2\s*\)/,
      /len\s*\(\s*set1\s*&\s*set2\s*\)\s*==\s*0/,
      /not\s+set1\s*&\s*set2/,
    ],
    tags: ['isdisjoint', 'set-method'],
  },

  // ============================================================
  // TUPLE PROBLEMS
  // ============================================================
  {
    id: 'py-tuple-001',
    category: 'tuple',
    difficulty: 'easy',
    title: 'Create Tuple',
    text: 'Create a tuple containing the numbers 1, 2, 3',
    setup: '# Create a tuple',
    setupCode: '# Create a tuple',
    expected: [1, 2, 3],
    sample: '(1, 2, 3)',
    hints: ['Use parentheses to create a tuple: (item1, item2, ...)'],
    validPatterns: [/\(\s*1\s*,\s*2\s*,\s*3\s*\)/, /tuple\s*\(\s*\[\s*1\s*,\s*2\s*,\s*3\s*\]\s*\)/],
    tags: ['tuple', 'creation'],
  },
  {
    id: 'py-tuple-002',
    category: 'tuple',
    difficulty: 'easy',
    title: 'Tuple Index',
    text: 'Find the index of "banana" in the tuple',
    setup: 'fruits = ("apple", "banana", "cherry")',
    setupCode: 'fruits = ("apple", "banana", "cherry")',
    expected: 1,
    sample: 'fruits.index("banana")',
    hints: ['Tuples have an index() method like lists'],
    validPatterns: [/fruits\.index\s*\(\s*["']banana["']\s*\)/],
    tags: ['tuple', 'index'],
  },
  {
    id: 'py-tuple-003',
    category: 'tuple',
    difficulty: 'easy',
    title: 'Tuple Count',
    text: 'Count how many times 1 appears in the tuple',
    setup: 'nums = (1, 2, 1, 3, 1, 4)',
    setupCode: 'nums = (1, 2, 1, 3, 1, 4)',
    expected: 3,
    sample: 'nums.count(1)',
    hints: ['Tuples have a count() method like lists'],
    validPatterns: [/nums\.count\s*\(\s*1\s*\)/],
    tags: ['tuple', 'count'],
  },
  {
    id: 'py-tuple-004',
    category: 'tuple',
    difficulty: 'medium',
    title: 'Tuple Unpacking',
    text: 'Unpack the tuple into variables x, y, z and return their sum',
    setup: 'point = (10, 20, 30)',
    setupCode: 'point = (10, 20, 30)',
    expected: 60,
    sample: 'x, y, z = point; x + y + z',
    hints: ['Use tuple unpacking: a, b, c = tuple'],
    validPatterns: [/\w+\s*,\s*\w+\s*,\s*\w+\s*=\s*point/, /sum\s*\(\s*point\s*\)/],
    tags: ['tuple', 'unpacking'],
  },

  // ============================================================
  // GENERATOR PROBLEMS
  // ============================================================
  {
    id: 'py-gen-001',
    category: 'generator',
    difficulty: 'medium',
    title: 'Generator Expression Sum',
    text: 'Use a generator expression to sum squares of numbers from 1 to 5',
    setup: '# Sum of squares using generator',
    setupCode: '# Sum of squares using generator',
    expected: 55,
    sample: 'sum(x**2 for x in range(1, 6))',
    hints: [
      'Generator expressions use parentheses: (expr for x in iterable)',
      'More memory efficient than list comprehensions',
    ],
    validPatterns: [
      /sum\s*\(\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*6\s*\)\s*\)/,
      /sum\s*\(\s*\[\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*6\s*\)\s*\]\s*\)/,
    ],
    tags: ['generator', 'sum'],
  },
  {
    id: 'py-gen-002',
    category: 'generator',
    difficulty: 'medium',
    title: 'Generator with Condition',
    text: 'Use a generator expression to find the maximum of even numbers',
    setup: 'nums = [1, 4, 2, 8, 5, 7, 6]',
    setupCode: 'nums = [1, 4, 2, 8, 5, 7, 6]',
    expected: 8,
    sample: 'max(x for x in nums if x % 2 == 0)',
    hints: ['Generator expressions can include conditions'],
    validPatterns: [/max\s*\(\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s*\)/],
    tags: ['generator', 'max', 'filter'],
  },

  // ============================================================
  // LIST COMPREHENSIONS - Complex Filtering & Nested
  // ============================================================
  {
    id: 'py-list-033',
    category: 'list',
    difficulty: 'easy',
    title: 'Filter Strings by Length',
    text: 'Keep only words with more than 4 characters',
    setup: 'words = ["cat", "elephant", "dog", "butterfly", "ant"]',
    setupCode: 'words = ["cat", "elephant", "dog", "butterfly", "ant"]',
    expected: ['elephant', 'butterfly'],
    sample: '[w for w in words if len(w) > 4]',
    hints: ['Use len() in the condition of your list comprehension'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+words\s+if\s+len\s*\(\s*\w+\s*\)\s*>\s*4\s*\]/,
    ],
    tags: ['list-comprehension', 'filter', 'string'],
  },
  {
    id: 'py-list-034',
    category: 'list',
    difficulty: 'medium',
    title: 'Filter with Multiple Conditions',
    text: 'Keep only numbers that are even AND greater than 5',
    setup: 'nums = [1, 2, 6, 7, 8, 3, 10, 4, 12]',
    setupCode: 'nums = [1, 2, 6, 7, 8, 3, 10, 4, 12]',
    expected: [6, 8, 10, 12],
    sample: '[x for x in nums if x % 2 == 0 and x > 5]',
    hints: ['Combine conditions with "and" in the if clause'],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s+and\s+\w+\s*>\s*5\s*\]/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*>\s*5\s+and\s+\w+\s*%\s*2\s*==\s*0\s*\]/,
    ],
    tags: ['list-comprehension', 'filter', 'multiple-conditions'],
  },
  {
    id: 'py-list-035',
    category: 'list',
    difficulty: 'medium',
    title: 'Nested Comprehension - Pairs',
    text: 'Create all pairs (i, j) where i is from [1,2] and j is from [3,4]',
    setup: '# Create pairs from two ranges',
    setupCode: '# Create pairs from two ranges',
    expected: [
      [1, 3],
      [1, 4],
      [2, 3],
      [2, 4],
    ],
    sample: '[(i, j) for i in [1, 2] for j in [3, 4]]',
    hints: [
      'Use two for clauses in the list comprehension',
      'The first for is the outer loop, the second is the inner loop',
    ],
    validPatterns: [
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s+in\s+\[\s*1\s*,\s*2\s*\]\s+for\s+\w+\s+in\s+\[\s*3\s*,\s*4\s*\]\s*\]/,
    ],
    tags: ['list-comprehension', 'nested', 'pairs'],
  },
  {
    id: 'py-list-036',
    category: 'list',
    difficulty: 'hard',
    title: 'Transpose Matrix',
    text: 'Transpose the 3x3 matrix (swap rows and columns)',
    setup: 'matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]',
    setupCode: 'matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]',
    expected: [
      [1, 4, 7],
      [2, 5, 8],
      [3, 6, 9],
    ],
    sample: '[[row[i] for row in matrix] for i in range(3)]',
    hints: [
      'Use nested list comprehension',
      'Outer loop iterates over column indices',
      'Inner loop collects elements from each row at that index',
    ],
    validPatterns: [
      /\[\s*\[\s*\w+\s*\[\s*\w+\s*\]\s+for\s+\w+\s+in\s+matrix\s*\]\s+for\s+\w+\s+in\s+range\s*\(\s*3\s*\)\s*\]/,
      /list\s*\(\s*map\s*\(\s*list\s*,\s*zip\s*\(\s*\*matrix\s*\)\s*\)\s*\)/,
      /\[\s*list\s*\(\s*\w+\s*\)\s+for\s+\w+\s+in\s+zip\s*\(\s*\*matrix\s*\)\s*\]/,
    ],
    tags: ['list-comprehension', 'nested', 'matrix', 'advanced'],
  },
  {
    id: 'py-list-037',
    category: 'list',
    difficulty: 'hard',
    title: 'Conditional Expression in Comprehension',
    text: 'Replace negative numbers with 0, keep positive numbers unchanged',
    setup: 'nums = [-5, 3, -2, 8, -1, 6]',
    setupCode: 'nums = [-5, 3, -2, 8, -1, 6]',
    expected: [0, 3, 0, 8, 0, 6],
    sample: '[x if x > 0 else 0 for x in nums]',
    hints: [
      'Use conditional expression: value_if_true if condition else value_if_false',
      'This goes BEFORE the for clause',
    ],
    validPatterns: [
      /\[\s*\w+\s+if\s+\w+\s*>\s*0\s+else\s+0\s+for\s+\w+\s+in\s+nums\s*\]/,
      /\[\s*max\s*\(\s*0\s*,\s*\w+\s*\)\s+for\s+\w+\s+in\s+nums\s*\]/,
      /\[\s*max\s*\(\s*\w+\s*,\s*0\s*\)\s+for\s+\w+\s+in\s+nums\s*\]/,
    ],
    tags: ['list-comprehension', 'conditional', 'ternary'],
  },

  // ============================================================
  // DICTIONARY METHODS - setdefault, pop, update, items, fromkeys
  // ============================================================
  {
    id: 'py-dict-015',
    category: 'dict',
    difficulty: 'easy',
    title: 'Iterate Over Items',
    text: 'Create a list of formatted strings "key: value" from the dictionary',
    setup: 'data = {"name": "Alice", "age": 30}',
    setupCode: 'data = {"name": "Alice", "age": 30}',
    expected: ['name: Alice', 'age: 30'],
    sample: '[f"{k}: {v}" for k, v in data.items()]',
    hints: [
      'Use items() to get key-value pairs',
      'Unpack into k, v in the for clause',
    ],
    validPatterns: [
      /\[\s*f["']\{\w+\}:\s*\{\w+\}["']\s+for\s+\w+\s*,\s*\w+\s+in\s+data\.items\s*\(\s*\)\s*\]/,
      /\[\s*\w+\s*\+\s*["']:\s*["']\s*\+\s*str\s*\(\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+data\.items\s*\(\s*\)\s*\]/,
    ],
    tags: ['dict-method', 'items', 'iteration'],
  },
  {
    id: 'py-dict-016',
    category: 'dict',
    difficulty: 'medium',
    title: 'Pop with Default',
    text: 'Remove and return the value for "country", returning "USA" if key not found',
    setup: 'person = {"name": "Alice", "age": 30}',
    setupCode: 'person = {"name": "Alice", "age": 30}',
    expected: 'USA',
    sample: 'person.pop("country", "USA")',
    hints: ['pop() accepts a default value as second argument'],
    validPatterns: [/person\.pop\s*\(\s*["']country["']\s*,\s*["']USA["']\s*\)/],
    tags: ['dict-method', 'pop', 'default'],
  },
  {
    id: 'py-dict-017',
    category: 'dict',
    difficulty: 'medium',
    title: 'Update Multiple Values',
    text: 'Update the dictionary with new city and add a country field',
    setup: 'person = {"name": "Alice", "city": "NYC"}',
    setupCode: 'person = {"name": "Alice", "city": "NYC"}',
    expected: { name: 'Alice', city: 'Boston', country: 'USA' },
    sample: 'person.update({"city": "Boston", "country": "USA"}) or person',
    hints: ['update() can take a dictionary or keyword arguments'],
    validPatterns: [
      /person\.update\s*\(\s*\{.*["']city["'].*["']Boston["'].*\}\s*\)/,
      /person\.update\s*\(\s*city\s*=\s*["']Boston["'].*country\s*=\s*["']USA["']\s*\)/,
    ],
    tags: ['dict-method', 'update'],
  },
  {
    id: 'py-dict-018',
    category: 'dict',
    difficulty: 'easy',
    title: 'Create Dict with Default Value',
    text: 'Create a dictionary with keys "a", "b", "c" all set to empty list []',
    setup: 'keys = ["a", "b", "c"]',
    setupCode: 'keys = ["a", "b", "c"]',
    expected: { a: [], b: [], c: [] },
    sample: '{k: [] for k in keys}',
    hints: [
      'dict.fromkeys() shares the same mutable object',
      'Use dict comprehension for independent lists',
    ],
    validPatterns: [
      /\{\s*\w+\s*:\s*\[\s*\]\s+for\s+\w+\s+in\s+keys\s*\}/,
    ],
    tags: ['dict-comprehension', 'initialization'],
  },
  {
    id: 'py-dict-019',
    category: 'dict',
    difficulty: 'medium',
    title: 'Setdefault for Grouping',
    text: 'Use setdefault to group words by their first letter, return the dict',
    setup: 'words = ["apple", "ant", "banana", "cherry"]\ngroups = {}',
    setupCode: 'words = ["apple", "ant", "banana", "cherry"]\ngroups = {}',
    expected: { a: ['apple', 'ant'], b: ['banana'], c: ['cherry'] },
    sample: '[groups.setdefault(w[0], []).append(w) for w in words]; groups',
    hints: [
      'setdefault returns the value if key exists, or sets and returns default',
      'The returned list can be appended to directly',
    ],
    validPatterns: [
      /setdefault\s*\(\s*\w+\s*\[\s*0\s*\]\s*,\s*\[\s*\]\s*\)\.append/,
      /groups\[.*\].*=.*groups\.get\(.*,\s*\[\s*\]\)/,
    ],
    tags: ['dict-method', 'setdefault', 'grouping'],
  },

  // ============================================================
  // SET OPERATIONS - symmetric_difference, issubset, issuperset
  // ============================================================
  {
    id: 'py-set-010',
    category: 'set',
    difficulty: 'easy',
    title: 'Proper Subset Check',
    text: 'Check if set1 is a proper subset of set2 (subset but not equal)',
    setup: 'set1 = {1, 2}\nset2 = {1, 2, 3, 4}',
    setupCode: 'set1 = {1, 2}\nset2 = {1, 2, 3, 4}',
    expected: true,
    sample: 'set1 < set2',
    hints: ['Use < operator for proper subset (not equal)', 'Or combine issubset with !='],
    validPatterns: [
      /set1\s*<\s*set2/,
      /set1\.issubset\s*\(\s*set2\s*\)\s*and\s*set1\s*!=\s*set2/,
    ],
    tags: ['set-method', 'subset', 'comparison'],
  },
  {
    id: 'py-set-011',
    category: 'set',
    difficulty: 'medium',
    title: 'Symmetric Difference Update',
    text: 'Get elements in either set but not both, sorted as a list',
    setup: 'a = {1, 2, 3, 4, 5}\nb = {4, 5, 6, 7, 8}',
    setupCode: 'a = {1, 2, 3, 4, 5}\nb = {4, 5, 6, 7, 8}',
    expected: [1, 2, 3, 6, 7, 8],
    sample: 'sorted(a.symmetric_difference(b))',
    hints: [
      'symmetric_difference returns elements in either but not both',
      'Use sorted() to get a list',
    ],
    validPatterns: [
      /sorted\s*\(\s*a\.symmetric_difference\s*\(\s*b\s*\)\s*\)/,
      /sorted\s*\(\s*a\s*\^\s*b\s*\)/,
    ],
    tags: ['set-method', 'symmetric_difference'],
  },
  {
    id: 'py-set-012',
    category: 'set',
    difficulty: 'medium',
    title: 'Check Superset with Operator',
    text: 'Check if all_skills contains all required_skills using operator',
    setup: 'all_skills = {"python", "java", "sql", "docker", "git"}\nrequired_skills = {"python", "sql"}',
    setupCode: 'all_skills = {"python", "java", "sql", "docker", "git"}\nrequired_skills = {"python", "sql"}',
    expected: true,
    sample: 'all_skills >= required_skills',
    hints: ['Use >= for superset check', 'Or use issuperset() method'],
    validPatterns: [
      /all_skills\s*>=\s*required_skills/,
      /all_skills\.issuperset\s*\(\s*required_skills\s*\)/,
      /required_skills\s*<=\s*all_skills/,
      /required_skills\.issubset\s*\(\s*all_skills\s*\)/,
    ],
    tags: ['set-method', 'issuperset', 'comparison'],
  },

  // ============================================================
  // STRING METHODS - format, f-strings, zfill, center, partition
  // ============================================================
  {
    id: 'py-str-027',
    category: 'string',
    difficulty: 'easy',
    title: 'Zero Padding',
    text: 'Pad the number string with zeros to make it 5 characters wide',
    setup: 'num_str = "42"',
    setupCode: 'num_str = "42"',
    expected: '00042',
    sample: 'num_str.zfill(5)',
    hints: ['Use zfill() to pad with leading zeros'],
    validPatterns: [
      /num_str\.zfill\s*\(\s*5\s*\)/,
      /num_str\.rjust\s*\(\s*5\s*,\s*["']0["']\s*\)/,
    ],
    tags: ['string-method', 'zfill', 'padding'],
  },
  {
    id: 'py-str-028',
    category: 'string',
    difficulty: 'easy',
    title: 'Left and Right Padding',
    text: 'Right-justify the text in a field of width 10, padded with dashes',
    setup: 'text = "Python"',
    setupCode: 'text = "Python"',
    expected: '----Python',
    sample: 'text.rjust(10, "-")',
    hints: ['Use rjust() with width and fill character'],
    validPatterns: [/text\.rjust\s*\(\s*10\s*,\s*["']-["']\s*\)/],
    tags: ['string-method', 'rjust', 'padding'],
  },
  {
    id: 'py-str-029',
    category: 'string',
    difficulty: 'medium',
    title: 'Format String with Named Placeholders',
    text: 'Format the template string with the given values',
    setup: 'template = "{name} scored {score} points"',
    setupCode: 'template = "{name} scored {score} points"',
    expected: 'Alice scored 95 points',
    sample: 'template.format(name="Alice", score=95)',
    hints: ['Use format() with keyword arguments matching placeholder names'],
    validPatterns: [
      /template\.format\s*\(\s*name\s*=\s*["']Alice["']\s*,\s*score\s*=\s*95\s*\)/,
      /template\.format\s*\(\s*score\s*=\s*95\s*,\s*name\s*=\s*["']Alice["']\s*\)/,
    ],
    tags: ['string-method', 'format', 'named-placeholders'],
  },
  {
    id: 'py-str-030',
    category: 'string',
    difficulty: 'medium',
    title: 'F-String Number Formatting',
    text: 'Format the price as currency with 2 decimal places: "$1234.50"',
    setup: 'price = 1234.5',
    setupCode: 'price = 1234.5',
    expected: '$1234.50',
    sample: 'f"${price:.2f}"',
    hints: [
      'Use :.2f format specifier for 2 decimal places',
      'The $ is just a literal character',
    ],
    validPatterns: [
      /f["']\$\{price:\.2f\}["']/,
      /["']\$\{:\.2f\}["']\.format\s*\(\s*price\s*\)/,
    ],
    tags: ['f-string', 'formatting', 'numbers'],
  },
  {
    id: 'py-str-031',
    category: 'string',
    difficulty: 'medium',
    title: 'Partition and Unpack',
    text: 'Split the URL at "://" and return the protocol (e.g., "https")',
    setup: 'url = "https://www.example.com"',
    setupCode: 'url = "https://www.example.com"',
    expected: 'https',
    sample: 'url.partition("://")[0]',
    hints: [
      'partition() returns (before, separator, after)',
      'Index 0 gets the part before separator',
    ],
    validPatterns: [
      /url\.partition\s*\(\s*["'][:\/]{3}["']\s*\)\s*\[\s*0\s*\]/,
      /url\.split\s*\(\s*["'][:\/]{3}["']\s*\)\s*\[\s*0\s*\]/,
    ],
    tags: ['string-method', 'partition', 'url'],
  },

  // ============================================================
  // ITERTOOLS - chain, combinations, permutations, groupby
  // ============================================================
  {
    id: 'py-itertools-001',
    category: 'itertools',
    difficulty: 'easy',
    title: 'Chain Multiple Iterables',
    text: 'Combine three lists into one using itertools.chain',
    setup: 'from itertools import chain\na = [1, 2]\nb = [3, 4]\nc = [5, 6]',
    setupCode: 'from itertools import chain\na = [1, 2]\nb = [3, 4]\nc = [5, 6]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'list(chain(a, b, c))',
    hints: ['chain() takes multiple iterables and yields items from each in order'],
    validPatterns: [
      /list\s*\(\s*chain\s*\(\s*a\s*,\s*b\s*,\s*c\s*\)\s*\)/,
    ],
    tags: ['itertools', 'chain'],
  },
  {
    id: 'py-itertools-002',
    category: 'itertools',
    difficulty: 'medium',
    title: 'Combinations of Two',
    text: 'Get all 2-element combinations from the list',
    setup: 'from itertools import combinations\nitems = ["a", "b", "c"]',
    setupCode: 'from itertools import combinations\nitems = ["a", "b", "c"]',
    expected: [
      ['a', 'b'],
      ['a', 'c'],
      ['b', 'c'],
    ],
    sample: 'list(combinations(items, 2))',
    hints: [
      'combinations(iterable, r) gives r-length tuples in sorted order',
      'No repeated elements',
    ],
    validPatterns: [
      /list\s*\(\s*combinations\s*\(\s*items\s*,\s*2\s*\)\s*\)/,
    ],
    tags: ['itertools', 'combinations'],
  },
  {
    id: 'py-itertools-003',
    category: 'itertools',
    difficulty: 'medium',
    title: 'Permutations of Two',
    text: 'Get all 2-element permutations from the list',
    setup: 'from itertools import permutations\nitems = ["a", "b", "c"]',
    setupCode: 'from itertools import permutations\nitems = ["a", "b", "c"]',
    expected: [
      ['a', 'b'],
      ['a', 'c'],
      ['b', 'a'],
      ['b', 'c'],
      ['c', 'a'],
      ['c', 'b'],
    ],
    sample: 'list(permutations(items, 2))',
    hints: [
      'permutations(iterable, r) gives r-length tuples, all orderings',
      'Order matters in permutations',
    ],
    validPatterns: [
      /list\s*\(\s*permutations\s*\(\s*items\s*,\s*2\s*\)\s*\)/,
    ],
    tags: ['itertools', 'permutations'],
  },
  {
    id: 'py-itertools-004',
    category: 'itertools',
    difficulty: 'hard',
    title: 'Group Consecutive Elements',
    text: 'Group consecutive identical characters, return list of (char, count) tuples',
    setup: 'from itertools import groupby\ntext = "aaabbcccc"',
    setupCode: 'from itertools import groupby\ntext = "aaabbcccc"',
    expected: [
      ['a', 3],
      ['b', 2],
      ['c', 4],
    ],
    sample: '[(k, len(list(g))) for k, g in groupby(text)]',
    hints: [
      'groupby() groups consecutive identical elements',
      'Returns (key, group_iterator) pairs',
      'Convert group to list and count with len()',
    ],
    validPatterns: [
      /\[\s*\(\s*\w+\s*,\s*len\s*\(\s*list\s*\(\s*\w+\s*\)\s*\)\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+groupby\s*\(\s*text\s*\)\s*\]/,
      /\[\s*\(\s*\w+\s*,\s*sum\s*\(\s*1\s+for\s+_\s+in\s+\w+\s*\)\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+groupby\s*\(\s*text\s*\)\s*\]/,
    ],
    tags: ['itertools', 'groupby', 'advanced'],
  },
  {
    id: 'py-itertools-005',
    category: 'itertools',
    difficulty: 'hard',
    title: 'Product of Iterables',
    text: 'Get cartesian product of colors and sizes',
    setup: 'from itertools import product\ncolors = ["red", "blue"]\nsizes = ["S", "M", "L"]',
    setupCode: 'from itertools import product\ncolors = ["red", "blue"]\nsizes = ["S", "M", "L"]',
    expected: [
      ['red', 'S'],
      ['red', 'M'],
      ['red', 'L'],
      ['blue', 'S'],
      ['blue', 'M'],
      ['blue', 'L'],
    ],
    sample: 'list(product(colors, sizes))',
    hints: [
      'product() returns cartesian product of iterables',
      'Equivalent to nested for loops',
    ],
    validPatterns: [
      /list\s*\(\s*product\s*\(\s*colors\s*,\s*sizes\s*\)\s*\)/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s+in\s+colors\s+for\s+\w+\s+in\s+sizes\s*\]/,
    ],
    tags: ['itertools', 'product', 'cartesian'],
  },
  // ============================================================
  // FUNCTIONAL PROGRAMMING - functools, operator, lambdas, higher-order functions
  // ============================================================
  // EASY (8 problems)
  {
    id: 'py-func-001',
    category: 'functional',
    difficulty: 'easy',
    title: 'Simple Lambda Square',
    text: 'Create a lambda function that squares a number and apply it to 7',
    setup: '# Create and call a lambda',
    setupCode: '# Create and call a lambda',
    expected: 49,
    sample: '(lambda x: x ** 2)(7)',
    hints: [
      'Lambda syntax: lambda arguments: expression',
      'You can immediately call a lambda by wrapping it in parentheses',
    ],
    validPatterns: [
      /\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\*\s*2\s*\)\s*\(\s*7\s*\)/,
      /\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*\w+\s*\)\s*\(\s*7\s*\)/,
    ],
    tags: ['lambda', 'basic', 'functional'],
  },
  {
    id: 'py-func-002',
    category: 'functional',
    difficulty: 'easy',
    title: 'Map with Lambda Add 10',
    text: 'Use map() with a lambda to add 10 to each number',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [11, 12, 13, 14, 15],
    sample: 'list(map(lambda x: x + 10, nums))',
    hints: [
      'map() applies a function to each element',
      'Convert the result to a list',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\+\s*10\s*,\s*nums\s*\)\s*\)/,
      /\[\s*\w+\s*\+\s*10\s+for\s+\w+\s+in\s+nums\s*\]/,
    ],
    tags: ['map', 'lambda', 'functional'],
  },
  {
    id: 'py-func-003',
    category: 'functional',
    difficulty: 'easy',
    title: 'Filter with Lambda Positive',
    text: 'Use filter() with a lambda to get only positive numbers',
    setup: 'nums = [-3, -1, 0, 2, 5, -4, 8]',
    setupCode: 'nums = [-3, -1, 0, 2, 5, -4, 8]',
    expected: [2, 5, 8],
    sample: 'list(filter(lambda x: x > 0, nums))',
    hints: [
      'filter() keeps elements where the function returns True',
      'Positive numbers are greater than 0',
    ],
    validPatterns: [
      /list\s*\(\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*>\s*0\s*,\s*nums\s*\)\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*>\s*0\s*\]/,
    ],
    tags: ['filter', 'lambda', 'functional'],
  },
  {
    id: 'py-func-004',
    category: 'functional',
    difficulty: 'easy',
    title: 'Reduce Sum',
    text: 'Use functools.reduce to sum all numbers in the list',
    setup: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    setupCode: 'from functools import reduce\nnums = [1, 2, 3, 4, 5]',
    expected: 15,
    sample: 'reduce(lambda a, b: a + b, nums)',
    hints: [
      'reduce() applies a function cumulatively to items',
      'The lambda takes two arguments: accumulator and current value',
    ],
    validPatterns: [
      /reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\+\s*\w+\s*,\s*nums\s*\)/,
      /reduce\s*\(\s*operator\.add\s*,\s*nums\s*\)/,
    ],
    tags: ['reduce', 'functools', 'lambda', 'functional'],
  },
  {
    id: 'py-func-005',
    category: 'functional',
    difficulty: 'easy',
    title: 'Operator Module Add',
    text: 'Use operator.add to sum two numbers (3 and 5)',
    setup: 'import operator',
    setupCode: 'import operator',
    expected: 8,
    sample: 'operator.add(3, 5)',
    hints: [
      'operator module provides function equivalents of operators',
      'operator.add(a, b) is equivalent to a + b',
    ],
    validPatterns: [/operator\.add\s*\(\s*3\s*,\s*5\s*\)/],
    tags: ['operator', 'functional', 'basic'],
  },
  {
    id: 'py-func-006',
    category: 'functional',
    difficulty: 'easy',
    title: 'Zip Two Lists',
    text: 'Zip names and scores together into a list of tuples',
    setup: 'names = ["Alice", "Bob", "Charlie"]\nscores = [85, 92, 78]',
    setupCode: 'names = ["Alice", "Bob", "Charlie"]\nscores = [85, 92, 78]',
    expected: [
      ['Alice', 85],
      ['Bob', 92],
      ['Charlie', 78],
    ],
    sample: 'list(zip(names, scores))',
    hints: [
      'zip() pairs elements from multiple iterables',
      'Convert to list to see all pairs',
    ],
    validPatterns: [
      /list\s*\(\s*zip\s*\(\s*names\s*,\s*scores\s*\)\s*\)/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+zip\s*\(\s*names\s*,\s*scores\s*\)\s*\]/,
    ],
    tags: ['zip', 'functional', 'basic'],
  },
  {
    id: 'py-func-007',
    category: 'functional',
    difficulty: 'easy',
    title: 'Generator Expression Sum',
    text: 'Use a generator expression to sum squares of numbers 1-5',
    setup: '# Use a generator expression inside sum()',
    setupCode: '# Use a generator expression inside sum()',
    expected: 55,
    sample: 'sum(x**2 for x in range(1, 6))',
    hints: [
      'Generator expressions use parentheses, not brackets',
      'They are memory efficient for large sequences',
      'sum() can directly consume a generator',
    ],
    validPatterns: [
      /sum\s*\(\s*\w+\s*\*\*\s*2\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*6\s*\)\s*\)/,
      /sum\s*\(\s*\w+\s*\*\s*\w+\s+for\s+\w+\s+in\s+range\s*\(\s*1\s*,\s*6\s*\)\s*\)/,
    ],
    tags: ['generator', 'functional', 'memory-efficient'],
  },
  {
    id: 'py-func-008',
    category: 'functional',
    difficulty: 'easy',
    title: 'Operator Itemgetter',
    text: 'Use operator.itemgetter to extract the second element from each tuple',
    setup: 'from operator import itemgetter\ndata = [(1, "a"), (2, "b"), (3, "c")]',
    setupCode: 'from operator import itemgetter\ndata = [(1, "a"), (2, "b"), (3, "c")]',
    expected: ['a', 'b', 'c'],
    sample: 'list(map(itemgetter(1), data))',
    hints: [
      'itemgetter(n) creates a function that gets the nth item',
      'Use with map() to apply to each element',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*itemgetter\s*\(\s*1\s*\)\s*,\s*data\s*\)\s*\)/,
      /\[\s*\w+\s*\[\s*1\s*\]\s+for\s+\w+\s+in\s+data\s*\]/,
    ],
    tags: ['operator', 'itemgetter', 'functional'],
  },
  // MEDIUM (12 problems)
  {
    id: 'py-func-009',
    category: 'functional',
    difficulty: 'medium',
    title: 'Partial Function Double',
    text: 'Use functools.partial to create a doubling function from mul',
    setup: 'from functools import partial\nfrom operator import mul\n# Create double using partial',
    setupCode: 'from functools import partial\nfrom operator import mul',
    expected: 14,
    sample: 'partial(mul, 2)(7)',
    hints: [
      'partial() freezes some arguments of a function',
      'partial(mul, 2) creates a function that multiplies by 2',
    ],
    validPatterns: [
      /partial\s*\(\s*mul\s*,\s*2\s*\)\s*\(\s*7\s*\)/,
      /partial\s*\(\s*mul\s*,\s*2\s*\)/,
    ],
    tags: ['partial', 'functools', 'functional'],
  },
  {
    id: 'py-func-010',
    category: 'functional',
    difficulty: 'medium',
    title: 'Reduce with Initial Value',
    text: 'Use reduce with an initial value of 100 to subtract all numbers',
    setup: 'from functools import reduce\nnums = [10, 5, 3]',
    setupCode: 'from functools import reduce\nnums = [10, 5, 3]',
    expected: 82,
    sample: 'reduce(lambda a, b: a - b, nums, 100)',
    hints: [
      'reduce() accepts an optional third argument as initial value',
      'The initial value becomes the first accumulator value',
    ],
    validPatterns: [
      /reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*-\s*\w+\s*,\s*nums\s*,\s*100\s*\)/,
      /reduce\s*\(\s*operator\.sub\s*,\s*nums\s*,\s*100\s*\)/,
    ],
    tags: ['reduce', 'functools', 'functional'],
  },
  {
    id: 'py-func-011',
    category: 'functional',
    difficulty: 'medium',
    title: 'Map Multiple Iterables',
    text: 'Use map() with a lambda to add corresponding elements from two lists',
    setup: 'list1 = [1, 2, 3]\nlist2 = [10, 20, 30]',
    setupCode: 'list1 = [1, 2, 3]\nlist2 = [10, 20, 30]',
    expected: [11, 22, 33],
    sample: 'list(map(lambda a, b: a + b, list1, list2))',
    hints: [
      'map() can take multiple iterables',
      'The lambda should accept as many arguments as iterables',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\+\s*\w+\s*,\s*list1\s*,\s*list2\s*\)\s*\)/,
      /list\s*\(\s*map\s*\(\s*operator\.add\s*,\s*list1\s*,\s*list2\s*\)\s*\)/,
      /\[\s*\w+\s*\+\s*\w+\s+for\s+\w+\s*,\s*\w+\s+in\s+zip\s*\(\s*list1\s*,\s*list2\s*\)\s*\]/,
    ],
    tags: ['map', 'lambda', 'functional', 'multiple-iterables'],
  },
  {
    id: 'py-func-012',
    category: 'functional',
    difficulty: 'medium',
    title: 'Starmap Apply Tuples',
    text: 'Use itertools.starmap to apply pow to list of (base, exp) tuples',
    setup: 'from itertools import starmap\npairs = [(2, 3), (3, 2), (10, 2)]',
    setupCode: 'from itertools import starmap\npairs = [(2, 3), (3, 2), (10, 2)]',
    expected: [8, 9, 100],
    sample: 'list(starmap(pow, pairs))',
    hints: [
      'starmap() unpacks each tuple as arguments to the function',
      'Similar to map() but for pre-packaged argument tuples',
    ],
    validPatterns: [
      /list\s*\(\s*starmap\s*\(\s*pow\s*,\s*pairs\s*\)\s*\)/,
      /\[\s*pow\s*\(\s*\*\s*\w+\s*\)\s+for\s+\w+\s+in\s+pairs\s*\]/,
      /\[\s*\w+\s*\*\*\s*\w+\s+for\s+\w+\s*,\s*\w+\s+in\s+pairs\s*\]/,
    ],
    tags: ['starmap', 'itertools', 'functional'],
  },
  {
    id: 'py-func-013',
    category: 'functional',
    difficulty: 'medium',
    title: 'Closure Counter',
    text: 'Create a closure that counts how many times it has been called. Call it 3 times and return the count.',
    setup: 'def make_counter():\n    count = [0]\n    def counter():\n        count[0] += 1\n        return count[0]\n    return counter\n\nc = make_counter()',
    setupCode: 'def make_counter():\n    count = [0]\n    def counter():\n        count[0] += 1\n        return count[0]\n    return counter\n\nc = make_counter()',
    expected: 3,
    sample: 'c(); c(); c()',
    hints: [
      'Call the closure function three times',
      'Each call increments and returns the count',
      'The last call returns 3',
    ],
    validPatterns: [
      /c\s*\(\s*\)\s*;\s*c\s*\(\s*\)\s*;\s*c\s*\(\s*\)/,
      /\[c\s*\(\s*\)\s+for\s+_\s+in\s+range\s*\(\s*3\s*\)\s*\]\s*\[\s*-1\s*\]/,
    ],
    tags: ['closure', 'functional', 'state'],
  },
  {
    id: 'py-func-014',
    category: 'functional',
    difficulty: 'medium',
    title: 'Reduce Product',
    text: 'Use reduce with operator.mul to calculate the product of all numbers',
    setup: 'from functools import reduce\nimport operator\nnums = [1, 2, 3, 4, 5]',
    setupCode: 'from functools import reduce\nimport operator\nnums = [1, 2, 3, 4, 5]',
    expected: 120,
    sample: 'reduce(operator.mul, nums)',
    hints: [
      'operator.mul is a function that multiplies two numbers',
      'reduce() will apply it cumulatively: 1*2*3*4*5',
    ],
    validPatterns: [
      /reduce\s*\(\s*operator\.mul\s*,\s*nums\s*\)/,
      /reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\*\s*\w+\s*,\s*nums\s*\)/,
    ],
    tags: ['reduce', 'operator', 'functools', 'functional'],
  },
  {
    id: 'py-func-015',
    category: 'functional',
    difficulty: 'medium',
    title: 'Filter Map Chain',
    text: 'Filter even numbers then double them using functional chaining',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]',
    expected: [4, 8, 12, 16, 20],
    sample: 'list(map(lambda x: x * 2, filter(lambda x: x % 2 == 0, nums)))',
    hints: [
      'Chain filter() and map() together',
      'filter() first, then map() on the result',
      'Or use a single list comprehension',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*2\s*,\s*filter\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*%\s*2\s*==\s*0\s*,\s*nums\s*\)\s*\)\s*\)/,
      /\[\s*\w+\s*\*\s*2\s+for\s+\w+\s+in\s+nums\s+if\s+\w+\s*%\s*2\s*==\s*0\s*\]/,
    ],
    tags: ['filter', 'map', 'functional', 'chaining'],
  },
  {
    id: 'py-func-016',
    category: 'functional',
    difficulty: 'medium',
    title: 'Zip with Index Enumerate Style',
    text: 'Use zip with range to create indexed pairs (like enumerate)',
    setup: 'letters = ["a", "b", "c", "d"]',
    setupCode: 'letters = ["a", "b", "c", "d"]',
    expected: [
      [0, 'a'],
      [1, 'b'],
      [2, 'c'],
      [3, 'd'],
    ],
    sample: 'list(zip(range(len(letters)), letters))',
    hints: [
      'zip() can pair indices from range() with elements',
      'This is similar to what enumerate() does',
    ],
    validPatterns: [
      /list\s*\(\s*zip\s*\(\s*range\s*\(\s*len\s*\(\s*letters\s*\)\s*\)\s*,\s*letters\s*\)\s*\)/,
      /list\s*\(\s*enumerate\s*\(\s*letters\s*\)\s*\)/,
      /\[\s*\(\s*\w+\s*,\s*\w+\s*\)\s+for\s+\w+\s*,\s*\w+\s+in\s+enumerate\s*\(\s*letters\s*\)\s*\]/,
    ],
    tags: ['zip', 'range', 'functional', 'enumerate'],
  },
  {
    id: 'py-func-017',
    category: 'functional',
    difficulty: 'medium',
    title: 'Operator Attrgetter',
    text: 'Use operator.attrgetter to extract the "name" attribute from objects',
    setup: 'from operator import attrgetter\nfrom collections import namedtuple\nPerson = namedtuple("Person", ["name", "age"])\npeople = [Person("Alice", 30), Person("Bob", 25), Person("Charlie", 35)]',
    setupCode: 'from operator import attrgetter\nfrom collections import namedtuple\nPerson = namedtuple("Person", ["name", "age"])\npeople = [Person("Alice", 30), Person("Bob", 25), Person("Charlie", 35)]',
    expected: ['Alice', 'Bob', 'Charlie'],
    sample: 'list(map(attrgetter("name"), people))',
    hints: [
      'attrgetter("attr") creates a function that gets the named attribute',
      'Useful for extracting attributes from objects in map/sorted',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*attrgetter\s*\(\s*["']name["']\s*\)\s*,\s*people\s*\)\s*\)/,
      /\[\s*\w+\.name\s+for\s+\w+\s+in\s+people\s*\]/,
    ],
    tags: ['operator', 'attrgetter', 'functional'],
  },
  {
    id: 'py-func-018',
    category: 'functional',
    difficulty: 'medium',
    title: 'Itertools Tee Duplicate',
    text: 'Use itertools.tee to create two independent iterators from one',
    setup: 'from itertools import tee\nnums = iter([1, 2, 3])\niter1, iter2 = tee(nums, 2)',
    setupCode: 'from itertools import tee\nnums = iter([1, 2, 3])\niter1, iter2 = tee(nums, 2)',
    expected: [
      [1, 2, 3],
      [1, 2, 3],
    ],
    sample: '[list(iter1), list(iter2)]',
    hints: [
      'tee() creates independent iterators from one source',
      'Both iterators can be consumed independently',
    ],
    validPatterns: [
      /\[\s*list\s*\(\s*iter1\s*\)\s*,\s*list\s*\(\s*iter2\s*\)\s*\]/,
      /list\s*\(\s*iter1\s*\)\s*,\s*list\s*\(\s*iter2\s*\)/,
    ],
    tags: ['tee', 'itertools', 'functional'],
  },
  {
    id: 'py-func-019',
    category: 'functional',
    difficulty: 'medium',
    title: 'Compose Functions',
    text: 'Create a composed function that first doubles, then adds 1 (applied in that order)',
    setup: 'double = lambda x: x * 2\nadd_one = lambda x: x + 1\n# Apply double then add_one to 5',
    setupCode: 'double = lambda x: x * 2\nadd_one = lambda x: x + 1',
    expected: 11,
    sample: 'add_one(double(5))',
    hints: [
      'Function composition applies functions right to left',
      'double(5) = 10, then add_one(10) = 11',
    ],
    validPatterns: [
      /add_one\s*\(\s*double\s*\(\s*5\s*\)\s*\)/,
      /\(\s*lambda\s+\w+\s*:\s*add_one\s*\(\s*double\s*\(\s*\w+\s*\)\s*\)\s*\)\s*\(\s*5\s*\)/,
    ],
    tags: ['composition', 'lambda', 'functional'],
  },
  {
    id: 'py-func-020',
    category: 'functional',
    difficulty: 'medium',
    title: 'Sorted with Key Function',
    text: 'Sort strings by their length using a key function',
    setup: 'words = ["python", "is", "awesome", "and", "functional"]',
    setupCode: 'words = ["python", "is", "awesome", "and", "functional"]',
    expected: ['is', 'and', 'python', 'awesome', 'functional'],
    sample: 'sorted(words, key=len)',
    hints: [
      'sorted() accepts a key parameter for custom sorting',
      'len function returns string length',
    ],
    validPatterns: [
      /sorted\s*\(\s*words\s*,\s*key\s*=\s*len\s*\)/,
      /sorted\s*\(\s*words\s*,\s*key\s*=\s*lambda\s+\w+\s*:\s*len\s*\(\s*\w+\s*\)\s*\)/,
    ],
    tags: ['sorted', 'key', 'functional'],
  },
  // HARD (5 problems)
  {
    id: 'py-func-021',
    category: 'functional',
    difficulty: 'hard',
    title: 'LRU Cache Fibonacci',
    text: 'Calculate fibonacci(30) using lru_cache decorated function',
    setup: 'from functools import lru_cache\n\n@lru_cache(maxsize=None)\ndef fib(n):\n    if n < 2:\n        return n\n    return fib(n - 1) + fib(n - 2)',
    setupCode: 'from functools import lru_cache\n\n@lru_cache(maxsize=None)\ndef fib(n):\n    if n < 2:\n        return n\n    return fib(n - 1) + fib(n - 2)',
    expected: 832040,
    sample: 'fib(30)',
    hints: [
      'lru_cache memoizes function results',
      'Without caching, fibonacci(30) would be extremely slow',
      'Just call fib(30)',
    ],
    validPatterns: [/fib\s*\(\s*30\s*\)/],
    tags: ['lru_cache', 'functools', 'memoization', 'functional'],
  },
  {
    id: 'py-func-022',
    category: 'functional',
    difficulty: 'hard',
    title: 'Decorator with Wraps',
    text: 'Create a decorator that logs function calls while preserving function metadata',
    setup: 'from functools import wraps\n\ndef logger(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        print(f"Calling {func.__name__}")\n        return func(*args, **kwargs)\n    return wrapper\n\n@logger\ndef greet(name):\n    """Greet someone by name."""\n    return f"Hello, {name}!"\n\n# Return the docstring of greet',
    setupCode: 'from functools import wraps\n\ndef logger(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        print(f"Calling {func.__name__}")\n        return func(*args, **kwargs)\n    return wrapper\n\n@logger\ndef greet(name):\n    """Greet someone by name."""\n    return f"Hello, {name}!"',
    expected: 'Greet someone by name.',
    sample: 'greet.__doc__',
    hints: [
      '@wraps preserves the original function metadata',
      'Without @wraps, __doc__ would be None',
      'Access __doc__ attribute to get the docstring',
    ],
    validPatterns: [/greet\.__doc__/, /getattr\s*\(\s*greet\s*,\s*["']__doc__["']\s*\)/],
    tags: ['wraps', 'decorator', 'functools', 'functional'],
  },
  {
    id: 'py-func-023',
    category: 'functional',
    difficulty: 'hard',
    title: 'Complex Reduce Nested',
    text: 'Use reduce to flatten a nested list one level deep',
    setup: 'from functools import reduce\nimport operator\nnested = [[1, 2], [3, 4], [5, 6]]',
    setupCode: 'from functools import reduce\nimport operator\nnested = [[1, 2], [3, 4], [5, 6]]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: 'reduce(operator.add, nested)',
    hints: [
      'Adding lists concatenates them',
      'reduce(operator.add, [[1,2], [3,4]]) = [1,2] + [3,4]',
      'Or use reduce with lambda a, b: a + b',
    ],
    validPatterns: [
      /reduce\s*\(\s*operator\.add\s*,\s*nested\s*\)/,
      /reduce\s*\(\s*lambda\s+\w+\s*,\s*\w+\s*:\s*\w+\s*\+\s*\w+\s*,\s*nested\s*\)/,
      /reduce\s*\(\s*operator\.concat\s*,\s*nested\s*\)/,
      /\[\s*\w+\s+for\s+\w+\s+in\s+nested\s+for\s+\w+\s+in\s+\w+\s*\]/,
    ],
    tags: ['reduce', 'flatten', 'functools', 'functional'],
  },
  {
    id: 'py-func-024',
    category: 'functional',
    difficulty: 'hard',
    title: 'Partial with Multiple Args',
    text: 'Create a partial function for string formatting with a fixed template',
    setup: 'from functools import partial\n\ndef format_greeting(greeting, name, punctuation):\n    return f"{greeting}, {name}{punctuation}"\n\n# Create hello_to that fixes greeting="Hello" and punctuation="!"',
    setupCode: 'from functools import partial\n\ndef format_greeting(greeting, name, punctuation):\n    return f"{greeting}, {name}{punctuation}"',
    expected: 'Hello, World!',
    sample: 'partial(format_greeting, "Hello", punctuation="!")(name="World")',
    hints: [
      'partial() can fix both positional and keyword arguments',
      'The remaining args can be filled in when calling',
      'Use keyword arguments for non-sequential parameter binding',
    ],
    validPatterns: [
      /partial\s*\(\s*format_greeting\s*,\s*["']Hello["']\s*,\s*punctuation\s*=\s*["']!["']\s*\)\s*\(\s*name\s*=\s*["']World["']\s*\)/,
      /partial\s*\(\s*format_greeting\s*,\s*["']Hello["']\s*,\s*punctuation\s*=\s*["']!["']\s*\)\s*\(\s*["']World["']\s*\)/,
    ],
    tags: ['partial', 'functools', 'functional', 'advanced'],
  },
  {
    id: 'py-func-025',
    category: 'functional',
    difficulty: 'hard',
    title: 'Higher Order Function Pipeline',
    text: 'Create and apply a pipeline that processes a number through multiple transformations',
    setup: 'from functools import reduce\n\ndef pipeline(*funcs):\n    def inner(value):\n        return reduce(lambda acc, f: f(acc), funcs, value)\n    return inner\n\n# Create a pipeline: double -> add 10 -> square, and apply to 3',
    setupCode: 'from functools import reduce\n\ndef pipeline(*funcs):\n    def inner(value):\n        return reduce(lambda acc, f: f(acc), funcs, value)\n    return inner',
    expected: 256,
    sample: 'pipeline(lambda x: x * 2, lambda x: x + 10, lambda x: x ** 2)(3)',
    hints: [
      'pipeline() creates a function that applies functions in order',
      '3 -> double -> 6 -> add 10 -> 16 -> square -> 256',
      'The functions are applied left to right',
    ],
    validPatterns: [
      /pipeline\s*\(\s*lambda\s+\w+\s*:\s*\w+\s*\*\s*2\s*,\s*lambda\s+\w+\s*:\s*\w+\s*\+\s*10\s*,\s*lambda\s+\w+\s*:\s*\w+\s*\*\*\s*2\s*\)\s*\(\s*3\s*\)/,
      /pipeline\s*\([^)]+\)\s*\(\s*3\s*\)/,
    ],
    tags: ['pipeline', 'reduce', 'higher-order', 'functional', 'advanced'],
  },

  // ============================================================
  // ADVANCED LIST OPERATIONS (25 problems)
  // Covers: slicing patterns, list multiplication, unpacking, bisect, heapq, deque, flattening, zip_longest
  // ============================================================

  // --- SLICING PATTERNS (5 problems: 3 easy, 2 medium) ---
  {
    id: 'py-list-038',
    category: 'list',
    difficulty: 'easy',
    title: 'Get Every Other Element',
    text: 'Extract every other element from the list using slice step',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [0, 2, 4, 6, 8],
    sample: 'nums[::2]',
    hints: [
      'Use slice notation with a step: list[start:stop:step]',
      'Omitting start and stop means the entire list',
    ],
    validPatterns: [
      /nums\s*\[\s*::\s*2\s*\]/,
      /nums\s*\[\s*0\s*:\s*:\s*2\s*\]/,
      /nums\s*\[\s*0\s*:\s*10\s*:\s*2\s*\]/,
    ],
    tags: ['slicing', 'step', 'basic'],
  },
  {
    id: 'py-list-039',
    category: 'list',
    difficulty: 'easy',
    title: 'Get Every Third Element Starting from Index 1',
    text: 'Extract every third element starting from index 1',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [1, 4, 7],
    sample: 'nums[1::3]',
    hints: [
      'Specify start index before the first colon',
      'Step of 3 means every third element',
    ],
    validPatterns: [
      /nums\s*\[\s*1\s*::\s*3\s*\]/,
      /nums\s*\[\s*1\s*:\s*10\s*:\s*3\s*\]/,
    ],
    tags: ['slicing', 'step', 'basic'],
  },
  {
    id: 'py-list-040',
    category: 'list',
    difficulty: 'easy',
    title: 'Get Last Three Elements Using Negative Index',
    text: 'Extract the last three elements using negative indexing',
    setup: 'nums = [10, 20, 30, 40, 50, 60, 70]',
    setupCode: 'nums = [10, 20, 30, 40, 50, 60, 70]',
    expected: [50, 60, 70],
    sample: 'nums[-3:]',
    hints: [
      'Negative indices count from the end',
      '-1 is the last element, -3 is third from the end',
    ],
    validPatterns: [
      /nums\s*\[\s*-3\s*:\s*\]/,
      /nums\s*\[\s*-3\s*:\s*None\s*\]/,
    ],
    tags: ['slicing', 'negative-index', 'basic'],
  },
  {
    id: 'py-list-041',
    category: 'list',
    difficulty: 'medium',
    title: 'Reverse with Negative Step',
    text: 'Get elements from index 6 down to index 2 (inclusive) in reverse',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [6, 5, 4, 3, 2],
    sample: 'nums[6:1:-1]',
    hints: [
      'Negative step reverses direction',
      'When step is negative, start should be greater than stop',
      'Stop is exclusive, so use index 1 to include index 2',
    ],
    validPatterns: [
      /nums\s*\[\s*6\s*:\s*1\s*:\s*-1\s*\]/,
    ],
    tags: ['slicing', 'negative-step', 'intermediate'],
  },
  {
    id: 'py-list-042',
    category: 'list',
    difficulty: 'medium',
    title: 'Get Every Other Element in Reverse',
    text: 'Extract every other element from the list in reverse order',
    setup: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [9, 7, 5, 3, 1],
    sample: 'nums[::-2]',
    hints: [
      'Combine negative step with a larger magnitude',
      'Step of -2 goes backwards taking every other element',
    ],
    validPatterns: [
      /nums\s*\[\s*::\s*-2\s*\]/,
      /nums\s*\[\s*-1\s*::\s*-2\s*\]/,
    ],
    tags: ['slicing', 'negative-step', 'intermediate'],
  },

  // --- LIST MULTIPLICATION AND REPETITION (2 problems: 2 easy) ---
  {
    id: 'py-list-043',
    category: 'list',
    difficulty: 'easy',
    title: 'Repeat List Elements',
    text: 'Create a new list by repeating the original list 3 times',
    setup: 'pattern = [1, 2, 3]',
    setupCode: 'pattern = [1, 2, 3]',
    expected: [1, 2, 3, 1, 2, 3, 1, 2, 3],
    sample: 'pattern * 3',
    hints: [
      'Lists support the * operator for repetition',
      'This creates a shallow copy repeated',
    ],
    validPatterns: [
      /pattern\s*\*\s*3/,
      /3\s*\*\s*pattern/,
    ],
    tags: ['list-multiplication', 'repetition', 'basic'],
  },
  {
    id: 'py-list-044',
    category: 'list',
    difficulty: 'easy',
    title: 'Initialize List with Default Value',
    text: 'Create a list of 5 zeros',
    setup: '# Create a list of 5 zeros',
    setupCode: '# Create a list of 5 zeros',
    expected: [0, 0, 0, 0, 0],
    sample: '[0] * 5',
    hints: [
      'Use list multiplication to initialize with default values',
      'Multiply a single-element list by the desired length',
    ],
    validPatterns: [
      /\[\s*0\s*\]\s*\*\s*5/,
      /5\s*\*\s*\[\s*0\s*\]/,
    ],
    tags: ['list-multiplication', 'initialization', 'basic'],
  },

  // --- LIST UNPACKING (3 problems: 3 medium) ---
  {
    id: 'py-list-045',
    category: 'list',
    difficulty: 'medium',
    title: 'Head and Tail Unpacking',
    text: 'Unpack the first element as head and remaining elements as tail',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: { head: 1, tail: [2, 3, 4, 5] },
    sample: 'head, *tail = nums; {"head": head, "tail": tail}',
    hints: [
      'Use the * operator to capture multiple elements',
      'Place * before the variable that should collect remaining items',
    ],
    validPatterns: [
      /\w+\s*,\s*\*\s*\w+\s*=\s*nums/,
    ],
    tags: ['unpacking', 'starred-expression', 'intermediate'],
  },
  {
    id: 'py-list-046',
    category: 'list',
    difficulty: 'medium',
    title: 'First, Middle, Last Unpacking',
    text: 'Unpack first element, middle elements, and last element separately',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: { first: 1, middle: [2, 3, 4], last: 5 },
    sample: 'first, *middle, last = nums; {"first": first, "middle": middle, "last": last}',
    hints: [
      'The starred variable captures everything between named positions',
      'You can only have one starred variable in an unpacking',
    ],
    validPatterns: [
      /\w+\s*,\s*\*\s*\w+\s*,\s*\w+\s*=\s*nums/,
    ],
    tags: ['unpacking', 'starred-expression', 'intermediate'],
  },
  {
    id: 'py-list-047',
    category: 'list',
    difficulty: 'medium',
    title: 'Merge Lists with Unpacking',
    text: 'Merge three lists into one using the unpacking operator',
    setup: 'a = [1, 2]\nb = [3, 4]\nc = [5, 6]',
    setupCode: 'a = [1, 2]\nb = [3, 4]\nc = [5, 6]',
    expected: [1, 2, 3, 4, 5, 6],
    sample: '[*a, *b, *c]',
    hints: [
      'Use * to unpack each list inside a new list literal',
      'This is cleaner than using + for concatenation',
    ],
    validPatterns: [
      /\[\s*\*\s*a\s*,\s*\*\s*b\s*,\s*\*\s*c\s*\]/,
      /a\s*\+\s*b\s*\+\s*c/,
    ],
    tags: ['unpacking', 'merge', 'intermediate'],
  },

  // --- BISECT MODULE (3 problems: 2 medium, 1 hard) ---
  {
    id: 'py-list-048',
    category: 'list',
    difficulty: 'medium',
    title: 'Find Insertion Point with bisect_left',
    text: 'Find the leftmost insertion point for value 25 in a sorted list',
    setup: 'import bisect\nsorted_nums = [10, 20, 30, 30, 40, 50]',
    setupCode: 'import bisect\nsorted_nums = [10, 20, 30, 30, 40, 50]',
    expected: 2,
    sample: 'bisect.bisect_left(sorted_nums, 25)',
    hints: [
      'bisect_left finds the leftmost position where value could be inserted',
      'The list must be sorted',
    ],
    validPatterns: [
      /bisect\.bisect_left\s*\(\s*sorted_nums\s*,\s*25\s*\)/,
      /bisect_left\s*\(\s*sorted_nums\s*,\s*25\s*\)/,
    ],
    tags: ['bisect', 'binary-search', 'intermediate'],
  },
  {
    id: 'py-list-049',
    category: 'list',
    difficulty: 'medium',
    title: 'Find Insertion Point with bisect_right',
    text: 'Find the rightmost insertion point for value 30 (after existing 30s)',
    setup: 'import bisect\nsorted_nums = [10, 20, 30, 30, 40, 50]',
    setupCode: 'import bisect\nsorted_nums = [10, 20, 30, 30, 40, 50]',
    expected: 4,
    sample: 'bisect.bisect_right(sorted_nums, 30)',
    hints: [
      'bisect_right (or bisect) finds position after any existing equal values',
      'Returns index where new element would go to maintain sorted order',
    ],
    validPatterns: [
      /bisect\.bisect_right\s*\(\s*sorted_nums\s*,\s*30\s*\)/,
      /bisect\.bisect\s*\(\s*sorted_nums\s*,\s*30\s*\)/,
      /bisect_right\s*\(\s*sorted_nums\s*,\s*30\s*\)/,
    ],
    tags: ['bisect', 'binary-search', 'intermediate'],
  },
  {
    id: 'py-list-050',
    category: 'list',
    difficulty: 'hard',
    title: 'Insert While Maintaining Sort Order',
    text: 'Insert 25 into the sorted list maintaining sorted order, return the modified list',
    setup: 'import bisect\nsorted_nums = [10, 20, 30, 40, 50]',
    setupCode: 'import bisect\nsorted_nums = [10, 20, 30, 40, 50]',
    expected: [10, 20, 25, 30, 40, 50],
    sample: 'bisect.insort(sorted_nums, 25); sorted_nums',
    hints: [
      'bisect.insort inserts an element in sorted order',
      'This modifies the list in place',
      'It uses bisect_right internally',
    ],
    validPatterns: [
      /bisect\.insort\s*\(\s*sorted_nums\s*,\s*25\s*\)/,
      /bisect\.insort_right\s*\(\s*sorted_nums\s*,\s*25\s*\)/,
      /bisect\.insort_left\s*\(\s*sorted_nums\s*,\s*25\s*\)/,
    ],
    tags: ['bisect', 'insort', 'advanced'],
  },

  // --- HEAPQ MODULE (5 problems: 2 easy, 3 medium) ---
  {
    id: 'py-list-051',
    category: 'list',
    difficulty: 'medium',
    title: 'Create a Min Heap',
    text: 'Convert the list into a min heap in-place',
    setup: 'import heapq\nnums = [5, 3, 8, 1, 9, 2]',
    setupCode: 'import heapq\nnums = [5, 3, 8, 1, 9, 2]',
    expected: [1, 3, 2, 5, 9, 8],
    sample: 'heapq.heapify(nums); nums',
    hints: [
      'heapify transforms a list into a heap in-place',
      'The smallest element is always at index 0',
    ],
    validPatterns: [
      /heapq\.heapify\s*\(\s*nums\s*\)/,
      /heapify\s*\(\s*nums\s*\)/,
    ],
    tags: ['heapq', 'heap', 'intermediate'],
  },
  {
    id: 'py-list-052',
    category: 'list',
    difficulty: 'medium',
    title: 'Push to Heap',
    text: 'Push value 0 onto the heap and return the heap',
    setup: 'import heapq\nheap = [1, 3, 2, 5, 9, 8]',
    setupCode: 'import heapq\nheap = [1, 3, 2, 5, 9, 8]',
    expected: [0, 3, 1, 5, 9, 8, 2],
    sample: 'heapq.heappush(heap, 0); heap',
    hints: [
      'heappush adds an element while maintaining heap property',
      'New smallest element will bubble to the top',
    ],
    validPatterns: [
      /heapq\.heappush\s*\(\s*heap\s*,\s*0\s*\)/,
      /heappush\s*\(\s*heap\s*,\s*0\s*\)/,
    ],
    tags: ['heapq', 'heappush', 'intermediate'],
  },
  {
    id: 'py-list-053',
    category: 'list',
    difficulty: 'medium',
    title: 'Pop from Heap',
    text: 'Pop and return the smallest element from the heap',
    setup: 'import heapq\nheap = [1, 3, 2, 5, 9, 8]',
    setupCode: 'import heapq\nheap = [1, 3, 2, 5, 9, 8]',
    expected: 1,
    sample: 'heapq.heappop(heap)',
    hints: [
      'heappop removes and returns the smallest element',
      'Heap property is maintained after pop',
    ],
    validPatterns: [
      /heapq\.heappop\s*\(\s*heap\s*\)/,
      /heappop\s*\(\s*heap\s*\)/,
    ],
    tags: ['heapq', 'heappop', 'intermediate'],
  },
  {
    id: 'py-list-054',
    category: 'list',
    difficulty: 'easy',
    title: 'Get N Largest Elements',
    text: 'Get the 3 largest elements from the list',
    setup: 'import heapq\nnums = [1, 8, 2, 23, 7, 4, 18, 23, 42, 37, 2]',
    setupCode: 'import heapq\nnums = [1, 8, 2, 23, 7, 4, 18, 23, 42, 37, 2]',
    expected: [42, 37, 23],
    sample: 'heapq.nlargest(3, nums)',
    hints: [
      'nlargest returns the n largest elements in descending order',
      'More efficient than sorting for small n',
    ],
    validPatterns: [
      /heapq\.nlargest\s*\(\s*3\s*,\s*nums\s*\)/,
      /nlargest\s*\(\s*3\s*,\s*nums\s*\)/,
      /sorted\s*\(\s*nums\s*,\s*reverse\s*=\s*True\s*\)\s*\[\s*:\s*3\s*\]/,
    ],
    tags: ['heapq', 'nlargest', 'basic'],
  },
  {
    id: 'py-list-055',
    category: 'list',
    difficulty: 'easy',
    title: 'Get N Smallest Elements',
    text: 'Get the 3 smallest elements from the list',
    setup: 'import heapq\nnums = [1, 8, 2, 23, 7, 4, 18, 23, 42, 37, 2]',
    setupCode: 'import heapq\nnums = [1, 8, 2, 23, 7, 4, 18, 23, 42, 37, 2]',
    expected: [1, 2, 2],
    sample: 'heapq.nsmallest(3, nums)',
    hints: [
      'nsmallest returns the n smallest elements in ascending order',
      'Uses a heap internally for efficiency',
    ],
    validPatterns: [
      /heapq\.nsmallest\s*\(\s*3\s*,\s*nums\s*\)/,
      /nsmallest\s*\(\s*3\s*,\s*nums\s*\)/,
      /sorted\s*\(\s*nums\s*\)\s*\[\s*:\s*3\s*\]/,
    ],
    tags: ['heapq', 'nsmallest', 'basic'],
  },

  // --- DEQUE OPERATIONS (3 problems: 2 medium, 1 hard) ---
  {
    id: 'py-list-056',
    category: 'list',
    difficulty: 'medium',
    title: 'Append to Both Ends',
    text: 'Append 0 to the left and 6 to the right of the deque',
    setup: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    setupCode: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    expected: [0, 1, 2, 3, 4, 5, 6],
    sample: 'd.appendleft(0); d.append(6); list(d)',
    hints: [
      'appendleft adds to the left end in O(1)',
      'append adds to the right end in O(1)',
    ],
    validPatterns: [
      /d\.appendleft\s*\(\s*0\s*\).*d\.append\s*\(\s*6\s*\)/,
      /d\.append\s*\(\s*6\s*\).*d\.appendleft\s*\(\s*0\s*\)/,
    ],
    tags: ['deque', 'appendleft', 'intermediate'],
  },
  {
    id: 'py-list-057',
    category: 'list',
    difficulty: 'medium',
    title: 'Pop from Both Ends',
    text: 'Pop elements from both ends and return them as a tuple (left, right)',
    setup: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    setupCode: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    expected: [1, 5],
    sample: '(d.popleft(), d.pop())',
    hints: [
      'popleft removes and returns the leftmost element',
      'pop removes and returns the rightmost element',
    ],
    validPatterns: [
      /\(\s*d\.popleft\s*\(\s*\)\s*,\s*d\.pop\s*\(\s*\)\s*\)/,
      /\[\s*d\.popleft\s*\(\s*\)\s*,\s*d\.pop\s*\(\s*\)\s*\]/,
    ],
    tags: ['deque', 'popleft', 'intermediate'],
  },
  {
    id: 'py-list-058',
    category: 'list',
    difficulty: 'hard',
    title: 'Rotate Deque',
    text: 'Rotate the deque 2 positions to the right',
    setup: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    setupCode: 'from collections import deque\nd = deque([1, 2, 3, 4, 5])',
    expected: [4, 5, 1, 2, 3],
    sample: 'd.rotate(2); list(d)',
    hints: [
      'rotate(n) rotates n steps to the right',
      'Negative n rotates to the left',
      'rotate() is more efficient than manual pop/append',
    ],
    validPatterns: [
      /d\.rotate\s*\(\s*2\s*\)/,
      /d\.rotate\s*\(\s*-3\s*\)/,
    ],
    tags: ['deque', 'rotate', 'advanced'],
  },

  // --- LIST FLATTENING PATTERNS (4 problems: 2 medium, 2 hard) ---
  {
    id: 'py-list-059',
    category: 'list',
    difficulty: 'medium',
    title: 'Flatten Nested List with Comprehension',
    text: 'Flatten a 2D list into a 1D list using list comprehension',
    setup: 'nested = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]',
    setupCode: 'nested = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]',
    expected: [1, 2, 3, 4, 5, 6, 7, 8, 9],
    sample: '[item for sublist in nested for item in sublist]',
    hints: [
      'Use nested for loops in the comprehension',
      'Outer loop iterates over sublists, inner loop over items',
    ],
    validPatterns: [
      /\[\s*\w+\s+for\s+\w+\s+in\s+nested\s+for\s+\w+\s+in\s+\w+\s*\]/,
      /sum\s*\(\s*nested\s*,\s*\[\s*\]\s*\)/,
    ],
    tags: ['flattening', 'list-comprehension', 'intermediate'],
  },
  {
    id: 'py-list-060',
    category: 'list',
    difficulty: 'medium',
    title: 'Flatten with itertools.chain',
    text: 'Flatten a 2D list using itertools.chain.from_iterable',
    setup: 'from itertools import chain\nnested = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]',
    setupCode: 'from itertools import chain\nnested = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]',
    expected: [1, 2, 3, 4, 5, 6, 7, 8, 9],
    sample: 'list(chain.from_iterable(nested))',
    hints: [
      'chain.from_iterable flattens one level of nesting',
      'More efficient than sum() for flattening',
    ],
    validPatterns: [
      /list\s*\(\s*chain\.from_iterable\s*\(\s*nested\s*\)\s*\)/,
      /list\s*\(\s*chain\s*\(\s*\*\s*nested\s*\)\s*\)/,
    ],
    tags: ['flattening', 'itertools', 'chain', 'intermediate'],
  },
  {
    id: 'py-list-061',
    category: 'list',
    difficulty: 'hard',
    title: 'Deep Flatten Recursive',
    text: 'Flatten an arbitrarily nested list structure',
    setup: 'nested = [1, [2, [3, 4], 5], [6, [7, [8, 9]]]]',
    setupCode: 'nested = [1, [2, [3, 4], 5], [6, [7, [8, 9]]]]',
    expected: [1, 2, 3, 4, 5, 6, 7, 8, 9],
    sample:
      'def flatten(lst): return [item for sublist in lst for item in (flatten(sublist) if isinstance(sublist, list) else [sublist])]\nflatten(nested)',
    hints: [
      'Use recursion to handle arbitrary nesting depth',
      'Check if each element is a list with isinstance()',
      'Base case: if not a list, return as single-element list',
    ],
    validPatterns: [
      /isinstance\s*\(\s*\w+\s*,\s*list\s*\)/,
      /def\s+\w+\s*\(\s*\w+\s*\)/,
    ],
    tags: ['flattening', 'recursion', 'advanced'],
  },
  {
    id: 'py-list-062',
    category: 'list',
    difficulty: 'hard',
    title: 'Flatten with Generator',
    text: 'Create a generator function that yields flattened elements from nested lists',
    setup: 'nested = [[1, 2], [3, [4, 5]], 6]',
    setupCode: 'nested = [[1, 2], [3, [4, 5]], 6]',
    expected: [1, 2, 3, 4, 5, 6],
    sample:
      'def flatten_gen(lst):\n    for item in lst:\n        if isinstance(item, list):\n            yield from flatten_gen(item)\n        else:\n            yield item\nlist(flatten_gen(nested))',
    hints: [
      'Use yield for generator functions',
      'yield from delegates to another generator',
      'Recursively yield from nested lists',
    ],
    validPatterns: [
      /yield\s+from/,
      /yield\s+\w+/,
      /def\s+\w+\s*\(\s*\w+\s*\)/,
    ],
    tags: ['flattening', 'generator', 'yield-from', 'advanced'],
  },

  // --- ZIP WITH ITERTOOLS (5 problems: 2 medium, 3 hard) ---
  {
    id: 'py-list-063',
    category: 'list',
    difficulty: 'medium',
    title: 'Zip with Fill Value',
    text: 'Zip two unequal lists, filling missing values with None',
    setup: 'from itertools import zip_longest\na = [1, 2, 3, 4, 5]\nb = ["a", "b", "c"]',
    setupCode: 'from itertools import zip_longest\na = [1, 2, 3, 4, 5]\nb = ["a", "b", "c"]',
    expected: [
      [1, 'a'],
      [2, 'b'],
      [3, 'c'],
      [4, null],
      [5, null],
    ],
    sample: 'list(zip_longest(a, b))',
    hints: [
      'zip_longest continues until the longest iterable is exhausted',
      'Default fill value is None',
    ],
    validPatterns: [
      /list\s*\(\s*zip_longest\s*\(\s*a\s*,\s*b\s*\)\s*\)/,
      /list\s*\(\s*zip_longest\s*\(\s*a\s*,\s*b\s*,\s*fillvalue\s*=\s*None\s*\)\s*\)/,
    ],
    tags: ['zip', 'zip_longest', 'itertools', 'intermediate'],
  },
  {
    id: 'py-list-064',
    category: 'list',
    difficulty: 'hard',
    title: 'Zip with Custom Fill Value',
    text: 'Zip two unequal lists, using 0 as the fill value for missing elements',
    setup: 'from itertools import zip_longest\nnums1 = [1, 2, 3]\nnums2 = [10, 20, 30, 40, 50]',
    setupCode: 'from itertools import zip_longest\nnums1 = [1, 2, 3]\nnums2 = [10, 20, 30, 40, 50]',
    expected: [
      [1, 10],
      [2, 20],
      [3, 30],
      [0, 40],
      [0, 50],
    ],
    sample: 'list(zip_longest(nums1, nums2, fillvalue=0))',
    hints: [
      'Use the fillvalue parameter to specify a custom fill',
      'The fill value applies to all shorter iterables',
    ],
    validPatterns: [
      /list\s*\(\s*zip_longest\s*\(\s*nums1\s*,\s*nums2\s*,\s*fillvalue\s*=\s*0\s*\)\s*\)/,
    ],
    tags: ['zip', 'zip_longest', 'fillvalue', 'advanced'],
  },
  {
    id: 'py-list-065',
    category: 'list',
    difficulty: 'hard',
    title: 'Transpose Matrix with Zip',
    text: 'Transpose a matrix (list of lists) using zip and unpacking',
    setup: 'matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]',
    setupCode: 'matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]',
    expected: [
      [1, 4, 7],
      [2, 5, 8],
      [3, 6, 9],
    ],
    sample: 'list(map(list, zip(*matrix)))',
    hints: [
      'Use * to unpack the rows as arguments to zip',
      'zip pairs up elements from each row',
      'Convert each tuple to a list',
    ],
    validPatterns: [
      /list\s*\(\s*map\s*\(\s*list\s*,\s*zip\s*\(\s*\*\s*matrix\s*\)\s*\)\s*\)/,
      /\[\s*list\s*\(\s*\w+\s*\)\s+for\s+\w+\s+in\s+zip\s*\(\s*\*\s*matrix\s*\)\s*\]/,
    ],
    tags: ['zip', 'transpose', 'unpacking', 'advanced'],
  },
  {
    id: 'py-list-066',
    category: 'list',
    difficulty: 'medium',
    title: 'Pairwise Iteration',
    text: 'Create pairs of consecutive elements from the list',
    setup: 'nums = [1, 2, 3, 4, 5]',
    setupCode: 'nums = [1, 2, 3, 4, 5]',
    expected: [
      [1, 2],
      [2, 3],
      [3, 4],
      [4, 5],
    ],
    sample: 'list(zip(nums, nums[1:]))',
    hints: [
      'Zip the list with a shifted version of itself',
      'nums[1:] starts from the second element',
    ],
    validPatterns: [
      /list\s*\(\s*zip\s*\(\s*nums\s*,\s*nums\s*\[\s*1\s*:\s*\]\s*\)\s*\)/,
      /\[\s*\(\s*nums\s*\[\s*\w+\s*\]\s*,\s*nums\s*\[\s*\w+\s*\+\s*1\s*\]\s*\)\s+for/,
    ],
    tags: ['zip', 'pairwise', 'sliding-window', 'intermediate'],
  },
  {
    id: 'py-list-067',
    category: 'list',
    difficulty: 'hard',
    title: 'Group Into Chunks with Zip',
    text: 'Group list elements into chunks of 3 using zip and iter',
    setup: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9]',
    setupCode: 'nums = [1, 2, 3, 4, 5, 6, 7, 8, 9]',
    expected: [
      [1, 2, 3],
      [4, 5, 6],
      [7, 8, 9],
    ],
    sample: 'list(zip(*[iter(nums)] * 3))',
    hints: [
      'iter(nums) creates an iterator that is shared',
      'Multiplying [iter(nums)] * 3 creates 3 references to the same iterator',
      'zip pulls from the same iterator 3 times per tuple',
    ],
    validPatterns: [
      /list\s*\(\s*zip\s*\(\s*\*\s*\[\s*iter\s*\(\s*nums\s*\)\s*\]\s*\*\s*3\s*\)\s*\)/,
      /\[\s*nums\s*\[\s*\w+\s*:\s*\w+\s*\+\s*3\s*\]\s+for\s+\w+\s+in\s+range\s*\(\s*0\s*,\s*len\s*\(\s*nums\s*\)\s*,\s*3\s*\)\s*\]/,
    ],
    tags: ['zip', 'chunking', 'iter', 'advanced'],
  },

  // ============================================================
  // STRING MANIPULATION - Advanced String Methods (25 problems)
  // ============================================================

  // --- EASY (8 problems) ---
  {
    id: 'py-str-032',
    category: 'string',
    difficulty: 'easy',
    title: 'F-String Basic Formatting',
    text: 'Use an f-string to format the greeting with the name variable',
    setup: 'name = "Alice"',
    setupCode: 'name = "Alice"',
    expected: 'Hello, Alice!',
    sample: 'f"Hello, {name}!"',
    hints: [
      'F-strings start with f before the quote',
      'Use curly braces {} to embed variables',
    ],
    validPatterns: [
      /f["']Hello,\s*\{name\}!["']/,
      /f["']Hello, \{name\}!["']/,
    ],
    tags: ['f-string', 'formatting', 'basic'],
  },
  {
    id: 'py-str-033',
    category: 'string',
    difficulty: 'easy',
    title: 'F-String Number Formatting',
    text: 'Format the price with 2 decimal places using an f-string',
    setup: 'price = 19.5',
    setupCode: 'price = 19.5',
    expected: '$19.50',
    sample: 'f"${price:.2f}"',
    hints: [
      'Use :.2f for 2 decimal places',
      'Format specifiers go after the colon inside braces',
    ],
    validPatterns: [
      /f["']\$\{price:\.2f\}["']/,
      /f["']\$\{price:0?\.2f\}["']/,
    ],
    tags: ['f-string', 'formatting', 'number'],
  },
  {
    id: 'py-str-034',
    category: 'string',
    difficulty: 'easy',
    title: 'String Format Method',
    text: 'Use the .format() method to insert values into the template',
    setup: 'template = "My name is {} and I am {} years old"',
    setupCode: 'template = "My name is {} and I am {} years old"',
    expected: 'My name is Bob and I am 25 years old',
    sample: 'template.format("Bob", 25)',
    hints: [
      'The format() method replaces {} placeholders',
      'Arguments are inserted in order',
    ],
    validPatterns: [/template\.format\s*\(\s*["']Bob["']\s*,\s*25\s*\)/],
    tags: ['format', 'string-method', 'basic'],
  },
  {
    id: 'py-str-035',
    category: 'string',
    difficulty: 'easy',
    title: 'Percent String Formatting',
    text: 'Use % formatting to create the message with name and score',
    setup: 'name = "Charlie"\nscore = 95',
    setupCode: 'name = "Charlie"\nscore = 95',
    expected: 'Charlie scored 95 points',
    sample: '"%s scored %d points" % (name, score)',
    hints: [
      '%s is for strings, %d is for integers',
      'Use a tuple after % for multiple values',
    ],
    validPatterns: [
      /["']%s scored %d points["']\s*%\s*\(\s*name\s*,\s*score\s*\)/,
      /f["']\{name\} scored \{score\} points["']/,
    ],
    tags: ['percent-formatting', 'legacy', 'basic'],
  },
  {
    id: 'py-str-036',
    category: 'string',
    difficulty: 'easy',
    title: 'String Encode to Bytes',
    text: 'Encode the string to bytes using UTF-8 encoding',
    setup: 'text = "Hello"',
    setupCode: 'text = "Hello"',
    expected: "b'Hello'",
    sample: 'text.encode("utf-8")',
    hints: [
      'Use the encode() method with encoding name',
      'UTF-8 is the most common encoding',
    ],
    validPatterns: [/text\.encode\s*\(\s*["']utf-?8["']?\s*\)/i, /text\.encode\s*\(\s*\)/],
    tags: ['encode', 'bytes', 'unicode'],
  },
  {
    id: 'py-str-037',
    category: 'string',
    difficulty: 'easy',
    title: 'Bytes Decode to String',
    text: 'Decode the bytes object back to a string',
    setup: 'data = b"Python"',
    setupCode: 'data = b"Python"',
    expected: 'Python',
    sample: 'data.decode("utf-8")',
    hints: [
      'Use the decode() method on bytes',
      'Specify the same encoding used to encode',
    ],
    validPatterns: [/data\.decode\s*\(\s*["']utf-?8["']?\s*\)/i, /data\.decode\s*\(\s*\)/],
    tags: ['decode', 'bytes', 'unicode'],
  },
  {
    id: 'py-str-038',
    category: 'string',
    difficulty: 'easy',
    title: 'String Expandtabs',
    text: 'Expand tabs in the string to 4 spaces',
    setup: 'text = "Name\\tAge\\tCity"',
    setupCode: 'text = "Name\\tAge\\tCity"',
    expected: 'Name    Age City',
    sample: 'text.expandtabs(4)',
    hints: [
      'Use expandtabs() with the tab size',
      'Tabs are replaced with spaces to align to tab stops',
    ],
    validPatterns: [/text\.expandtabs\s*\(\s*4\s*\)/],
    tags: ['expandtabs', 'string-method', 'whitespace'],
  },
  {
    id: 'py-str-039',
    category: 'string',
    difficulty: 'easy',
    title: 'String Center',
    text: 'Center the text within a width of 20 characters using dashes',
    setup: 'text = "Python"',
    setupCode: 'text = "Python"',
    expected: '-------Python-------',
    sample: 'text.center(20, "-")',
    hints: [
      'Use center(width, fillchar) method',
      'Second argument is the fill character',
    ],
    validPatterns: [/text\.center\s*\(\s*20\s*,\s*["']-["']\s*\)/],
    tags: ['center', 'string-method', 'alignment'],
  },

  // --- MEDIUM (12 problems) ---
  {
    id: 'py-str-040',
    category: 'string',
    difficulty: 'medium',
    title: 'F-String Padding and Alignment',
    text: 'Format the number right-aligned in a 10-character field with leading zeros',
    setup: 'num = 42',
    setupCode: 'num = 42',
    expected: '0000000042',
    sample: 'f"{num:0>10}"',
    hints: [
      'Use :0>10 for right-align with zeros, width 10',
      'Format: {value:fill align width}',
    ],
    validPatterns: [/f["']\{num:0>10\}["']/, /f["']\{num:010\}["']/, /f["']\{num:010d\}["']/],
    tags: ['f-string', 'formatting', 'alignment'],
  },
  {
    id: 'py-str-041',
    category: 'string',
    difficulty: 'medium',
    title: 'Regex Find All Matches',
    text: 'Find all email addresses in the text using regex',
    setup: 'import re\ntext = "Contact us at info@example.com or support@test.org"',
    setupCode: 'import re\ntext = "Contact us at info@example.com or support@test.org"',
    expected: ['info@example.com', 'support@test.org'],
    sample: 're.findall(r"[\\w.-]+@[\\w.-]+", text)',
    hints: [
      'Use re.findall() to get all matches',
      'Email pattern: word chars + @ + word chars',
    ],
    validPatterns: [/re\.findall\s*\(\s*r?["'][^"']*@[^"']*["']\s*,\s*text\s*\)/],
    tags: ['regex', 're-module', 'findall'],
  },
  {
    id: 'py-str-042',
    category: 'string',
    difficulty: 'medium',
    title: 'Regex Substitution',
    text: 'Replace all digits in the string with an asterisk',
    setup: 'import re\ntext = "Phone: 123-456-7890"',
    setupCode: 'import re\ntext = "Phone: 123-456-7890"',
    expected: 'Phone: ***-***-****',
    sample: 're.sub(r"\\d", "*", text)',
    hints: ['Use re.sub(pattern, replacement, string)', '\\d matches any digit'],
    validPatterns: [
      /re\.sub\s*\(\s*r?["']\\d["']\s*,\s*["']\*["']\s*,\s*text\s*\)/,
      /re\.sub\s*\(\s*r?["']\[0-9\]["']\s*,\s*["']\*["']\s*,\s*text\s*\)/,
    ],
    tags: ['regex', 're-module', 'sub'],
  },
  {
    id: 'py-str-043',
    category: 'string',
    difficulty: 'medium',
    title: 'Regex Split',
    text: 'Split the text on any whitespace sequence',
    setup: 'import re\ntext = "Hello   World\\n\\tPython"',
    setupCode: 'import re\ntext = "Hello   World\\n\\tPython"',
    expected: ['Hello', 'World', 'Python'],
    sample: 're.split(r"\\s+", text)',
    hints: [
      'Use re.split() with a pattern',
      '\\s+ matches one or more whitespace characters',
    ],
    validPatterns: [/re\.split\s*\(\s*r?["']\\s\+["']\s*,\s*text\s*\)/],
    tags: ['regex', 're-module', 'split'],
  },
  {
    id: 'py-str-044',
    category: 'string',
    difficulty: 'medium',
    title: 'String Maketrans and Translate',
    text: 'Replace vowels with numbers: a->4, e->3, i->1, o->0',
    setup: 'text = "hello world"',
    setupCode: 'text = "hello world"',
    expected: 'h3ll0 w0rld',
    sample: 'text.translate(str.maketrans("aeio", "4310"))',
    hints: [
      'Use str.maketrans() to create a translation table',
      'Then use translate() with the table',
    ],
    validPatterns: [
      /text\.translate\s*\(\s*str\.maketrans\s*\(\s*["']aeio["']\s*,\s*["']4310["']\s*\)\s*\)/,
      /text\.translate\s*\(\s*\{[^}]*\}\s*\)/,
    ],
    tags: ['maketrans', 'translate', 'string-method'],
  },
  {
    id: 'py-str-045',
    category: 'string',
    difficulty: 'medium',
    title: 'String Translate Delete Characters',
    text: 'Remove all vowels from the string using translate',
    setup: 'text = "Hello World"',
    setupCode: 'text = "Hello World"',
    expected: 'Hll Wrld',
    sample: 'text.translate(str.maketrans("", "", "aeiouAEIOU"))',
    hints: [
      'The third argument to maketrans specifies characters to delete',
      'Leave first two arguments as empty strings',
    ],
    validPatterns: [
      /text\.translate\s*\(\s*str\.maketrans\s*\(\s*["']["']\s*,\s*["']["']\s*,\s*["'][aeiouAEIOU]+["']\s*\)\s*\)/,
    ],
    tags: ['maketrans', 'translate', 'delete'],
  },
  {
    id: 'py-str-046',
    category: 'string',
    difficulty: 'medium',
    title: 'Textwrap Wrap',
    text: 'Wrap the text to lines of maximum 20 characters',
    setup: 'import textwrap\ntext = "The quick brown fox jumps over the lazy dog"',
    setupCode: 'import textwrap\ntext = "The quick brown fox jumps over the lazy dog"',
    expected: ['The quick brown fox', 'jumps over the lazy', 'dog'],
    sample: 'textwrap.wrap(text, 20)',
    hints: ['Use textwrap.wrap(text, width)', 'Returns a list of wrapped lines'],
    validPatterns: [
      /textwrap\.wrap\s*\(\s*text\s*,\s*20\s*\)/,
      /textwrap\.wrap\s*\(\s*text\s*,\s*width\s*=\s*20\s*\)/,
    ],
    tags: ['textwrap', 'wrap', 'formatting'],
  },
  {
    id: 'py-str-047',
    category: 'string',
    difficulty: 'medium',
    title: 'Textwrap Fill',
    text: 'Wrap and join the text into a single string with 25-char width',
    setup: 'import textwrap\ntext = "The quick brown fox jumps over the lazy dog"',
    setupCode: 'import textwrap\ntext = "The quick brown fox jumps over the lazy dog"',
    expected: 'The quick brown fox\njumps over the lazy dog',
    sample: 'textwrap.fill(text, 25)',
    hints: [
      'textwrap.fill() is like wrap() but returns a single string',
      'Lines are joined with newlines',
    ],
    validPatterns: [
      /textwrap\.fill\s*\(\s*text\s*,\s*25\s*\)/,
      /textwrap\.fill\s*\(\s*text\s*,\s*width\s*=\s*25\s*\)/,
    ],
    tags: ['textwrap', 'fill', 'formatting'],
  },
  {
    id: 'py-str-048',
    category: 'string',
    difficulty: 'medium',
    title: 'Textwrap Dedent',
    text: 'Remove common leading whitespace from the indented text',
    setup: 'import textwrap\ntext = "    Line 1\\n    Line 2\\n    Line 3"',
    setupCode: 'import textwrap\ntext = "    Line 1\\n    Line 2\\n    Line 3"',
    expected: 'Line 1\nLine 2\nLine 3',
    sample: 'textwrap.dedent(text)',
    hints: [
      'dedent() removes common leading whitespace',
      'Useful for cleaning up multi-line strings',
    ],
    validPatterns: [/textwrap\.dedent\s*\(\s*text\s*\)/],
    tags: ['textwrap', 'dedent', 'whitespace'],
  },
  {
    id: 'py-str-049',
    category: 'string',
    difficulty: 'medium',
    title: 'Difflib Get Close Matches',
    text: 'Find words similar to "appel" from the word list',
    setup: 'import difflib\nwords = ["apple", "ape", "apples", "peach", "banana"]',
    setupCode: 'import difflib\nwords = ["apple", "ape", "apples", "peach", "banana"]',
    expected: ['apple', 'apples', 'ape'],
    sample: 'difflib.get_close_matches("appel", words)',
    hints: [
      'Use difflib.get_close_matches(word, possibilities)',
      'Returns a list of close matches sorted by similarity',
    ],
    validPatterns: [/difflib\.get_close_matches\s*\(\s*["']appel["']\s*,\s*words\s*\)/],
    tags: ['difflib', 'fuzzy-match', 'similarity'],
  },
  {
    id: 'py-str-050',
    category: 'string',
    difficulty: 'medium',
    title: 'Regex Named Groups',
    text: 'Extract the year, month, and day from the date string using named groups',
    setup: 'import re\ndate = "2024-03-15"',
    setupCode: 'import re\ndate = "2024-03-15"',
    expected: { year: '2024', month: '03', day: '15' },
    sample: 're.match(r"(?P<year>\\d{4})-(?P<month>\\d{2})-(?P<day>\\d{2})", date).groupdict()',
    hints: [
      'Use (?P<name>pattern) for named groups',
      'Call groupdict() on the match object',
    ],
    validPatterns: [
      /re\.match\s*\([^)]*\?P<year>[^)]*\)\.groupdict\s*\(\s*\)/,
      /re\.search\s*\([^)]*\?P<year>[^)]*\)\.groupdict\s*\(\s*\)/,
    ],
    tags: ['regex', 're-module', 'named-groups'],
  },
  {
    id: 'py-str-051',
    category: 'string',
    difficulty: 'medium',
    title: 'Unicode Normalization',
    text: 'Normalize the string to NFC form (composed characters)',
    setup: 'import unicodedata\ntext = "cafe\\u0301"  # cafe with combining acute accent',
    setupCode: 'import unicodedata\ntext = "cafe\\u0301"  # cafe with combining acute accent',
    expected: 'cafe',
    sample: 'unicodedata.normalize("NFC", text)',
    hints: [
      'Use unicodedata.normalize() with form name',
      'NFC composes characters, NFD decomposes them',
    ],
    validPatterns: [/unicodedata\.normalize\s*\(\s*["']NFC["']\s*,\s*text\s*\)/],
    tags: ['unicode', 'normalization', 'unicodedata'],
  },

  // --- HARD (5 problems) ---
  {
    id: 'py-str-052',
    category: 'string',
    difficulty: 'hard',
    title: 'Regex Lookahead Password Validation',
    text: 'Check if password has at least one digit and one uppercase letter using lookaheads',
    setup: 'import re\npassword = "Secret123"',
    setupCode: 'import re\npassword = "Secret123"',
    expected: true,
    sample: 'bool(re.match(r"(?=.*\\d)(?=.*[A-Z]).+", password))',
    hints: [
      'Use (?=...) for positive lookahead',
      'Lookaheads check without consuming characters',
      'Chain multiple lookaheads for multiple conditions',
    ],
    validPatterns: [
      /bool\s*\(\s*re\.match\s*\(\s*r?["'].*\?\=.*["']\s*,\s*password\s*\)\s*\)/,
      /re\.match\s*\(\s*r?["'].*\?\=.*["']\s*,\s*password\s*\)\s*is\s+not\s+None/,
    ],
    tags: ['regex', 'lookahead', 'validation', 'advanced'],
  },
  {
    id: 'py-str-053',
    category: 'string',
    difficulty: 'hard',
    title: 'Difflib Unified Diff',
    text: 'Generate a unified diff between the two text versions',
    setup:
      'import difflib\nold = ["line1", "line2", "line3"]\nnew = ["line1", "line2 modified", "line3", "line4"]',
    setupCode:
      'import difflib\nold = ["line1", "line2", "line3"]\nnew = ["line1", "line2 modified", "line3", "line4"]',
    expected:
      '--- \\n+++ \\n@@ -1,3 +1,4 @@\\n line1\\n-line2\\n+line2 modified\\n line3\\n+line4',
    sample: '"\\n".join(difflib.unified_diff(old, new))',
    hints: [
      'Use difflib.unified_diff() for git-style diffs',
      'Returns a generator of diff lines',
      'Join with newlines for readable output',
    ],
    validPatterns: [
      /["']\\n["']\.join\s*\(\s*difflib\.unified_diff\s*\(\s*old\s*,\s*new\s*\)\s*\)/,
      /list\s*\(\s*difflib\.unified_diff\s*\(\s*old\s*,\s*new\s*\)\s*\)/,
    ],
    tags: ['difflib', 'unified-diff', 'comparison'],
  },
  {
    id: 'py-str-054',
    category: 'string',
    difficulty: 'hard',
    title: 'Complex Regex with Callbacks',
    text: 'Use re.sub with a function to double all numbers in the text',
    setup: 'import re\ntext = "I have 3 cats and 12 dogs"',
    setupCode: 'import re\ntext = "I have 3 cats and 12 dogs"',
    expected: 'I have 6 cats and 24 dogs',
    sample: 're.sub(r"\\d+", lambda m: str(int(m.group()) * 2), text)',
    hints: [
      're.sub() can take a function as the replacement',
      'The function receives a match object',
      'Use m.group() to get the matched text',
    ],
    validPatterns: [
      /re\.sub\s*\(\s*r?["']\\d\+["']\s*,\s*lambda\s+\w+\s*:\s*str\s*\(\s*int\s*\(\s*\w+\.group\s*\(\s*\)\s*\)\s*\*\s*2\s*\)\s*,\s*text\s*\)/,
    ],
    tags: ['regex', 'sub', 'callback', 'advanced'],
  },
  {
    id: 'py-str-055',
    category: 'string',
    difficulty: 'hard',
    title: 'Parse URL Components',
    text: 'Extract protocol, domain, and path from the URL using regex',
    setup: 'import re\nurl = "https://www.example.com/path/to/page"',
    setupCode: 'import re\nurl = "https://www.example.com/path/to/page"',
    expected: { protocol: 'https', domain: 'www.example.com', path: '/path/to/page' },
    sample:
      'm = re.match(r"(?P<protocol>\\w+)://(?P<domain>[^/]+)(?P<path>/.*)", url); m.groupdict()',
    hints: [
      'Use named groups for each URL component',
      '[^/]+ matches any character except forward slash',
      'groupdict() returns a dictionary of named groups',
    ],
    validPatterns: [
      /re\.match\s*\([^)]*\?P<protocol>[^)]*\)\.groupdict\s*\(\s*\)/,
      /re\.match\s*\([^)]*\?P<protocol>[^)]*\)/,
    ],
    tags: ['regex', 'url-parsing', 'named-groups', 'advanced'],
  },
  {
    id: 'py-str-056',
    category: 'string',
    difficulty: 'hard',
    title: 'Sequence Matcher Ratio',
    text: 'Calculate the similarity ratio between two strings using SequenceMatcher',
    setup:
      'from difflib import SequenceMatcher\ns1 = "python programming"\ns2 = "python coding"',
    setupCode:
      'from difflib import SequenceMatcher\ns1 = "python programming"\ns2 = "python coding"',
    expected: 0.5806451612903226,
    sample: 'SequenceMatcher(None, s1, s2).ratio()',
    hints: [
      'Create a SequenceMatcher with (isjunk, a, b)',
      'Call ratio() to get similarity between 0 and 1',
      'Pass None for isjunk to not ignore any characters',
    ],
    validPatterns: [/SequenceMatcher\s*\(\s*None\s*,\s*s1\s*,\s*s2\s*\)\.ratio\s*\(\s*\)/],
    tags: ['difflib', 'sequence-matcher', 'similarity', 'advanced'],
  },

  // ============================================================
  // DICTIONARY AND DATA MANIPULATION - ADVANCED (25 problems)
  // ============================================================
  {
    id: 'py-dict-020',
    category: 'dict',
    difficulty: 'easy',
    title: 'Counter Basic Usage',
    text: 'Count occurrences of each character in the string using Counter',
    setup: 'from collections import Counter\ntext = "abracadabra"',
    setupCode: 'from collections import Counter\ntext = "abracadabra"',
    expected: { a: 5, b: 2, r: 2, c: 1, d: 1 },
    sample: 'dict(Counter(text))',
    hints: ['Counter counts hashable objects', 'It returns a Counter object (subclass of dict)'],
    validPatterns: [/Counter\s*\(\s*text\s*\)/, /dict\s*\(\s*Counter\s*\(\s*text\s*\)\s*\)/],
    tags: ['counter', 'collections'],
  },
  {
    id: 'py-dict-021',
    category: 'dict',
    difficulty: 'easy',
    title: 'Counter Most Common',
    text: 'Find the 2 most common elements in the list using Counter',
    setup: 'from collections import Counter\nnums = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]',
    setupCode: 'from collections import Counter\nnums = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]',
    expected: [[4, 4], [3, 3]],
    sample: 'Counter(nums).most_common(2)',
    hints: ['most_common(n) returns the n most frequent elements'],
    validPatterns: [/Counter\s*\(\s*nums\s*\)\.most_common\s*\(\s*2\s*\)/],
    tags: ['counter', 'collections'],
  },
  {
    id: 'py-dict-022',
    category: 'dict',
    difficulty: 'easy',
    title: 'Merge with Pipe Operator',
    text: 'Merge base config with override config using | operator',
    setup: 'base = {"debug": False, "timeout": 30}\noverride = {"debug": True, "retries": 3}',
    setupCode: 'base = {"debug": False, "timeout": 30}\noverride = {"debug": True, "retries": 3}',
    expected: { debug: true, timeout: 30, retries: 3 },
    sample: 'base | override',
    hints: ['Use | to merge dictionaries (Python 3.9+)'],
    validPatterns: [/base\s*\|\s*override/],
    tags: ['merge', 'dict-operator'],
  },
  {
    id: 'py-dict-023',
    category: 'dict',
    difficulty: 'easy',
    title: 'Dictionary from Two Lists',
    text: 'Create a dictionary pairing names with ages',
    setup: 'names = ["Alice", "Bob", "Charlie"]\nages = [25, 30, 35]',
    setupCode: 'names = ["Alice", "Bob", "Charlie"]\nages = [25, 30, 35]',
    expected: { Alice: 25, Bob: 30, Charlie: 35 },
    sample: 'dict(zip(names, ages))',
    hints: ['Use zip() to pair corresponding elements'],
    validPatterns: [/dict\s*\(\s*zip\s*\(\s*names\s*,\s*ages\s*\)\s*\)/],
    tags: ['dict-comprehension', 'zip'],
  },
  {
    id: 'py-dict-024',
    category: 'dict',
    difficulty: 'easy',
    title: 'Check Key Existence',
    text: 'Check if "email" key exists in the dictionary',
    setup: 'user = {"name": "Alice", "age": 30}',
    setupCode: 'user = {"name": "Alice", "age": 30}',
    expected: false,
    sample: '"email" in user',
    hints: ['Use the "in" operator to check key existence'],
    validPatterns: [/["']email["']\s+in\s+user/],
    tags: ['membership', 'dict-method'],
  },
  {
    id: 'py-dict-025',
    category: 'dict',
    difficulty: 'easy',
    title: 'Clear Dictionary',
    text: 'Remove all items from the dictionary and return its length',
    setup: 'data = {"a": 1, "b": 2, "c": 3}\ndata.clear()',
    setupCode: 'data = {"a": 1, "b": 2, "c": 3}\ndata.clear()',
    expected: 0,
    sample: 'len(data)',
    hints: ['clear() removes all items in-place'],
    validPatterns: [/len\s*\(\s*data\s*\)/],
    tags: ['clear', 'dict-method'],
  },
  {
    id: 'py-dict-026',
    category: 'dict',
    difficulty: 'easy',
    title: 'Enumerate to Index Map',
    text: 'Create a dictionary mapping index to fruit using enumerate',
    setup: 'fruits = ["apple", "banana", "cherry"]',
    setupCode: 'fruits = ["apple", "banana", "cherry"]',
    expected: { 0: 'apple', 1: 'banana', 2: 'cherry' },
    sample: 'dict(enumerate(fruits))',
    hints: ['enumerate() returns index-value pairs'],
    validPatterns: [/dict\s*\(\s*enumerate\s*\(\s*fruits\s*\)\s*\)/],
    tags: ['dict-comprehension', 'enumerate'],
  },
  {
    id: 'py-dict-027',
    category: 'dict',
    difficulty: 'easy',
    title: 'Pop with Default',
    text: 'Remove and return "status" key with default "unknown" if not found',
    setup: 'data = {"name": "test", "value": 42}',
    setupCode: 'data = {"name": "test", "value": 42}',
    expected: 'unknown',
    sample: 'data.pop("status", "unknown")',
    hints: ['pop() can take a default value as second argument'],
    validPatterns: [/data\.pop\s*\(\s*["']status["']\s*,\s*["']unknown["']\s*\)/],
    tags: ['pop', 'dict-method'],
  },
  {
    id: 'py-dict-028',
    category: 'dict',
    difficulty: 'medium',
    title: 'defaultdict with List',
    text: 'Group names by their first letter using defaultdict(list)',
    setup: 'from collections import defaultdict\nnames = ["Alice", "Bob", "Anna", "Charlie", "Amy"]\nresult = defaultdict(list)\nfor name in names:\n    result[name[0]].append(name)',
    setupCode: 'from collections import defaultdict\nnames = ["Alice", "Bob", "Anna", "Charlie", "Amy"]\nresult = defaultdict(list)\nfor name in names:\n    result[name[0]].append(name)',
    expected: { A: ['Alice', 'Anna', 'Amy'], B: ['Bob'], C: ['Charlie'] },
    sample: 'dict(result)',
    hints: ['defaultdict(list) auto-creates empty lists'],
    validPatterns: [/dict\s*\(\s*result\s*\)/],
    tags: ['defaultdict', 'collections', 'grouping'],
  },
  {
    id: 'py-dict-029',
    category: 'dict',
    difficulty: 'medium',
    title: 'defaultdict with Int',
    text: 'Count word occurrences using defaultdict(int)',
    setup: 'from collections import defaultdict\nwords = ["a", "b", "a", "c", "b", "a"]\ncounts = defaultdict(int)\nfor w in words:\n    counts[w] += 1',
    setupCode: 'from collections import defaultdict\nwords = ["a", "b", "a", "c", "b", "a"]\ncounts = defaultdict(int)\nfor w in words:\n    counts[w] += 1',
    expected: { a: 3, b: 2, c: 1 },
    sample: 'dict(counts)',
    hints: ['defaultdict(int) initializes missing keys to 0'],
    validPatterns: [/dict\s*\(\s*counts\s*\)/],
    tags: ['defaultdict', 'collections', 'counting'],
  },
  {
    id: 'py-dict-030',
    category: 'dict',
    difficulty: 'medium',
    title: 'Nested Dictionary Access',
    text: 'Safely get a nested value with get() chaining',
    setup: 'data = {"user": {"profile": {"name": "Alice"}}}',
    setupCode: 'data = {"user": {"profile": {"name": "Alice"}}}',
    expected: 'Alice',
    sample: 'data.get("user", {}).get("profile", {}).get("name", "Unknown")',
    hints: ['Chain get() calls with empty dict defaults'],
    validPatterns: [/data\.get\s*\(.*\)\.get\s*\(.*\)\.get\s*\(/],
    tags: ['nested', 'safe-access'],
  },
  {
    id: 'py-dict-031',
    category: 'dict',
    difficulty: 'medium',
    title: 'Update Nested Dictionary',
    text: 'Update the nested name field to "Bob"',
    setup: 'data = {"user": {"profile": {"name": "Alice", "age": 30}}}',
    setupCode: 'data = {"user": {"profile": {"name": "Alice", "age": 30}}}',
    expected: { user: { profile: { name: 'Bob', age: 30 } } },
    sample: 'data["user"]["profile"]["name"] = "Bob"; data',
    hints: ['Access nested keys with chained brackets'],
    validPatterns: [/data\s*\[.*\]\s*\[.*\]\s*\[.*\]\s*=\s*["']Bob["']/],
    tags: ['nested', 'update'],
  },
  {
    id: 'py-dict-032',
    category: 'dict',
    difficulty: 'medium',
    title: 'Counter Arithmetic',
    text: 'Subtract inventory sold from inventory using Counter subtraction',
    setup: 'from collections import Counter\ninventory = Counter({"apple": 10, "banana": 5, "cherry": 3})\nsold = Counter({"apple": 3, "banana": 2})',
    setupCode: 'from collections import Counter\ninventory = Counter({"apple": 10, "banana": 5, "cherry": 3})\nsold = Counter({"apple": 3, "banana": 2})',
    expected: { apple: 7, banana: 3, cherry: 3 },
    sample: 'dict(inventory - sold)',
    hints: ['Counter supports arithmetic operations'],
    validPatterns: [/inventory\s*-\s*sold/],
    tags: ['counter', 'collections', 'arithmetic'],
  },
  {
    id: 'py-dict-033',
    category: 'dict',
    difficulty: 'medium',
    title: 'ChainMap for Config Layers',
    text: 'Create a layered config using ChainMap (user overrides defaults)',
    setup: 'from collections import ChainMap\ndefaults = {"color": "blue", "size": "medium"}\nuser_prefs = {"color": "red"}',
    setupCode: 'from collections import ChainMap\ndefaults = {"color": "blue", "size": "medium"}\nuser_prefs = {"color": "red"}',
    expected: { color: 'red', size: 'medium' },
    sample: 'dict(ChainMap(user_prefs, defaults))',
    hints: ['ChainMap searches maps in order'],
    validPatterns: [/ChainMap\s*\(\s*user_prefs\s*,\s*defaults\s*\)/],
    tags: ['chainmap', 'collections', 'config'],
  },
  {
    id: 'py-dict-034',
    category: 'dict',
    difficulty: 'medium',
    title: 'Dict Comprehension with Conditional Value',
    text: 'Create a dict with "pass" or "fail" based on score >= 60',
    setup: 'scores = {"Alice": 85, "Bob": 55, "Charlie": 72, "Diana": 45}',
    setupCode: 'scores = {"Alice": 85, "Bob": 55, "Charlie": 72, "Diana": 45}',
    expected: { Alice: 'pass', Bob: 'fail', Charlie: 'pass', Diana: 'fail' },
    sample: '{k: ("pass" if v >= 60 else "fail") for k, v in scores.items()}',
    hints: ['Use ternary expression in dict comprehension'],
    validPatterns: [/\{.*["']pass["'].*if.*else.*["']fail["'].*for.*in\s+scores\.items\s*\(\s*\)\s*\}/],
    tags: ['dict-comprehension', 'conditional'],
  },
  {
    id: 'py-dict-035',
    category: 'dict',
    difficulty: 'medium',
    title: 'In-Place Update with |=',
    text: 'Update the config dict in-place with new settings using |=',
    setup: 'config = {"debug": False, "timeout": 30}\nnew_settings = {"timeout": 60, "retries": 3}',
    setupCode: 'config = {"debug": False, "timeout": 30}\nnew_settings = {"timeout": 60, "retries": 3}',
    expected: { debug: false, timeout: 60, retries: 3 },
    sample: 'config |= new_settings; config',
    hints: ['Use |= for in-place dictionary merge (Python 3.9+)'],
    validPatterns: [/config\s*\|=\s*new_settings/],
    tags: ['merge', 'dict-operator', 'in-place'],
  },
  {
    id: 'py-dict-036',
    category: 'dict',
    difficulty: 'medium',
    title: 'Flatten Nested Dict Values',
    text: 'Extract all leaf values from nested dict into a flat list',
    setup: 'nested = {"a": {"b": 1, "c": 2}, "d": {"e": 3}}',
    setupCode: 'nested = {"a": {"b": 1, "c": 2}, "d": {"e": 3}}',
    expected: [1, 2, 3],
    sample: '[v for inner in nested.values() for v in inner.values()]',
    hints: ['Use nested comprehension to flatten'],
    validPatterns: [/\[.*for.*in\s+nested\.values\s*\(\s*\)\s+for.*in.*\.values\s*\(\s*\)\s*\]/],
    tags: ['nested', 'flatten', 'comprehension'],
  },
  {
    id: 'py-dict-037',
    category: 'dict',
    difficulty: 'medium',
    title: 'Counter Total Count',
    text: 'Get the total count of all items in the Counter',
    setup: 'from collections import Counter\ncounts = Counter({"apple": 5, "banana": 3, "cherry": 2})',
    setupCode: 'from collections import Counter\ncounts = Counter({"apple": 5, "banana": 3, "cherry": 2})',
    expected: 10,
    sample: 'counts.total()',
    hints: ['Counter has a total() method (Python 3.10+)'],
    validPatterns: [/counts\.total\s*\(\s*\)/, /sum\s*\(\s*counts\.values\s*\(\s*\)\s*\)/],
    tags: ['counter', 'collections'],
  },
  {
    id: 'py-dict-038',
    category: 'dict',
    difficulty: 'medium',
    title: 'Sort Dictionary by Value',
    text: 'Sort the dictionary by values in descending order',
    setup: 'scores = {"Alice": 85, "Bob": 92, "Charlie": 78, "Diana": 95}',
    setupCode: 'scores = {"Alice": 85, "Bob": 92, "Charlie": 78, "Diana": 95}',
    expected: { Diana: 95, Bob: 92, Alice: 85, Charlie: 78 },
    sample: 'dict(sorted(scores.items(), key=lambda x: x[1], reverse=True))',
    hints: ['Use sorted() with a key function'],
    validPatterns: [/dict\s*\(\s*sorted\s*\(\s*scores\.items\s*\(\s*\).*reverse\s*=\s*True/],
    tags: ['sorting', 'dict-method'],
  },
  {
    id: 'py-dict-039',
    category: 'dict',
    difficulty: 'medium',
    title: 'OrderedDict Move to End',
    text: 'Move the "b" key to the end of the OrderedDict',
    setup: 'from collections import OrderedDict\nod = OrderedDict([("a", 1), ("b", 2), ("c", 3)])\nod.move_to_end("b")',
    setupCode: 'from collections import OrderedDict\nod = OrderedDict([("a", 1), ("b", 2), ("c", 3)])\nod.move_to_end("b")',
    expected: { a: 1, c: 3, b: 2 },
    sample: 'dict(od)',
    hints: ['OrderedDict has move_to_end() method'],
    validPatterns: [/dict\s*\(\s*od\s*\)/],
    tags: ['ordereddict', 'collections'],
  },
  {
    id: 'py-dict-040',
    category: 'dict',
    difficulty: 'hard',
    title: 'Deep Merge Dictionaries',
    text: 'Merge nested dictionaries recursively (nested values should merge, not replace)',
    setup: 'def deep_merge(d1, d2):\n    result = d1.copy()\n    for k, v in d2.items():\n        if k in result and isinstance(result[k], dict) and isinstance(v, dict):\n            result[k] = deep_merge(result[k], v)\n        else:\n            result[k] = v\n    return result\nbase = {"a": {"x": 1, "y": 2}, "b": 3}\nupdate = {"a": {"y": 20, "z": 30}, "c": 4}',
    setupCode: 'def deep_merge(d1, d2):\n    result = d1.copy()\n    for k, v in d2.items():\n        if k in result and isinstance(result[k], dict) and isinstance(v, dict):\n            result[k] = deep_merge(result[k], v)\n        else:\n            result[k] = v\n    return result\nbase = {"a": {"x": 1, "y": 2}, "b": 3}\nupdate = {"a": {"y": 20, "z": 30}, "c": 4}',
    expected: { a: { x: 1, y: 20, z: 30 }, b: 3, c: 4 },
    sample: 'deep_merge(base, update)',
    hints: ['Recursively merge when both values are dicts'],
    validPatterns: [/deep_merge\s*\(\s*base\s*,\s*update\s*\)/],
    tags: ['nested', 'merge', 'recursive'],
  },
  {
    id: 'py-dict-041',
    category: 'dict',
    difficulty: 'hard',
    title: 'Group and Aggregate Sales',
    text: 'Group sales by product and sum the amounts',
    setup: 'from collections import defaultdict\nsales = [{"product": "A", "amount": 100}, {"product": "B", "amount": 200}, {"product": "A", "amount": 150}, {"product": "B", "amount": 50}]\nresult = defaultdict(int)\nfor s in sales:\n    result[s["product"]] += s["amount"]',
    setupCode: 'from collections import defaultdict\nsales = [{"product": "A", "amount": 100}, {"product": "B", "amount": 200}, {"product": "A", "amount": 150}, {"product": "B", "amount": 50}]\nresult = defaultdict(int)\nfor s in sales:\n    result[s["product"]] += s["amount"]',
    expected: { A: 250, B: 250 },
    sample: 'dict(result)',
    hints: ['Use defaultdict(int) for summing'],
    validPatterns: [/dict\s*\(\s*result\s*\)/],
    tags: ['defaultdict', 'grouping', 'aggregation'],
  },
  {
    id: 'py-dict-042',
    category: 'dict',
    difficulty: 'hard',
    title: 'Transform JSON-like Data',
    text: 'Extract usernames from nested user data into a list',
    setup: 'data = {"users": [{"id": 1, "profile": {"username": "alice"}}, {"id": 2, "profile": {"username": "bob"}}, {"id": 3, "profile": {"username": "charlie"}}]}',
    setupCode: 'data = {"users": [{"id": 1, "profile": {"username": "alice"}}, {"id": 2, "profile": {"username": "bob"}}, {"id": 3, "profile": {"username": "charlie"}}]}',
    expected: ['alice', 'bob', 'charlie'],
    sample: '[u["profile"]["username"] for u in data["users"]]',
    hints: ['Access nested structure with bracket notation'],
    validPatterns: [/\[.*\[.*profile.*\].*\[.*username.*\].*for.*in\s+data\s*\[.*users.*\]\s*\]/],
    tags: ['json', 'nested', 'transform'],
  },
  {
    id: 'py-dict-043',
    category: 'dict',
    difficulty: 'hard',
    title: 'Counter Elements Expansion',
    text: 'Expand Counter back to list of individual elements',
    setup: 'from collections import Counter\ncounts = Counter({"a": 3, "b": 2, "c": 1})',
    setupCode: 'from collections import Counter\ncounts = Counter({"a": 3, "b": 2, "c": 1})',
    expected: ['a', 'a', 'a', 'b', 'b', 'c'],
    sample: 'list(counts.elements())',
    hints: ['Counter has an elements() method'],
    validPatterns: [/list\s*\(\s*counts\.elements\s*\(\s*\)\s*\)/],
    tags: ['counter', 'collections', 'expansion'],
  },
  {
    id: 'py-dict-044',
    category: 'dict',
    difficulty: 'hard',
    title: 'Pivot Data Structure',
    text: 'Pivot list of dicts to dict of lists by key',
    setup: 'records = [{"name": "Alice", "score": 85}, {"name": "Bob", "score": 90}, {"name": "Charlie", "score": 78}]',
    setupCode: 'records = [{"name": "Alice", "score": 85}, {"name": "Bob", "score": 90}, {"name": "Charlie", "score": 78}]',
    expected: { name: ['Alice', 'Bob', 'Charlie'], score: [85, 90, 78] },
    sample: '{k: [r[k] for r in records] for k in records[0].keys()}',
    hints: ['Get keys from first record'],
    validPatterns: [/\{.*:\s*\[.*for.*in\s+records\s*\].*for.*in\s+records\s*\[\s*0\s*\]/],
    tags: ['pivot', 'transform', 'comprehension'],
  },
];

export default pythonProblems;
